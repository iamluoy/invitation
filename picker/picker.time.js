/*
 * Time picker for pickadate.js v3.3.0
 * http://amsul.github.io/pickadate.js/time.htm
 */
(function(a){if(typeof define==="function"&&define.amd){define(["picker","jquery"],a)}else{a(Picker,jQuery)}}(function(f,a){var b=24,e=60,c=12,d=b*e;function g(j,k){var h=this,i=j.$node.data("value");h.settings=k;h.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"create validate",view:"create validate",disable:"flipItem",enable:"flipItem"};h.item={};h.item.interval=k.interval||30;h.item.disable=(k.disable||[]).slice(0);h.item.enable=-(function(l){return l[0]===true?l.shift():-1})(h.item.disable);h.set("min",k.min).set("max",k.max).set("now").set("select",i||j.$node[0].value||h.item.min,{format:i?k.formatSubmit:k.format});h.key={40:1,38:-1,39:1,37:-1,go:function(l){h.set("highlight",h.item.highlight.pick+l*h.item.interval,{interval:l*h.item.interval});this.render()}};j.on("render",function(){var l=j.$root.children(),m=l.find("."+k.klass.viewset);if(m.length){l[0].scrollTop+=m.position().top-(m[0].clientHeight*2)}}).on("open",function(){j.$root.find("button").attr("disable",false)}).on("close",function(){j.$root.find("button").attr("disable",true)})}g.prototype.set=function(j,k,i){var h=this;h.item[(j=="enable"?"disable":j=="flip"?"enable":j)]=h.queue[j].split(" ").map(function(l){return k=h[l](j,k,i)}).pop();if(j=="select"){h.set("highlight",h.item.select,i)}else{if(j=="highlight"){h.set("view",h.item.highlight,i)}else{if(j=="interval"){h.set("min",h.item.min,i).set("max",h.item.max,i)}else{if((j=="flip"||j=="min"||j=="max"||j=="disable"||j=="enable")&&h.item.select&&h.item.highlight){if(j=="min"){h.set("max",h.item.max,i)}h.set("select",h.item.select,i).set("highlight",h.item.highlight,i)}}}}return h};g.prototype.get=function(h){return this.item[h]};g.prototype.create=function(j,k,i){var h=this;k=k===undefined?j:k;if(f._.isObject(k)&&f._.isInteger(k.pick)){k=k.pick}else{if(a.isArray(k)){k=+k[0]*e+(+k[1])}else{if(!f._.isInteger(k)){k=h.now(j,k,i)}}}if(j=="max"&&k<h.item.min.pick){k+=d}k=h.normalize(j,k,i);return{hour:~~(b+k/e)%b,mins:(e+k%e)%e,time:(d+k)%d,pick:k}};g.prototype.now=function(j,k){var h=new Date(),i=h.getHours()*e+h.getMinutes();if(f._.isInteger(k)){k+=j=="min"&&k<0&&i===0?2:1}else{k=1}return k*this.item.interval+i};g.prototype.normalize=function(k,l){var j=this.item.min,i=this.item.interval,h=k=="min"&&!j?0:(l-j.pick)%i;return l-(h+(l<0?i:0))};g.prototype.measure=function(j,k,i){var h=this;if(!k){k=j=="min"?[0,0]:[b-1,e-1]}else{if(k===true||f._.isInteger(k)){k=h.now(j,k,i)}else{if(f._.isObject(k)&&f._.isInteger(k.pick)){k=h.normalize(j,k.pick,i)}}}return k};g.prototype.validate=function(l,k,j){var h=this,i=j&&j.interval?j.interval:h.item.interval;if(h.disabled(k)){k=h.shift(k,i)}k=h.scope(k);if(h.disabled(k)){k=h.shift(k,i*-1)}return k};g.prototype.disabled=function(j){var h=this,i=h.item.disable.filter(function(k){if(f._.isInteger(k)){return j.hour==k}if(a.isArray(k)){return j.pick==h.create(k).pick}}).length;return h.item.enable===-1?!i:i};g.prototype.shift=function(l,i){var h=this,k=h.item.min.pick,j=h.item.max.pick;i=i||h.item.interval;while(h.disabled(l)){l=h.create(l.pick+=i);if(l.pick<=k||l.pick>=j){break}}return l};g.prototype.scope=function(j){var i=this.item.min.pick,h=this.item.max.pick;return this.create(j.pick>h?h:j.pick<i?i:j)};g.prototype.parse=function(k,l,i){var h=this,j={};if(!l||f._.isInteger(l)||a.isArray(l)||f._.isDate(l)||f._.isObject(l)&&f._.isInteger(l.pick)){return l}if(!(i&&i.format)){throw"Need a formatting option to parse this.."}h.formats.toArray(i.format).map(function(o){var n=h.formats[o],m=n?f._.trigger(n,h,[l,j]):o.replace(/^!/,"").length;if(n){j[o]=l.substr(0,m)}l=l.substr(m)});return +j.i+e*(+(j.H||j.HH)||(+(j.h||j.hh)%12+(/^p/i.test(j.A||j.a)?12:0)))};g.prototype.formats={h:function(h,i){return h?f._.digits(h):i.hour%c||c},hh:function(h,i){return h?2:f._.lead(i.hour%c||c)},H:function(h,i){return h?f._.digits(h):""+(i.hour%24)},HH:function(h,i){return h?f._.digits(h):f._.lead(i.hour%24)},i:function(h,i){return h?2:f._.lead(i.mins)},a:function(h,i){return h?4:d/2>i.time%d?"a.m.":"p.m."},A:function(h,i){return h?2:d/2>i.time%d?"AM":"PM"},toArray:function(h){return h.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(i,j){var h=this;return h.formats.toArray(i).map(function(k){return f._.trigger(h.formats[k],h,[0,j])||k.replace(/^!/,"")}).join("")}};g.prototype.flipItem=function(k,l){var h=this,i=h.item.disable,j=h.item.enable===-1;if(l=="flip"){h.item.enable=j?1:-1}else{if((k=="enable"&&l===true)||(k=="disable"&&l===false)){h.item.enable=1;i=[]}else{if((k=="enable"&&l===false)||(k=="disable"&&l===true)){h.item.enable=-1;i=[]}else{if(a.isArray(l)){if(!j&&k=="enable"||j&&k=="disable"){i=h.removeDisabled(i,l)}else{if(!j&&k=="disable"||j&&k=="enable"){i=h.addDisabled(i,l)}}}}}}return i};g.prototype.addDisabled=function(i,j){var h=this;if(j===false){i=[]}else{j.map(function(k){if(!h.filterDisabled(i,k).length){i.push(k)}})}return i};g.prototype.removeDisabled=function(i,j){var h=this;j.map(function(k){i=h.filterDisabled(i,k,1)});return i};g.prototype.filterDisabled=function(h,k,i){var j=a.isArray(k);return h.filter(function(l){var m=!j&&k===l||j&&a.isArray(l)&&k.toString()===l.toString();return i?!m:m})};g.prototype.i=function(h,i){return f._.isInteger(i)&&i>0?i:this.item.interval};g.prototype.nodes=function(k){var h=this,m=h.settings,l=h.item.select,j=h.item.highlight,n=h.item.view,i=h.item.disable;return f._.node("ul",f._.group({min:h.item.min.pick,max:h.item.max.pick,i:h.item.interval,node:"li",item:function(o){o=h.create(o);return[f._.trigger(h.formats.toString,h,[f._.trigger(m.formatLabel,h,[o])||m.format,o]),(function(p,q){if(l&&l.pick==q){p.push(m.klass.selected)}if(j&&j.pick==q){p.push(m.klass.highlighted)}if(n&&n.pick==q){p.push(m.klass.viewset)}if(i&&h.disabled(o)){p.push(m.klass.disabled)}return p.join(" ")})([m.klass.listItem],o.pick),"data-pick="+o.pick]}})+f._.node("li",f._.node("button",m.clear,m.klass.buttonClear,"type=button data-clear=1"+(k?"":" disable"))),m.klass.list)};g.defaults=(function(h){return{clear:"OK",format:"h:i A",interval:30,klass:{picker:h+" "+h+"--time",holder:h+"__holder",list:h+"__list",listItem:h+"__list-item",disabled:h+"__list-item--disabled",selected:h+"__list-item--selected",highlighted:h+"__list-item--highlighted",viewset:h+"__list-item--viewset",now:h+"__list-item--now",buttonClear:h+"__button--clear"}}})(f.klasses().picker);f.extend("pickatime",g)}));