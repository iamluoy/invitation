<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>免费邀请函应用制作平台</title>
<link rel="shortcut icon" href=""/>
<link rel="stylesheet" href="css/smoothness/jquery-ui.css?v=20160410" />
<link rel="stylesheet" href="css/bootstrap4app.css?v=20160410" />
<link rel="stylesheet" href="css/common.css?v=20160410" />
<link rel="stylesheet" href="css/admin/global.css?v=20160410" />
<link rel="stylesheet" href="css/admin/myapp/common.css?v=20160410" />
<link rel="stylesheet" href="css/operamasks/om-fileupload.css?v=20160410" />
<link rel="stylesheet" href="css/index.css?v=20160410" />
<link rel="stylesheet" href="css/edit/edit.css?v=20160410" />
<link rel="stylesheet" href="css/colorpicker/colorpicker-base.css?v=20160410" />
<link rel="stylesheet" href="css/kindeditor-4.1.7/default.css?v=20160410" />

<script type="text/javascript" src="js/jquery-1.7.2.min.js?v=20160410"></script>
<script type="text/javascript" src="js/jquery.cookie.min.js?v=20160410"></script>
<script type="text/javascript" src="js/jquery-ui-min.js?v=20160410"></script>
<script type="text/javascript" src="js/operamasks-ui.min.js?v=20160410"></script>
<script type="text/javascript" src="js/kindeditor-4.1.7/kindeditor.js?v=20160410"></script>
<script type="text/javascript" src="js/kindeditor-4.1.7/lang/zh_CN.js?v=20160410"></script>
<script type="text/javascript">
window.app=window.app?window.app:{};
var domain = location.href.replace('http://', '');
window.app = {
	module:'page',
	invitation_id: 'd7df54fc-c313-11e5-9766-0697249d8e49',
	uid: '106867',
	langType: 1,
	uname: 'yong.luo@5135hui.com',
	maxpage: 15,
	basePath: 'http://192.168.16.231:8080/EE/invitation/',
	uploadImgPath: 'http://cdn.weikecj.cn/',
	uploadMusicPath: 'http://cdn.weikecj.cn/',
	uploadVideoPath: '',
	domain: 'http://'+domain.substring(0,domain.indexOf('/')),//window.location.host
	name: '邀请函·会议邀请函',
	data: null,
	unamekey: 'appUsername',
	pwdKey: 'appPassword'
}
$.ajaxSettings.async = false; 
$.getJSON("json/getTemp1.json",function(res) {
	window.app.data = res;
});

/*function getInvitationById() {
	$.ajax({
		url: 'getInviteLetter.action',
		type: 'POST',
		async: false,
		data: {
			id: window.app.invitation_id,
			langType: window.app.langType
		},
		beforeSend: function() {

		},
		success: function(response, status, xhr) {
			var json_comment = $.parseJSON(response);
			$.each(json_comment.rows, function(index, value) {
				window.app.data = JSON.parse(value.IL);
			})
		},
		error: function() {
			alert('system error!')
		}
	})
}
getInvitationById();

function getUrlParam(name) {
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象  
	var r = window.location.search.substr(1).match(reg); //匹配目标参数  
	if (r != null) return unescape(r[2]);
	return null; //返回参数值  
}*/
</script>
<script type="text/javascript" src="js/indexedDB.js?v=20160410"></script>
<script type="text/javascript" src="js/colorpicker.js?v=20160410"></script>
<script type="text/javascript" src="js/color_exchange.js?v=20160410"></script>
<script type="text/javascript" src="js/mobile/url.js?v=20160410"></script>
<script type="text/javascript" src="js/edit.js?v=20160410"></script>
<script type="text/javascript" src="js/key.js?v=20160410"></script>
<script type="text/javascript" src="js/select.js?v=20160410"></script>
</head>
<body class='s-bg-eee'>
<!--<script type="text/javascript" src="js/header.js?v=20160410"></script>-->
<style>
#superAccount{
	color:#666;
}
#superAccount:hover{
	text-decoration: underline;
}
.online_windows.overz{margin-top: -221px;}
@media screen and (min-device-height:899px){
	.online_windows.overz{margin-top: -285px;}
}
.menu ul li.template_h5 a{
	width:100px;
}
.menu ul li.template_h5 a span{
	width:100px;
	text-align:center;
}
#menu ul li.template_h5 a span.bg{
	background:url(image/btn_login_h5.png) center center no-repeat;
}
</style>
<!--<div class="header">
	<div class="content">
		<div class="fl" style="position: relative">
			<a class="fl" href="/"> <img
				style="width: 150px; margin-right: 5px; margin-top: 5px;"
				src="http://static.weikecj.cn//weikechangjing/image/logo.png"
				alt="微客场景LOGO" title="微客场景LOGO"> <span id="beta-flag">Beta</span>
			</a>
			<div class="logo-title fl" style="margin: 30px 0 0 0;">
				<h1 style="font-weight: normal; line-height: 20px;">微信场景运营服务平台</h1>
			</div>
		</div>
		<div id="menu" class="menu">
			<ul class="header-nav">
				<li><a class="btn-nav" href="/">首 页</a></li>
				<li><a class="btn-nav " href="/template.jsp">模板案例</a></li>
				<li class="template_h5"><a class="btn-nav " href="/template_h5.jsp">H5营销场景</a></li>			
				<img class="free-icon"
					src="http://static.weikecj.cn//weikechangjing/image/hot.gif"
					style="position: absolute;top: 10px;left: 265px;width: 27px;">
				<li><a class="btn-nav " href="/help.jsp">帮助中心</a></li>
				<li><a class="btn-nav " href="/myapp/list.jsp">我的场景</a></li>
				<li><a class="btn-nav " href="/admin/user/logout">注 销</a></li>
			</ul>
		</div>
	</div>
</div>
<script>
$(function(){
	var url=location.href;
	if(url.indexOf('index.jsp')>0 || url.lastIndexOf('/')==(url.length-1) || url.indexOf('template.jsp')>0){
		if(url.indexOf('template.jsp')>0){
			$('ul.header-nav li').eq(1).find('a.btn-nav').addClass('btn-nav-current');			
		}else{
			$('ul.header-nav li').eq(0).find('a.btn-nav').addClass('btn-nav-current');			
		}
	}else if(url.indexOf('template_h5.jsp')>0 || url.indexOf('h5.weikecj.cn')>0){
		$('ul.header-nav li').eq(2).find('a.btn-nav').addClass('btn-nav-current');		
	}else if(url.indexOf('help.jsp')>0){
		$('ul.header-nav li').eq(3).find('a.btn-nav').addClass('btn-nav-current');		
	}else{
		$('ul.header-nav li').eq(4).find('a.btn-nav').addClass('btn-nav-current');		
	}
});
</script>

<script>
$('head title').after($('<link href="" rel="shortcut icon">'));
</script>-->
<link rel="stylesheet" href="css/uploading.css?v=20160410" />
<script type="text/javascript" src="js/uploading.js?v=20160410"></script>
<img class="upload-mask-icon" style="z-index: 9999;" src="image/admin/uploading.gif">
<div class="upload-mask" style="width: 100%;height: 100%;opacity: 0.6;display: block;background: rgb(252, 252, 252);z-index: 9998;display:none;"></div>
	<!--<div style="height:97px;"></div>-->
	<!-- 编辑App名称 -->
	<div class='u-listShow-2 f-flow222 f-cur w-100pc' style="cursor:default;">
		<div class='item-bottom' style="text-align: center;">
			<h4 id="editSpan" style="width: 990px;margin: 0px auto;margin-left: 2px!important;text-align: left;">
					<span class="app-name-show" app-name="邀请函·会议邀请函"><a href="javascript:void(0)"  style="cursor:default;">邀请函·会议邀请函</a></span> <span
					class='rew css_sprite s-bg-rew f-cur  edit-app-name' title="编辑场景名称"></span>					
					<!--<span class="btn" onclick="location.href='#'" style="float: right;margin-right: 3px;font-size: 14px;" title="返回到场景列表">返回场景列表</span>-->
					<!--<span class="btn apply" onclick="window.open('/apply.jsp?activity_id=192202')" style="float: right;margin-right: 3px;font-size: 14px;" title="申请成为案例">申请成为案例</span>-->
					<span class="btn btn-warning spanPreview" onclick="window.open('pc-preview.html')" style="float: right;margin-right: 4px;margin-left:0px;font-size: 14px;color:white;" title="预览前请确保场景已保存">预览</span>
					<span id="save" class="btn btn-success" style="float: right;margin-right: 4px;font-size: 14px;color:white;" title="场景保存后才会生效">保存场景</span>
					<!--<img style="float: right;margin-right: 7px;margin-top: -7.5px; opacity: 0.7;" src="image/edit/save-guide.png">-->
			</h4>
		</div>
	</div>

	<div class="row-fluid" style="height: 600px;">
		<div class="span4 edit-frame-span">
		
			<div class="main" style="margin-top: 10px;margin-right:35px;width:225px;">
				<div class="mobile" style="width:235px;">
					<div class="top">
						<div class="setting" rightChange="true" style="width:175px;" title="场景设置"><img src="image/edit/setting.png">场景设置</div>
					</div>
					<div style="background-color:white;height: 475px;overflow-y: auto;">
						<ul id="page">
						  <script>
						  	if(null != window.app.data && window.app.data instanceof Array){
							  	for(var i=0;i<(window.app.data.length-1);i++){
								  if(i==0){
									  document.writeln('<li idx="'+i+'" class="page-li selected"><span>'+(i+1)+'</span>第'+(i+1)+'页<img class="del" title="删除" src="image/edit/del.png"><img class="copy" title="复制" src="image/edit/copy.png"><img class="template" title="页面模版" src="image/edit/template.png"></li>');					
								  }else{
									  document.writeln('<li idx="'+i+'" class="page-li"><span>'+(i+1)+'</span>第'+(i+1)+'页<img class="del" title="删除" src="image/edit/del.png"><img class="copy" title="复制" src="image/edit/copy.png"><img class="template" title="页面模版" src="image/edit/template.png"></li>');									  
								  }						  
							  	}
						  	}
						  </script>
						</ul>		
					</div>
					<div class="bottom" id="addPage" title="添加页面">
						<img src="image/edit/addWidget.png" style="vertical-align: -2px;margin-right: 5px;">添加页面
					</div>	
				</div>			
			</div>
			
			<div class="main" style="margin-right:35px;width: 313px;">
				<div class="mobile" style="width:322px;">
					<div class="top">
						<div class="addWidget" rightChange="true" title="添加控件"><img src="image/edit/addWidget.png">添加控件</div>
						<div class="editBackground" rightChange="true" title="编辑背景" style="margin-left:10px;"><img src="image/edit/editBackground.png">编辑背景</div>
					</div>
					<iframe id="screen" src="action-screen.html?page=0" frameborder="0" scrolling="no"></iframe>
					<div class="bottom" style="  font-size: 12px; padding-top: 9px; padding-bottom: 5px;">
					<img style=" width: 17px;vertical-align: -3px;margin-right: 2px;" src="image/warn.png">为了更好的兼容各类手机屏幕，请把主体内容放在<br>页面中部，应避免把重要内容放在页面边缘。
					</div>	
				</div>			
			</div>
			
			<div class="main">			
				


	
<style>
#file_upload0Uploader {
	position: absolute;
	top: 362px;
	opacity: 0;
}
#file_upload1Uploader {
	position: absolute;
	top: 214px;
	left: 319px;
}
#file_upload1Queue{
	display:none;
}
/***音乐配置界面***/
#new_music_div_{	
  z-index: 9997;
}
#new_music_div_ .newpop-box{
  	position: absolute;
    top: 50%;
    left: 50%;
    height: 346px;
    width: 420px;
    margin: -187px 0 0 -210px;
    background-color: #fff;
}
#new_music_div_ .tips{
	color: #999;
	font-size: 12px;
	margin-left: 5px;
}
#new_music_div_ .click_effect{
	padding: 6px 32px;
}
#new_music_div_ .click_effect label{
	float:left;
	margin-top: 5px;
}
#new_music_div_ .click_effect input[type="radio"]{
	vertical-align: -2px;
}
#new_music_div_ .npop-btn{
	position: relative;
	padding-left: 119px;
	padding-top: 15px;
	border-top: #C6C6C6 1px dashed;
}
.setting .minSetting .timeSpanTitle{
	display: inline-block;
	margin-top: 4px!important;
}
.setting .minSetting .timeSpan{
	display: inline-block;
	margin-top: 5px!important;
}
#new_music_div_ .pBtn{
	width: 28px;
    margin-top: 4px;
    margin-left: 4px;
    cursor: pointer;
}
#new_music_div_ .pBtn.pause{
	display:none;
}
</style>	
	
<div class="mobile edit setting"
	style="background-color: #F7F7F7; width: 377px; height: 585px;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		场景设置<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
		<div class="block">
			<p class="title">场景名称：</p>
			<p>
				<input type="text" placeholder="请输入场景名称，20个字符以内" maxlength="20" class="appname">
			</p>
		</div>
		<div class="block">
			<p class="title">分享标题：</p>
			<p>
				<input type="text" placeholder="请输入分享时显示的标题，50个字符以内" maxlength="50" class="sharetitle">
			</p>
		</div>
		<div class="block">
			<p class="title">分享描述：</p>
			<p>
				<textarea placeholder="请输入分享时显示的描述，200个字符以内" maxlength="200" class="sharedesc"></textarea>
			</p>
		</div>
		<div class="block">
			<p class="title">分享logo：<span class="tips">(建议尺寸180像素x180像素)</span></p>
			<p>
				<div class="wcenter pagebg" title="点击选择图片" id="sharelogo" style="height: 100px;line-height: 100px;font-size: 18px;color: #999;">
					选择图片
				</div>			
			</p>
		</div>
		<div class="block">
			<p class="title">背景音乐：</p>
			<p style="margin: 9px 0px;">
				<input type="checkbox" class="isMusic"
					style="width: 20px; width: 13px; height: 13px; vertical-align: -2px; margin-left: 1px;">
				开启背景音乐
			</p>
			<p>
				<input type="text" id="musicBox" style="width: 220px;" readonly="readonly">
				<button class="btn configMusic"
					style="margin-left: 2px; margin-top: 5px;">配置音乐</button>
			</p>
		</div>
		<!-- <div class="block minSetting">
			<p class="title">自动翻页：</p>
			<p style="margin: 9px 0px;">
				<input type="checkbox" class="isAutoPlay"
					style="width: 20px; width: 13px; height: 13px; vertical-align: -2px; margin-left: 1px;">
				开启自动翻页
			</p>
			<div>
				<span class="ltitle timeSpanTitle">翻页定时：</span>
				<div class="weikeSlider autoPlayTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" style="width: 28px;" maxlength="10"> 
				<span class="ceil timeSpan">秒</span>
			</div>
		</div> -->
		<div class="block">
			<p class="title">翻页效果：</p>
			<p>
				<select class="pagescrolltype">
					<option value="1">普通上下翻页</option>
					<option value="0">滚屏上下翻页</option>
					<option value="2">缩放上下翻页</option>
					<option value="4">普通左右翻页</option>
					<option value="3">滚屏左右翻页</option>
					<option value="5">缩放左右翻页</option>
				</select>
			</p>
		</div>
		<div class="block">
			<p class="title">动画播放：</p>
			<p>
				<select class="pageanimate">
					<option value="0">播放一次</option>
					<option value="1">总是播放</option>
				</select>
			</p>
		</div>
		<div class="block" style="border-bottom:0px;">
			<p class="title">页面循环显示：</p>
			<p>
				<select class="pageplaytype">
					<option value="0">循环显示</option>
					<option value="1">不循环显示</option>
				</select>
			</p>
		</div>
		
	</div>
</div>




<div class="m-popup new-popup" id="new_music_div_">
	   <div class="newpop-box">
	     <h3>配置音乐<a href="#" class="icon-m btn-ed-close" title="关闭窗口" onclick="hideSelectMusic()"></a></h3>
	     <div class="block minSetting click_effect">
	     	<div class="m_type">
				<label style="margin-top: 7px;"><input type="radio" name="musictype" class="musictype_ku"> 音乐库</label>
				<select class="preMusicSelect" style="width: 203px;margin-left: 24px;padding-left: 3px;">
					<option value="0">请选择</option>
					<optgroup label="舒缓">
					<option value="http://res.70c.com/cloudapppic/2015/4/30/f436bf821f0adc71.mp3">舒缓-Annie'sWonderland.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/337675dd4f0aa908.mp3">舒缓-Snowdreams-纯音乐版.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/d77b991c85cf669c.mp3">舒缓-童年-经典背景音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/d6b93f1bd2342fa6.mp3">舒缓-OneDayInSpring.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/a8e19aa2231c791b.mp3">舒缓-心的声音.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/08991a9352550ea5.mp3">舒缓-泰坦尼克号.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/6e041be3e257b002.mp3">舒缓-优美的水疗及瑜伽音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/04978c9c2923953e.mp3">舒缓-假日时光.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/d4757721f2174029.mp3">舒缓-冥想.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/523a12b25887e783.mp3">舒缓-梦的海洋.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/70ecdb7f46db1fcd.mp3">舒缓-生命的力量.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/9f637d51cf86ae8e.mp3">舒缓-昔情难追.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/104d1984bae7f82d.mp3">舒缓-被遗忘的天使钢琴版超好听.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/80361d31031cbe61.mp3">舒缓-忧伤还是快乐纯音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/507a6bb843ea9101.mp3">舒缓-执子之手.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/b494586e3b5f4003.mp3">舒缓-有一天我们都会老.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/d5fa8fbc13da2f8f.mp3">舒缓-启程.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/f08274360f80fdc3.mp3">舒缓-七月七日晴.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/12682d8cf3417862.mp3">舒缓-普通朋友.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/0beee0aef5a84a03.mp3">舒缓-Soft.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/bbaf1c33707710ac.mp3">舒缓-Let'sDoIt.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/df432cca9d4bae1a.mp3">舒缓-ByeBye.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/5d55c25735298504.mp3">舒缓-再别康桥.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/41bf0017b2a02b7c.mp3">舒缓-心酸.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/6f402df8a393d8c8.mp3">舒缓-失败者的飞翔.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/a934b7f6c7bf7e88.mp3">舒缓-人来人往.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/7fc530eb89e97ce3.mp3">舒缓-绵绵.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/7e0d08e669317924.mp3">舒缓-九份的咖啡店.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/a111eb2fb44416c0.mp3">舒缓-红豆.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/7fe726e5fc416314.mp3">舒缓-After17.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/6fd365455cf438fc.mp3">舒缓-好久不见.mp3</option>
					</optgroup>
					<optgroup label="节日喜庆">
					<option value="http://res.70c.com/cloudapppic/2015/12/28/8eebe80218284f26.mp3">节日喜庆-难忘今宵.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/1a656779f4cb78fc.mp3">节日喜庆-欢乐中国年.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/7ea6892d77ac9858.mp3">节日喜庆-好运来2.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/b8a972ab0c64a3b6.mp3">节日喜庆-好运来.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/d84dfad7a0d45b86.mp3">节日喜庆-春节序曲.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/5f8822c3cbaf67d0.mp3">节日喜庆-开门红.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/e0000af6aa6aeaf1.mp3">节日喜庆-好日子2.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/2523eb63bdaba544.mp3">节日喜庆-好日子.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/9b0f49ef3ba84ab8.mp3">节日喜庆-恭喜发财.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/99d9f0bd40007deb.mp3">节日喜庆-拜年2.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/12/28/aa6c8afaee80d113.mp3">节日喜庆-拜年.mp3</option>
					<option value="http://res.70c.com/group1/M00/BB/24/yq0KA1RtR0SAQmUgAAhGwF6ejdQ433.mp3">节日喜庆-生日快乐.mp3</option>
					<option value="http://res.70c.com/group1/M00/C0/29/yq0KA1SAHh-AC3sjAAaNwJGBKLc120.mp3">节日喜庆-优美轻快.mp3</option>
					<option value="http://res.70c.com/group1/M00/C0/29/yq0KA1SAHhqAG3AJAAfOwDlrvk0233.mp3">节日喜庆-铃儿响叮当.mp3</option>
					<option value="http://res.70c.com/group1/M00/C0/29/yq0KA1SAHhKAX8ZXAAf5gJrJX9g178.mp3">节日喜庆-merrychristmas.mp3</option>
					</optgroup>
					<optgroup label="伤感">
					<option value="http://res.70c.com/cloudapppic/2015/4/30/c9c202bc673ba133.mp3">伤感-小鱼儿与花无缺.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/f94b05caea04e7ae.mp3">伤感-感天动地的母爱.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/6be90862be6f4292.mp3">伤感-音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/39992569a14d4b6d.mp3">伤感-哼唱.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/167af539748b2b8e.mp3">伤感-CancionTriste.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/dd15a803bc152496.mp3">伤感-四大才子.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/7832ff190fe5425c.mp3">伤感-天龙八部.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/5e9fb264ea78d111.mp3">伤感-失恋伤感.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/5b9d4123ec9d6a2d.mp3">伤感-感恩母亲.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/c892cab8cde5eae9.mp3">伤感-无间道.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/1ee3fc69c38233c6.mp3">伤感-力荐的伤感音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/0db924d0d7ea3028.mp3">伤感-电台感人.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/9514adba7a978191.mp3">伤感-神秘园.mp3</option>
					</optgroup>
					<optgroup label="抒情">
					<option value="http://res.70c.com/cloudapppic/2015/4/30/8400c223f11c32c2.mp3">抒情-背景音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/963725fddd4431c0.mp3">抒情-Dj.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/70c09bf0be40d53e.mp3">抒情-FromTheYellowRoom.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/aa0069ea214853bc.mp3">抒情-炫舞.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/260e49763d588f96.mp3">抒情-佚名.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/7d66028397b68c4c.mp3">抒情-大气庄重悲烈.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/59359eb792f0cf8f.mp3">抒情-TheSoongSister.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/ee92a8dbc11388dd.mp3">抒情-很动听抒情.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/6e83e26db3dbeac1.mp3">抒情-琵琶语.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/470d9c63d67b5ff6.mp3">抒情-抒情感动.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/f4cdc294bb106a35.mp3">抒情-MyAll.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/edda2763d8774c3b.mp3">抒情-夏影.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/2d05bc11693d7cbf.mp3">抒情-和兰花在一起.mp3</option>
					</optgroup>
					<optgroup label="雄浑大气">
					<option value="http://res.70c.com/cloudapppic/2015/4/30/3b96487ebccfba34.mp3">雄浑大气-ElmerBernstein-TheMagnificentSeven.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/6b4274322032f3e5.mp3">雄浑大气-开场曲.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/0d78ccaf93580aa2.mp3">雄浑大气-凯旋、胜利.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/6fd91264991d41bd.mp3">雄浑大气-大气.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/cec379143c3a2498.mp3">雄浑大气-RobertMiles-Children.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/23e67e98043f7440.mp3">雄浑大气-背景音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/a3e0ff36da1025b2.mp3">雄浑大气-英雄悲.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/b19a6d144838aa0f.mp3">雄浑大气-英雄的黎明.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/0f87d9fcc17077a7.mp3">雄浑大气-精武门.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/9d3a39bd460df6f4.mp3">雄浑大气-石破天惊.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/cccba717a65a9260.mp3">雄浑大气-大气背景音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/c7131f119341cb8b.mp3">雄浑大气-神秘激发潜能背景音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/a319038dfc02fd75.mp3">雄浑大气-康熙王朝.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/8e995211df1d95e2.mp3">雄浑大气-故宫的神思.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/bd3ecebee35f5c48.mp3">雄浑大气-豪迈大气暖场背景音乐.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/20e69e6e34d14536.mp3">雄浑大气-天地孤影任我行.mp3</option>
					<option value="http://res.70c.com/cloudapppic/2015/4/30/d6265e386a6c6831.mp3">雄浑大气-血染的战神燕归人悲壮曲.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/5face191a1b9755a.mp3">雄浑大气-飞得更高.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/7c9b5aad5b3e96da.mp3">雄浑大气-爱我中华.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/ad31052558299de6.mp3">雄浑大气-LuckyDay.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/bf50bbc3cf9745b5.mp3">雄浑大气-Hey,SoulSister.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/fcb7d81f9fd35b9b.mp3">雄浑大气-Hero.mp3</option>
					</optgroup>
					<optgroup label="甜蜜">
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/f423428727dcb2b0.mp3">甜蜜-约定.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/e39b25852addb99a.mp3">甜蜜-因为有你.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/d2f17ded1417c7df.mp3">甜蜜-幸福的节拍.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/ae23898996226d90.mp3">甜蜜-我会很爱妳.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/1f68601319d0baa6.mp3">甜蜜-我的宝贝.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/bdfc34d2c9191ea5.mp3">甜蜜-唯一.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/893bb327d1146a6c.mp3">甜蜜-说爱你.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/5b5365637db36e2e.mp3">甜蜜-老婆最大.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/bc797b6812e74ec0.mp3">甜蜜-就是爱.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/9667e51f8e402a0f.mp3">甜蜜-今天就要嫁给我.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/45d675aa2ea0ba23.mp3">甜蜜-嫁给我你会幸福.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/e97bef25566fd05f.mp3">甜蜜-婚礼上的英文音乐适合新郎接新娘时用.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/ac3a389f0489a09e.mp3">甜蜜-婚礼进行曲（选自《仲夏夜之梦》）.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/2a3cc5d216451498.mp3">甜蜜-婚礼进行曲(瓦格纳).mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/2d21b346143acfc2.mp3">甜蜜-婚礼.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/b50f1669cd3ed22a.mp3">甜蜜-婚礼(2).mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/534818aa1edd5303.mp3">甜蜜-爱在85°C.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/08af0218ec352b22.mp3">甜蜜-爱你.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/8341c25e6d209c12.mp3">甜蜜-爱的就是你.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/925e249a50d5ea54.mp3">甜蜜-MarryMe.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/563cf81fd5bab7f4.mp3">甜蜜-ILoveYou(Ot-爱很简单).mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/27f71c511e29a117.mp3">甜蜜-IDo.mp3</option>
					</optgroup>
					<optgroup label="劲爆">
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/d60a3f0ec3176ac3.mp3">劲爆-特务J.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/4aed0ee89879be98.mp3">劲爆-逆战.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/9ff0dd71e52f804a.mp3">劲爆-表白.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/bf8e9834b9727049.mp3">劲爆-tooBad.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/adc30b251ce1d6e3.mp3">劲爆-Girlfriend.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/ea114189fe02c104.mp3">劲爆-Dangerous.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/00d2005897ba958f.mp3">劲爆-BeatIt.mp3</option>
					</optgroup>
					<optgroup label="怀旧">
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/1e1ddc7ecbcfba43.mp3">怀旧-亲密爱人.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/979b6762fbd2d27f.mp3">怀旧-Vincent.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/9bafa2a9213a7ad4.mp3">怀旧-TooManyDays.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/e030d89cd868629f.mp3">怀旧-TimesOfYourLife.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/15749736db7a0969.mp3">怀旧-MyAll.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/9e5d0b43f5ba6aa5.mp3">怀旧-Jardin27Hiver.mp3</option>
					<option value="http://res.70c.com/cloudappmp3/2015/2/9/4fd68ef20dab986a.mp3">怀旧-Can'TTakeMyEyesOffYou.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHToyADvfQAAnFOM6H19w463.mp3">怀旧-禅院钟声.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHToOAGxEEAAktYsMfdbA890.mp3">怀旧-步步高.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHTz-AH0w1AAoaHjAnNhs240.mp3">怀旧-寒鸦戏水.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHTqOAGDASAAj6xZah6yA445.mp3">怀旧-浪漫清晰.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT4CAGCJkAAraxfiUnJQ192.mp3">怀旧-喜洋洋.mp3</option>
					</optgroup>
					<optgroup label="其他">
					<option value="http://res.70c.com/group1/M00/C0/29/yq0KA1SAHgyALvuFAAf0QE3EvLo711.mp3">伴奏-再度梦想.mp3</option>
					<option value="http://res.70c.com/group1/M00/C0/29/yq0KA1SAHgeAMwDTAAfyAJd13uc548.mp3">伴奏-温馨.mp3</option>
					<option value="http://res.70c.com/group1/M00/C0/29/yq0KA1SAHgKANLdIAAdEwCIemNU304.mp3">伴奏-天使小夜曲.mp3</option>
					<option value="http://res.70c.com/group1/M00/C0/29/yq0KA1SAHfeANcyiAAbZgANhsGo553.mp3">伴奏-欢乐激扬.mp3</option>
					<option value="http://res.70c.com/group1/M00/BB/17/yq0KA1Rsao-APPhyAALeQFg9Dtw301.mp3">伴奏-温馨有爱.mp3</option>
					<option value="http://res.70c.com/group1/M00/BA/95/yq0KA1RoSVGAUAJiABAackPFSJk361.mp3">伴奏-环太平洋.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT4aAHL1bAAqqmzRHCqE496.mp3">伴奏-勇士之歌.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT3iAMXYOAAgPq1MjV9M930.mp3">伴奏-探索探寻.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT3GAPDQFAAsl35dWaW8009.mp3">伴奏-放克清脆.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT2uANR1eAAnKHiO0Yz4694.mp3">伴奏-激励清晰.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT2KAfu4sAAuC75mqU4A730.mp3">伴奏-清晰清脆.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT1yAM9oGAAdXLoYKHfc824.mp3">伴奏-清晰节奏.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT1WAZ-w2AAeiSMo8hRo849.mp3">伴奏-激励悠扬.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT06AEqxZAApZyq3XR10208.mp3">伴奏-欢快悠扬.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT0mAIdi_AAYLwMOVLVY985.mp3">伴奏-嘻哈清晰.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHT0WASegOAAv9YiIntCg424.mp3">伴奏-嘻哈低沉.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHTp2AF0xLAApqHhAIF2g859.mp3">伴奏-悠扬平静.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHTpeAQRwbAAiB9Gr-7uw695.mp3">伴奏-激越节奏.mp3</option>
					<option value="http://res.70c.com/group1/M00/B7/4F/yq0KA1RHTpKAZJLAAApU5EpqWac054.mp3">伴奏-激励低沉.mp3</option>
					</optgroup>
				</select> 
				<img class="pBtn play" title="播放" src="image/edit/play.png">
				<img class="pBtn pause" title="暂停"  src="image/edit/pause.png">
				<span class="tips" style="margin-left: 2px;margin-top: 3px;">
					(选择音乐后，可以点击播放试听)
				</span>
			</div>
			<div class="m_type">
				<label><input type="radio" name="musictype" class="musictype_link"> 外部链接</label>
				<input type="text" class="val link" style="width:250px" placeholder="请输入链接地址，以http://或https://开头" maxlength="300"> <br>
				<span class="tips" style="margin-left: 2px;margin-top: 3px;">
					(可进入<a target="_blank" href="http://www.xuenb.com/tools/mp3/" style="color:#013d5c;text-decoration: underline;">音乐外链网站</a>搜索并获取链接，<a href="/help.jsp#6_3" target="_blank" style="color:#013d5c;text-decoration: underline;">如何获取？</a>)
				</span>
			</div>
			<div class="m_type">
				<label><input type="radio" name="musictype" class="musictype_upload"> 本地上传</label>
				<input type="text" class="val upload" style="width: 186px;background: white;" placeholder="请上传音乐，必须小于1MB" maxlength="300" readonly="readonly">
				<button class="btn uploadMusic" id="file_upload1"
					style="margin-left: 2px;display:block;">上传</button><br>
				<span class="tips" style="margin-left: 2px;margin-top: 3px;">(上传大小必须小于1MB，<a target="_blank" href="http://pan.baidu.com/s/1sjLr78x" style="color:#013d5c;text-decoration: underline;">音频压缩工具下载</a>)</span>
			</div>			
			<div class="npop-btn">
				<a href="javascript:;" class="btn btn-success" style="margin-right:5px;">确定</a>
				<a href="javascript:;" class="btn" onclick="hideSelectMusic()">取消</a>
			</div>			
		</div>	     
	   </div>
	</div>
	<audio id="preMusic" src="" preload="auto"></audio>
<script>

$(function(){
	
	$('#sharelogo').click(function(){
		showSelectImg(function(url){
			//更新ui
			$('#sharelogo').css('backgroundImage','url('+getUrl(url,PATH_TYPE_IMG)+')').html('');
			//更新数据
			var lastObj=currEditObj[currEditObj.length-1];
			lastObj.logo=url;
		});
	});
	
	$('#loadinglogo').click(function(){
		showSelectImg(function(url){
			//更新ui
			$('#loadinglogo').css('backgroundImage','url('+getUrl(url,PATH_TYPE_IMG)+')').html('');
			//更新数据
			var lastObj=currEditObj[currEditObj.length-1];
			lastObj.loadinglogo=url;
		});
	});
	
	//上传背景音乐
	var $musicBox=$('#musicBox');
	var $uploadMusicBox=$('#new_music_div_ input.upload');
	var $fileInput1=$('#file_upload1');
	$fileInput1.omFileUpload({
	    action : '/uploadmusic',
	    fileExt : '*.mp3',
	    fileDesc : 'Music Files',
	    sizeLimit : 1 * 1024 * 1024,
	    buttonImg:'image/admin/uploadMusic.jpg',
	    width:62,
	    height:32,
	    onError:function(ID,fileObj,errorObj,event){
	    	uploading(false);
	        if(errorObj.type == "File Size"){
	            alert("上传文件的大小不能超过1MB");
	        }
	    },
		onSelect:function(ID,fileObj,event){
			uploading(true);
			setTimeout(function(){
				$fileInput1.omFileUpload({'actionData':{uid:window.app.uid}});
				$fileInput1.omFileUpload('upload');
			},10);
		},
	    swf : 'http://www.weikecj.cn/swf/om-fileupload.swf',
	    method:'GET',
		onComplete : function(ID, fileObj, response, data, event) {
			alert('上传成功');
			uploading(false);
			var jsonData = eval("(" + response + ")");
			var fileName=jsonData.fileName;
			$uploadMusicBox.attr('data-url',window.UPLOAD_PREFIX+fileName).val(fileName.substring(fileName.lastIndexOf('/')+1).replace(/-/g,''));
			var $m_type=$('#new_music_div_ .click_effect>div.m_type').eq(2);
			$m_type.find('input[type="radio"]').prop('checked',true);
			$m_type.siblings('.m_type').find('input[type="text"]').val('');
		}
	});
	
	//绑定事件更新全局data
	$('.content .appname').blur(function(){
		var val=$(this).val();
		val=val?val:'未命名';
		val=val.replace(/"/g,"");
		window.app.name=val;
		$('.u-listShow-2 .item-bottom h4 a').html(val);
		$(this).val(val);
	});
	$('.content .sharetitle').blur(function(){
		try{
			if(currEditObj.length>1){
				var val=$(this).val();
				val=val?val:'';
				val=val.replace(/"/g,"");
				var lastObj=currEditObj[currEditObj.length-1];
				lastObj.title=val;
				$(this).val(val);
			}
		}catch(e){			
		}		
	});
	$('.content .sharedesc').blur(function(){
		try{
			if(currEditObj.length>1){
				var val=$(this).val();
				val=val?val:'';
				val=val.replace(/"/g,"");
				var lastObj=currEditObj[currEditObj.length-1];
				lastObj.description=val;
				$(this).val(val);
			}			
		}catch(e){			
		}
	});
	$('.content .pagescrolltype').change(function(){
		var val=$(this).val();
		var lastObj=currEditObj[currEditObj.length-1];
		lastObj.pagescrolltype=val;
	});
	$('.content .pageanimate').change(function(){
		var val=$(this).val();
		var lastObj=currEditObj[currEditObj.length-1];
		lastObj.pageanimate=val;
	});
	$('.content .pageplaytype').change(function(){
		var val=$(this).val();
		var lastObj=currEditObj[currEditObj.length-1];
		lastObj.pageplaytype=val;
	});
	$('.content .isMusic').change(function(){
		var val=$(this).prop('checked');
		var firstObj=currEditObj[0];
		firstObj.isMusic=val;
	});	
	$('.content .isAutoPlay').change(function(){
		var val=$(this).prop('checked');
		var lastObj=currEditObj[currEditObj.length-1];
		lastObj.isAutoPlay=val;
	});	
	
	var autoPlayTime;	
	function initAutoPlayTime(val){
		autoPlayTime=$('.edit.setting .autoPlayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 20.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        var lastObj=currEditObj[currEditObj.length-1];
				lastObj.autoPlayTime=ui.value;
			}
		});
	}
	initAutoPlayTime(0);
	$('.edit.setting .autoPlayTime').siblings('.val').blur(function(){
		var val=$(this).val();
		if(!isNaN(val)){
			var num=parseFloat(val).toFixed(1);
			if(num==parseInt(num)){
				num=parseInt(num);
			}
			if(num>=0 && num<=20){
				$(this).val(num);
				autoPlayTime.slider('value',num);		
				//更新数据
		        var lastObj=currEditObj[currEditObj.length-1];
				lastObj.autoPlayTime=num;
			}else{
				$(this).val(autoPlayTime.slider('value'));
			}
		}else{
			$(this).val(autoPlayTime.slider('value'));
		}
	});
	
	$('button.configMusic').click(function(){
		var musicBox=$('#musicBox').val();
		$('#new_music_div_ input.link').val('');
		$('#new_music_div_ input.upload').val('');		
		if(!musicBox || musicBox.length==0){
			$('#new_music_div_ .musictype_ku').prop('checked',true);
		}else if(musicBox.indexOf('/music.jsp?url=')!=-1){
			$('#new_music_div_ .musictype_ku').prop('checked',true);
			$('#preMusic').attr('src',musicBox);
			$('#new_music_div_ .preMusicSelect').val(decodeURIComponent(musicBox.substring(musicBox.indexOf('music.jsp?url=')+14)));
		}else if(musicBox.indexOf('http')==0 || musicBox.indexOf('.mp3')==-1){
			$('#new_music_div_ .musictype_link').prop('checked',true);
			$('#new_music_div_ input.link').val(musicBox);
		}else{
			$('#new_music_div_ .musictype_upload').prop('checked',true);
			$('#new_music_div_ input.upload').val(musicBox);			
		}
		$('#new_music_div_').show();
	});
	
	//*****配置音乐
	//点击选择音乐配置类型
	$('#new_music_div_ .click_effect>div.m_type').click(function(e){
		var $srcElement=$(e.srcElement);
		if($srcElement.is('span.tips')||$srcElement.is('span.tips>a')){
			return;
		}
		$(this).find('input[type="radio"]').prop('checked',true);
		$(this).siblings('.m_type').find('input[type="text"]').val('');
		if($(this).index()!=0){
			$('#new_music_div_ .preMusicSelect').val('0');
			$('#preMusic').attr('src','');
			$('#preMusic').get(0).pause();
			$('#new_music_div_ .pBtn.pause').hide();
			$('#new_music_div_ .pBtn.play').show();	
		}
	});
	//选择音乐
	$('#new_music_div_ .preMusicSelect').change(function(){
		$('#new_music_div_ .pBtn.pause').click();
		if($(this).val()=='0'){
			$('#preMusic').attr('src','');
		}else{
			$('#preMusic').attr('src','http://www.weikecj.cn/music.jsp?url='+encodeURIComponent($(this).val()));			
		}
	});
	//试听音乐
	$('#new_music_div_ .pBtn.play').click(function(){
		if($('#preMusic').attr('src')=='') return;
		$('#preMusic').get(0).play();
		$('#new_music_div_ .pBtn.play').hide();
		$('#new_music_div_ .pBtn.pause').show();
	});
	//暂停音乐
	$('#new_music_div_ .pBtn.pause').click(function(){
		$('#preMusic').get(0).pause();
		$('#new_music_div_ .pBtn.pause').hide();
		$('#new_music_div_ .pBtn.play').show();	
	});
	$('#new_music_div_ .btn-success').click(function(){
		var isLink=$('#new_music_div_ .musictype_link').prop('checked');
		var isKu=$('#new_music_div_ .musictype_ku').prop('checked');
		var firstObj=currEditObj[0];
		if(isLink){
			firstObj.musicUrl=$('#new_music_div_ input.link').val();
			$('#musicBox').val(firstObj.musicUrl);			
		}else if(isKu){
			var kuMusic=$('#new_music_div_ .preMusicSelect').val();
			firstObj.musicUrl=kuMusic=='0'?'':window.app.domain+'/music.jsp?url='+encodeURIComponent(kuMusic);
			$('#musicBox').val(firstObj.musicUrl);				
		}else{
			firstObj.musicUrl=$uploadMusicBox.attr('data-url');	
			$('#musicBox').val($uploadMusicBox.val());
		}
		hideSelectMusic();
	});
	
	window.editSetting=function(){
		var firstObj=currEditObj[0];
		var lastObj=currEditObj[currEditObj.length-1];
		$('.content .appname').val(window.app.name);
		$('.content .sharetitle').val(lastObj.title);
		$('.content .sharedesc').val(lastObj.description);
		if(lastObj.logo){
			$('#sharelogo').css('backgroundImage','url('+getUrl(lastObj.logo,PATH_TYPE_IMG)+')').html('');
		}
		$('.content .isMusic').prop('checked',firstObj.isMusic);
		if(firstObj.musicUrl && firstObj.musicUrl.length>0){
			$('.content #musicBox').val(firstObj.musicUrl.indexOf('http')==0?firstObj.musicUrl:firstObj.musicUrl.substring(firstObj.musicUrl.lastIndexOf('/')+1).replace(/-/g,''));		
		}
		if(lastObj.pagescrolltype){
			$('.content .pagescrolltype').val(lastObj.pagescrolltype);
		}
		if(lastObj.pageanimate){
			$('.content .pageanimate').val(lastObj.pageanimate);
		}
		if(lastObj.pageplaytype){
			$('.content .pageplaytype').val(lastObj.pageplaytype);
		}
		$('.content .isAutoPlay').prop('checked',lastObj.isAutoPlay);
		if(lastObj.autoPlayTime!=null && lastObj.autoPlayTime!=undefined){
			initAutoPlayTime(lastObj.autoPlayTime);		
			$('.edit.setting .autoPlayTime').siblings('.val').val(lastObj.autoPlayTime);
		}
//		var loadinglogo=lastObj.loadinglogo?lastObj.loadinglogo:'http://192.168.16.231:8080/weikechangjing/img/7924ed0c-ea4c-4501-8b89-44dbb781c9dc.GIF';
//		$('#loadinglogo').css('backgroundImage','url('+getUrl(loadinglogo,PATH_TYPE_IMG)+')').html('');
		$('#loadinglogo').css('backgroundImage','url('+window.app.basePath+'img/7924ed0c-ea4c-4501-8b89-44dbb781c9dc.GIF)').html('');
		
	}
	
});
</script>
				


<style>
.main .mobile.bg .content p input[type="radio"]{
	vertical-align: -2px;
}
#file_upload2Uploader{
	position: absolute;
	top: 125px;
	opacity:0;
}
</style>

<div class="mobile edit bg"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		编辑背景<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
		<div class="block">
			<p class="title">背景类型：<span class="tips">(可选择图片或颜色背景)</span></p>
			<p style="padding-top:5px;height: 18px;">
				<label style="float:left;"><input type="radio" name="bgtype" id="bgtype_img" checked="checked"> 图片背景</label>
				<label style="float:left;"><input type="radio" name="bgtype" id="bgtype_color" style="margin-left:12px;"> 颜色背景</label>
			</p>
		</div>
		<div class="block bg_img" style="border-bottom:0px;">
			<p class="title">背景图片：<span class="tips">(建议尺寸：640像素x960像素)</span></p>
			<p>
				<div class="wcenter pagebg" title="点击选择图片" id="bgImage" style="height: 300px;line-height: 295px;font-size: 18px;color: #999;">
					<span class="forbitSelect">选择图片</span>
				</div>	
			</p>
		</div>		
		<div class="block bg_color" style="border-bottom:0px;display:none;">
			<p class="title">背景颜色：<span class="tips">(请点击下面色块选择背景颜色)</span></p>
			<p>
				<input type="text" id="bgColor" style="width: 30%;height: 16px;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 113px;top: -35px;"><div style="background-color: #ffffff;"></div></div>
			</p>
		</div>		
	</div>
</div>

<script>

$('.mobile.edit.bg').click(function(){
	$('.translate-back .page-con.j-txtWrap.lazy-img>div .bar',$('#screen')[0].contentWindow.document).hide();
	if(currEditObj.type!='animation'){
		$('.editBackground').click();
	}
});

function editBg(){
	//清空ui
	$('#bgtype_img').prop('checked',true);
	$('.block.bg_img').show();
	$('.block.bg_color').hide();
	$('#bgImage').css('backgroundImage','none');
	$('#bgImage>span').html('选择图片');
	$('#bgColor').val('');
	var initColor='#ffffff';
	//设置ui
	var bg=currEditObj.bg;
	if(bg){
		if(bg.indexOf('#')==0){
			$('#bgtype_color').prop('checked',true);
			$('.block.bg_img').hide();
			$('.block.bg_color').show();
			initColor=bg;
			$('#bgColor').val(initColor);
			$('.main .mobile.bg #colorSelector').css('backgroundImage',initColor);
		}else{
			$('#bgtype_img').prop('checked',true);
			$('.block.bg_img').show();
			$('.block.bg_color').hide();
			$('#bgImage').css('backgroundImage','url('+getUrl(bg)+')');
			$('#bgImage>span').html('');
		}
	}	
	initColorPicker(initColor);
}

var bgColorPicker=null;
function initColorPicker(color){
	$('.main .mobile.bg #colorSelector>div').css('backgroundColor', color);
	if(bgColorPicker!=null){
		bgColorPicker.ColorPickerSetColor(color);
		return;
	}
	bgColorPicker=$('.main .mobile.bg #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.bg #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.bg #bgColor').val(color);
			$('#bgImage').css('backgroundImage','none');
			$('#bgImage>span').html('选择图片');
			$('.translate-back .page-con',$('#screen')[0].contentWindow.document.body).css('backgroundImage','none').css('backgroundColor',color);
			//更新数据
			currEditObj.bg='#' + hex;
		}
	});
}

$(function(){
	
	$('#bgImage').click(function(){
		showSelectImg(function(url){
			//更新ui
			var $bgImage=$('#bgImage');
			$bgImage.find('span').html('');
			$bgImage.css('backgroundImage','url('+getUrl(url)+')');
			$('#bgColor').val('');
			initColorPicker('#ffffff');
			$('.translate-back .page-con',$('#screen')[0].contentWindow.document.body).css('backgroundColor','none').css('backgroundImage','url('+getUrl(url)+')');
			//更新数据
			currEditObj.bg=url;
		});
	});
	
	initColorPicker('#ffffff');
	
	$('.main .mobile.bg #bgtype_img').parent().click(function(){
		$('.main .mobile.bg .bg_color').hide();
		$('.main .mobile.bg .bg_img').show();	
	});
	$('.main .mobile.bg #bgtype_color').parent().click(function(){
		$('.main .mobile.bg .bg_img').hide();
		$('.main .mobile.bg .bg_color').show();
	});
});
</script>
				




<style>
.additem {
	padding: 5px 12px 5px 18px;
}
.additem li {
	display: inline-block;
	width: 80px;
	height: 120px;
	margin: 0 23px 0 10px;
}
.additem .item_mod {
	display: block;
	width: 80px;
	height: 95px;
	position: relative;
	padding-top: 16px;
	cursor: pointer;
	color: #929ba6;
}
.additem .item_mod em {
	display: block;
	width: 80px;
	height: 66px;
	margin: 0 auto;
	overflow: hidden;
	cursor: pointer;
	background: url("http://static.weikecj.cn//weikechangjing/image/edit/additems.png") no-repeat 0 0;
}
.additem .item_mod .mod_name {
	display: block;
	width: 80px;
	height: 28px;
	line-height: 28px;
	overflow: hidden;
	text-align: center;
}
</style>

<div class="mobile edit widget"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		添加控件<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="additem">

		<ul>

			<li><a class="item_mod item_mod_added" href="javascript:;"
				data-add="text" data-name="文本"> <em class="additems-txt" style="background-position: -249px 0;"></em>
					<p class="mod_name">文本</p>
			</a></li>
			<li><a class="item_mod item_mod_added" href="javascript:;"
				data-add="image" data-name="图片"> <em class="additems-pic" style="background-position: -83px 0;"></em>
					<p class="mod_name">图片</p>
			</a></li>
			<li><a class="item_mod item_mod_added" href="javascript:;"
				data-add="button" data-name="按钮"> <em class="additems-tv" style="background-position: -83px -70px;"></em>
					<p class="mod_name">按钮</p>
			</a></li>
			<li><a class="item_mod item_mod_added" href="javascript:;"
				data-add="vedio" data-name="视频"> <em class="additems-tv" style="background-position: -166px 0;"></em>
					<p class="mod_name">视频</p>
			</a></li>
			<li><a class="item_mod item_mod_added" href="javascript:;"
				data-add="book" data-name="预约报名"> <em class="additems-input" style="background-position: -249px -70px;"></em>
					<p class="mod_name">预约报名</p>
			</a></li>
			<li><a class="item_mod item_mod_added" href="javascript:;"
				data-add="message" data-name="留言板"> <em class="additems-qa" style="background-position: 0 -140px;"></em>
					<p class="mod_name">留言板</p>
			</a></li>
			<!-- <li><a class="item_mod item_mod_added" href="javascript:;"
				data-add="iframe" data-name="页面层"> <em class="additems-qa" style="background-position: 0px -70px;"></em>
					<p class="mod_name">页面层</p>
			</a></li> -->
			<li><a class="item_mod item_mod_added" href="javascript:;"
				data-add="mask" data-name="涂抹"> <em class="additems-qa" style="background-position: -83px -350px;"></em>
					<p class="mod_name">涂抹</p>
			</a></li>

		</ul>

	</div>
</div>

<script>
$(function(){
	
	$('.additem .item_mod[data-add="text"]').click(function(){
		
		//添加ui
		var id=new Date().getTime()+''+i+parseInt(Math.random()*10000).toString();
		var $container=$('.bar-container',$('#screen')[0].contentWindow.document);
		var zIndex=$container.length+1;
		
		var htmlAnm='<div id="'+id+'" pos="center::0::0" class="bar-container animationEl a-fadein" style="-webkit-animation-duration:0s;-webkit-animation-delay:0s;animation-duration:0s;animation-delay:0s;touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);left:50%;top:50%;width:180px;height:80px;z-index:'+zIndex+';">';
		htmlAnm+='<div class="rotate" style="width:180px;height:80px;font-size:16px;color:#888888;background-color:transparent;transform: rotate(0deg);-webkit-transform: rotate(0deg);cursor:default;">';
		htmlAnm+='<a style="opacity:1;display:block;width:100%;height:100%;overflow:hidden;">请编辑文本内容</a>';
		htmlAnm+='<div class="bar bar-rotate bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
						'<div class="bar bar-line"></div> '+
						'<div class="bar bar-n" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
						'<div class="bar bar-s" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
						'<div class="bar bar-e" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
						'<div class="bar bar-w" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
						'<div class="bar bar-ne bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
						'<div class="bar bar-nw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
						'<div class="bar bar-se bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
						'<div class="bar bar-sw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>';
		htmlAnm+='</div></div>';
		var currItem=$(htmlAnm);
		$('.m-page .page-con',$('#screen')[0].contentWindow.document).append($(htmlAnm));		
		
		//添加数据
		var newObj={
				elType:'text',
				textContent:'请编辑文本内容',
				textFontsize:16,
				textColor:'#888888',
				delay: "0",
				duration: "0",
				func: "",
				funcContent: "",
				width: 360,
				height: 160,
				initPos: "center",
				offsetX: 0,
				offsetY: 0,
				opacity: 0,
				rotate: "0",
				type: "a-fadein",
				yuanjiao:0,
				zIndex:zIndex
		};
		currEditObj.anm.push(newObj);
		
		//选中
		$('#screen')[0].contentWindow.loadTextAndPos(newObj,id,function(){
			var currItem=$('#'+id,$('#screen')[0].contentWindow.document);
			$('#screen')[0].contentWindow.Bar._initSelfScale(currItem);
			currItem.click();		
		});
		
	});
	
	$('.additem .item_mod[data-add="image"]').click(function(){
		
		//添加ui
		var id=new Date().getTime()+''+i+parseInt(Math.random()*10000).toString();
		var $container=$('.bar-container',$('#screen')[0].contentWindow.document);
		var zIndex=$container.length+1;
		
		var htmlAnm='<div id="'+id+'" pos="center::0::0" class="bar-container animationEl a-fadein" style="-webkit-animation-duration:0s;-webkit-animation-delay:0s;animation-duration:0s;animation-delay:0s;touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);left:0;top:0;width:150px;height:146px;z-index:'+zIndex+';">';
		htmlAnm+='<div class="rotate" style="width:100%;height:100%;transform: rotate(0deg);-webkit-transform: rotate(0deg);">';
		htmlAnm+='<a style="opacity:1;"></a>';
		htmlAnm+='<div class="bar bar-rotate bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-line"></div> '+
							'<div class="bar bar-n" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-s" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-e" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-w" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-ne bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-nw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-se bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-sw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>';
		htmlAnm+='</div></div>';
		var currItem=$(htmlAnm);
		$('.m-page .page-con',$('#screen')[0].contentWindow.document).append($(htmlAnm));		
		
		//添加数据
		var newObj={
				delay: "0",
				duration: "0",
				func: "",
				funcContent: "",
				width: 300,
				height: 292,
				initPos: "center",
				offsetX: 0,
				offsetY: 0,
				opacity: 0,
				rotate: "0",
				src: "/weikechangjing/image/edit/web-add-image.png",
				type: "a-fadein",
				yuanjiao:0,
				zIndex:zIndex
		};
		currEditObj.anm.push(newObj);
		
		//选中
		$('#screen')[0].contentWindow.loadImgAndPos(newObj,id,function(){
			var currItem=$('#'+id,$('#screen')[0].contentWindow.document);
			$('#screen')[0].contentWindow.Bar._initSelfScale(currItem);
			currItem.click();		
		});
		
	});
	
	
	$('.additem .item_mod[data-add="button"]').click(function(){
		
		//添加ui
		var id=new Date().getTime()+''+i+parseInt(Math.random()*10000).toString();
		var $container=$('.bar-container',$('#screen')[0].contentWindow.document);
		var zIndex=$container.length+1;
				
		var htmlAnm='<div id="'+id+'" pos="center::0::0" class="bar-container animationEl a-fadein" style="display:none;-webkit-animation-duration:0s;-webkit-animation-delay:0s;animation-duration:0s;animation-delay:0s;touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);left:50%;top:50%;width:130px;height:35px;z-index:'+zIndex+';">';
		htmlAnm+='<div class="rotate" style="width:130px;height:35px;font-size: 14px;color: #ffffff;background-color: #6FB341;border-radius:5px;-webkit-border-radius:5px;transform: rotate(0deg);-webkit-transform: rotate(0deg);cursor: default;">';
		htmlAnm+='<a style="width:130px;height:35px;text-align: center;display: table-cell;vertical-align: middle;"><span>按钮文本</span></a>';
		htmlAnm+='<div class="bar bar-rotate bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-line"></div> '+
							'<div class="bar bar-n" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-s" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-e" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-w" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-ne bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-nw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-se bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-sw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>';
		htmlAnm+='</div></div>';
		
		var currItem=$(htmlAnm);
		$('.m-page .page-con',$('#screen')[0].contentWindow.document).append($(htmlAnm));		
		
		//添加数据
		var newObj={
				elType:'button',
				btnText:'按钮文本',
				btnColor:'#ffffff',
				btnBgColor:'#6FB341',
				btnFontsize:14,
				delay: "0",
				duration: "0",
				func: "",
				funcContent: "",
				width: 260,
				height: 70,
				initPos: "center",
				offsetX: 0,
				offsetY: 0,
				opacity: 0,
				rotate: "0",
				src: "",
				type: "a-fadein",
				yuanjiao:5,
				zIndex:zIndex
		};
		currEditObj.anm.push(newObj);
		
		//选中
		$('#screen')[0].contentWindow.loadImgAndPos(newObj,id,function(){
			var currItem=$('#'+id,$('#screen')[0].contentWindow.document);
			$('#screen')[0].contentWindow.Bar._initSelfScale(currItem);
			currItem.show();
			currItem.click();		
		});
		
	});
	
	
	$('.additem .item_mod[data-add="vedio"]').click(function(){
		
		//添加ui
		var id=new Date().getTime()+''+i+parseInt(Math.random()*10000).toString();
		var $container=$('.bar-container',$('#screen')[0].contentWindow.document);
		var zIndex=$container.length+1;
				
		var htmlAnm='<div id="'+id+'" pos="center::0::0" class="bar-container animationEl a-slowflag" style="display:none;-webkit-animation-duration:1s;-webkit-animation-delay:0.3s;animation-duration:1s;animation-delay:0.3s;touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);left:50%;top:50%;width:39px;height:39px;z-index:'+zIndex+';">';
		htmlAnm+='<div class="rotate" style="width:39px;height:39px;font-size: 14px;color: #ffffff;background-color: transparent;border-radius:0px;-webkit-border-radius:0px;transform: rotate(0deg);-webkit-transform: rotate(0deg);cursor: default;">';
		htmlAnm+='<a style="width:39px;height:39px;text-align: center;display: table-cell;vertical-align: middle;"><span></span></a>';
		htmlAnm+='<div class="bar bar-rotate bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-line"></div> '+
							'<div class="bar bar-n" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-s" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-e" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-w" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-ne bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-nw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-se bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-sw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>';
		htmlAnm+='</div></div>';
		
		var currItem=$(htmlAnm);
		$('.m-page .page-con',$('#screen')[0].contentWindow.document).append($(htmlAnm));		
		
		//添加数据
		var newObj={
				elType:'vedio',
				vLink:'',
				vCloseColor:'#6FB341',
				btnText:'',
				btnColor:'#ffffff',
				btnBgColor:'',
				btnFontsize:14,
				delay: "0",
				duration: "1",
				func: "vedio",
				funcContent: "",
				width: 78,
				height: 78,
				initPos: "center",
				offsetX: 0,
				offsetY: 0,
				opacity: 0,
				rotate: "0",
				src: "[upload]2015/2/weikecj/1/26997968-34d4-4816-96fb-4ce6e8afc442.png",
				type: "a-slowflag",
				yuanjiao:0,
				zIndex:zIndex
		};
		currEditObj.anm.push(newObj);
		
		//选中
		$('#screen')[0].contentWindow.loadImgAndPos(newObj,id,function(){
			var currItem=$('#'+id,$('#screen')[0].contentWindow.document);
			$('#screen')[0].contentWindow.Bar._initSelfScale(currItem);
			currItem.show();
			currItem.click();		
		});
		
	});
	
	
	$('.additem .item_mod[data-add="book"]').click(function(){
		
		//判断是否已存在预约控件
		var data=window.app.data;
		for(var i=0;i<data.length;i++){
			if(JSON.stringify(data[i]).indexOf('"elType":"book"')!=-1){
				alert('预约控件只允许添加1个（系统检测到您已在第'+(i+1)+'页添加了此控件）');
				return;
			}
		}
		
		//添加ui
		var id=new Date().getTime()+''+i+parseInt(Math.random()*10000).toString();
		var $container=$('.bar-container',$('#screen')[0].contentWindow.document);
		var zIndex=$container.length+1;
				
		var htmlAnm='<div id="'+id+'" pos="center::0::0" class="bar-container animationEl a-fadein" style="display:none;-webkit-animation-duration:0s;-webkit-animation-delay:0s;animation-duration:0s;animation-delay:0s;touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);left:50%;top:50%;width:130px;height:35px;z-index:'+zIndex+';">';
		htmlAnm+='<div class="rotate" style="width:130px;height:35px;font-size: 14px;color: #ffffff;background-color: #6FB341;border-radius:5px;-webkit-border-radius:5px;transform: rotate(0deg);-webkit-transform: rotate(0deg);cursor: default;">';
		htmlAnm+='<a style="width:130px;height:35px;text-align: center;display: table-cell;vertical-align: middle;"><span>立即预约</span></a>';
		htmlAnm+='<div class="bar bar-rotate bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-line"></div> '+
							'<div class="bar bar-n" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-s" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-e" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-w" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-ne bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-nw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-se bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-sw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>';
		htmlAnm+='</div></div>';
		
		var currItem=$(htmlAnm);
		$('.m-page .page-con',$('#screen')[0].contentWindow.document).append($(htmlAnm));		
		
		//添加数据
		var newObj={
				elType:'book',
				bookBtnText:'立即提交',
				bookTitle:'预约参与',
				bookColor:'#6FB341',
				bookData:[{
					"type":"text",
					"name":"name",
					"text":"姓名",
					"placeholder":"请输入姓名",
					"isShow":true,
					"isMust":true
				},{
					"type":"text",
					"name":"tel",
					"text":"手机",
					"placeholder":"请输入手机",
					"isShow":true,
					"isMust":true
				},{
					"type":"text",
					"name":"text1",
					"text":"公司",
					"placeholder":"请输入公司",
					"isShow":true,
					"isMust":false
				},{
					"type":"text",
					"name":"text2",
					"text":"职位",
					"placeholder":"请输入职位",
					"isShow":true,
					"isMust":false
				},{
					"type":"select",
					"name":"select1",
					"text":"",
					"placeholder":"",
					"isShow":false,
					"isMust":false
				},{
					"type":"select",
					"name":"select2",
					"text":"",
					"placeholder":"",
					"isShow":false,
					"isMust":false
				},{
					"type":"text",
					"name":"text3",
					"text":"",
					"placeholder":"",
					"isShow":false,
					"isMust":false
				},{
					"type":"text",
					"name":"text4",
					"text":"",
					"placeholder":"",
					"isShow":false,
					"isMust":false
				},{
					"type":"date",
					"name":"time1",
					"text":"",
					"placeholder":"",
					"isShow":false,
					"isMust":false
				}],
				btnText:'立即预约',
				btnColor:'#ffffff',
				btnBgColor:'#6FB341',
				btnFontsize:14,
				delay: "0",
				duration: "0",
				func: "book",
				funcContent: "",
				width: 260,
				height: 70,
				initPos: "center",
				offsetX: 0,
				offsetY: 0,
				opacity: 0,
				rotate: "0",
				src: "",
				type: "a-fadein",
				yuanjiao:5,
				zIndex:zIndex
		};
		currEditObj.anm.push(newObj);
		
		//选中
		$('#screen')[0].contentWindow.loadImgAndPos(newObj,id,function(){
			var currItem=$('#'+id,$('#screen')[0].contentWindow.document);
			$('#screen')[0].contentWindow.Bar._initSelfScale(currItem);
			currItem.show();
			currItem.click();		
		});
		
	});
	
	
	$('.additem .item_mod[data-add="message"]').click(function(){
		
		//判断是否已存在留言控件
		var data=window.app.data;
		for(var i=0;i<data.length;i++){
			if(JSON.stringify(data[i]).indexOf('"elType":"message"')!=-1){
				alert('留言控件只允许添加1个（系统检测到您已在第'+(i+1)+'页添加了此控件）');
				return;
			}
		}
		
		//添加ui
		var id=new Date().getTime()+''+i+parseInt(Math.random()*10000).toString();
		var $container=$('.bar-container',$('#screen')[0].contentWindow.document);
		var zIndex=$container.length+1;
				
		var htmlAnm='<div id="'+id+'" pos="center::0::0" class="bar-container animationEl a-fadein" style="display:none;-webkit-animation-duration:0s;-webkit-animation-delay:0s;animation-duration:0s;animation-delay:0s;touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);left:50%;top:50%;width:130px;height:35px;z-index:'+zIndex+';">';
		htmlAnm+='<div class="rotate" style="width:130px;height:35px;font-size: 14px;color: #ffffff;background-color: #6FB341;border-radius:5px;-webkit-border-radius:5px;transform: rotate(0deg);-webkit-transform: rotate(0deg);cursor: default;">';
		htmlAnm+='<a style="width:130px;height:35px;text-align: center;display: table-cell;vertical-align: middle;"><span>留言板</span></a>';
		htmlAnm+='<div class="bar bar-rotate bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-line"></div> '+
							'<div class="bar bar-n" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-s" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-e" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-w" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-ne bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-nw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-se bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-sw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>';
		htmlAnm+='</div></div>';
		
		var currItem=$(htmlAnm);
		$('.m-page .page-con',$('#screen')[0].contentWindow.document).append($(htmlAnm));		
		
		//添加数据
		var newObj={
				elType:'message',
				messageContentTip:'请留下您想说的话',
				messageNameTip:'请留下您的姓名',
				messageColor:'#6FB341',
				messageTitle:'留言墙',
				btnText:'留言板',
				btnColor:'#ffffff',
				btnBgColor:'#6FB341',
				btnFontsize:14,
				delay: "0",
				duration: "0",
				func: "message",
				funcContent: "",
				width: 260,
				height: 70,
				initPos: "center",
				offsetX: 0,
				offsetY: 0,
				opacity: 0,
				rotate: "0",
				src: "",
				type: "a-fadein",
				yuanjiao:5,
				zIndex:zIndex
		};
		currEditObj.anm.push(newObj);
		
		//选中
		$('#screen')[0].contentWindow.loadImgAndPos(newObj,id,function(){
			var currItem=$('#'+id,$('#screen')[0].contentWindow.document);
			$('#screen')[0].contentWindow.Bar._initSelfScale(currItem);
			currItem.show();
			currItem.click();		
		});
		
	});
	
	$('.additem .item_mod[data-add="mask"]').click(function(){
		
		//判断是否已存在涂抹控件
		var data=window.app.data;
		for(var i=0;i<data.length;i++){
			if(JSON.stringify(data[i]).indexOf('"elType":"mask"')!=-1){
				alert('涂抹控件只允许添加1个');
				return;
			}
		}
	
		//添加ui
		var id=new Date().getTime()+''+i+parseInt(Math.random()*10000).toString();
		var $container=$('.bar-container',$('#screen')[0].contentWindow.document);
		var zIndex=$container.length+1;
				
		var htmlAnm='<div id="'+id+'" pos="rightBottom::0::0" class="bar-container animationEl a-fadein" style="display:none;-webkit-animation-duration:0s;-webkit-animation-delay:0s;animation-duration:0s;animation-delay:0s;touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);right:0;bottom:0;width:72px;height:22px;z-index:'+zIndex+';">';
		htmlAnm+='<div class="rotate" style="width:72px;height:22px;font-size: 12px;color: #858585;background-color: #d6d6d6;border-radius:0px;-webkit-border-radius:0px;transform: rotate(0deg);-webkit-transform: rotate(0deg);cursor: default;">';
		htmlAnm+='<a style="width:72px;height:22px;text-align: center;display: table-cell;vertical-align: middle;"><span>涂抹控件</span></a>';
		htmlAnm+='<div class="bar bar-n" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-s" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-e" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-w" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> ';
		htmlAnm+='</div></div>';
		
		var currItem=$(htmlAnm);
		$('.m-page .page-con',$('#screen')[0].contentWindow.document).append($(htmlAnm));		
		
		//添加数据
		var newObj={
				elType:'mask',
				bg:'',
				percent:30,
				btnText:'涂抹控件',
				btnColor:'#858585',
				btnBgColor:'#d6d6d6',
				btnFontsize:12,
				delay: "0",
				duration: "0",
				func: "iframe",
				funcContent: "",
				width: 144,
				height: 44,
				initPos: "rightBottom",
				offsetX: 0,
				offsetY: 0,
				opacity: 0,
				rotate: "0",
				src: "",
				type: "a-fadein",
				yuanjiao:0,
				zIndex:zIndex
		};
		currEditObj.anm.push(newObj);
		
		//选中
		$('#screen')[0].contentWindow.loadImgAndPos(newObj,id,function(){
			var currItem=$('#'+id,$('#screen')[0].contentWindow.document);
			$('#screen')[0].contentWindow.Bar._initSelfScale(currItem);
			currItem.show();
			currItem.click();		
		});
		
	});
	
	$('.additem .item_mod[data-add="iframe"]').click(function(){
	
		//添加ui
		var id=new Date().getTime()+''+i+parseInt(Math.random()*10000).toString();
		var $container=$('.bar-container',$('#screen')[0].contentWindow.document);
		var zIndex=$container.length+1;
				
		var htmlAnm='<div id="'+id+'" pos="center::0::0" class="bar-container animationEl a-fadein" style="display:none;-webkit-animation-duration:0s;-webkit-animation-delay:0s;animation-duration:0s;animation-delay:0s;touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);left:50%;top:50%;width:130px;height:35px;z-index:'+zIndex+';">';
		htmlAnm+='<div class="rotate" style="width:130px;height:35px;font-size: 14px;color: #ffffff;background-color: #6FB341;border-radius:5px;-webkit-border-radius:5px;transform: rotate(0deg);-webkit-transform: rotate(0deg);cursor: default;">';
		htmlAnm+='<a style="width:130px;height:35px;text-align: center;display: table-cell;vertical-align: middle;"><span>页面层</span></a>';
		htmlAnm+='<div class="bar bar-rotate bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-line"></div> '+
							'<div class="bar bar-n" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-s" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-e" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-w" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-ne bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-nw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-se bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div> '+
							'<div class="bar bar-sw bar-radius" style="touch-action: pan-x pan-y; -webkit-user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>';
		htmlAnm+='</div></div>';
		
		var currItem=$(htmlAnm);
		$('.m-page .page-con',$('#screen')[0].contentWindow.document).append($(htmlAnm));		
		
		//添加数据
		var newObj={
				elType:'iframe',
				pLink:'',
				pColor:'#6FB341',
				pTitle:'页面层',
				btnText:'页面层',
				btnColor:'#ffffff',
				btnBgColor:'#6FB341',
				btnFontsize:14,
				delay: "0",
				duration: "0",
				func: "iframe",
				funcContent: "",
				width: 260,
				height: 70,
				initPos: "center",
				offsetX: 0,
				offsetY: 0,
				opacity: 0,
				rotate: "0",
				src: "",
				type: "a-fadein",
				yuanjiao:5,
				zIndex:zIndex
		};
		currEditObj.anm.push(newObj);
		
		//选中
		$('#screen')[0].contentWindow.loadImgAndPos(newObj,id,function(){
			var currItem=$('#'+id,$('#screen')[0].contentWindow.document);
			$('#screen')[0].contentWindow.Bar._initSelfScale(currItem);
			currItem.show();
			currItem.click();		
		});
		
	});

	
});
</script>
				


<style>

.ke-container{
	width:320px!important;
}
</style>

<div class="mobile edit text"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		文本控件<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
		<div class="block widget_text">
			<p class="title">文本：<span class="tips">(请选中文本后再设置样式)</span></p>
			<div style="margin-top: 12px;">
				<textarea class="textContent"></textarea>
			</div>
			<div>
				<span class="ltitle">字体大小：</span>
				<select class="text-fontSize-menu textFontsize" style="width: 150px;padding-left:10px!important;margin-left:10px;background:white;">
					<option value="12">12px</option>
					<option value="13">13px</option>
					<option value="14">14px</option>
					<option value="16">16px</option>
					<option value="18">18px</option>
					<option value="24">24px</option>
					<option value="32">32px</option>
					<option value="48">48px</option>
				</select>
			</div>
			<div>
				<span class="ltitle">字体颜色：</span>
				<input type="text" class="val textColor" style="width: 30%;background: white;" readonly="readonly">
				<div id="colorSelector" style="left: 191px;"><div style="background-color: #ffffff;"></div></div>
			</div>
		</div>	
		<div class="block minSetting widget_animation">
			<p class="title" style="margin-top:3px;">动画效果：<span class="tips">(修改后需要重载页面才可以看到效果)</span></p>
			<div>
				<span class="ltitle" style="margin-top:6px;">动画类型：</span>
				<select class="widgetSelect anmType">
					<optgroup label="淡入效果">
						<option value="a-fadein">淡入</option>
						<option value="a-fadeinL">从左淡入</option>
						<option value="a-fadeinR">从右淡入</option>
						<option value="a-fadeinT">从上淡入</option>
						<option value="a-fadeinB">从下淡入</option>
					</optgroup>
					<optgroup label="弹入效果">
						<option value="a-bouncein">弹入</option>
						<option value="a-bounceinL">从左弹入</option>
						<option value="a-bounceinR">从右弹入</option>
						<option value="a-bounceinT">从上弹入</option>
						<option value="a-bounceinB">从下弹入</option>
					</optgroup>
					<optgroup label="转入效果">
						<option value="a-rotatein">转入</option>
						<option value="a-rotateinLT">从左上转入</option>
						<option value="a-rotateinLB">从左下转入</option>
						<option value="a-rotateinRT">从右上转入</option>
						<option value="a-rotateinRB">从右下转入</option>
					</optgroup>
					<optgroup label="翻入效果">
						<option value="a-flipinX">水平翻入</option>
						<option value="a-flipinY">垂直翻入</option>
						<option value="a-flipinZ">3D翻入</option>
					</optgroup>
					<optgroup label="强调效果">
						<option value="a-seal">印章</option>
						<option value="a-flash">闪烁</option>
						<option value="a-shake">震颤</option>
						<option value="a-ring">抖动</option>
						<option value="a-wobble">摇晃</option>
						<option value="a-swing">悬摆</option>
						<option value="a-light">光速</option>
						<option value="a-slide">展开</option>
					</optgroup>
					<optgroup label="持续效果">
						<option value="a-rotateR">顺时针旋转</option>
						<option value="a-rotateL">逆时针旋转</option>
						<option value="a-slowshake">持续摇摆</option>
						<option value="a-slowflag">持续标记</option>
					</optgroup>	
					<!-- <optgroup label="滚动消失效果">
						<option value="a-rollT">向上滚动</option>
						<option value="a-rollR">向右滚动</option>
						<option value="a-rollB">向下滚动</option>
						<option value="a-rollL">向左滚动</option>
					</optgroup> -->
				</select>
			</div>
			<div>
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider durationTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div>
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider delayTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<!-- 退出动画 -->
			<p style="margin: 16px 0px;margin-bottom: -3px;">
				<input type="checkbox" class="isDisappearAnm" style="width: 20px; width: 13px; height: 13px; vertical-align: -2px; margin-left: 1px;">
				开启退出动画
			</p>
  			<div class="disappearAnm">
				<span class="ltitle" style="margin-top:6px;">退出动画类型：</span>
				<select class="widgetSelect disappearAnmType">
					<optgroup label="淡出效果">
						<option value="a-fadeout">淡出</option>
						<option value="a-fadeoutL">从左淡出</option>
						<option value="a-fadeoutR">从右淡出</option>
						<option value="a-fadeoutT">从上淡出</option>
						<option value="a-fadeoutB">从下淡出</option>
					</optgroup>
					<optgroup label="弹出效果">
						<option value="a-bounceout">弹出</option>
						<option value="a-bounceoutL">从左弹出</option>
						<option value="a-bounceoutR">从右弹出</option>
						<option value="a-bounceoutT">从上弹出</option>
						<option value="a-bounceoutB">从下弹出</option>
					</optgroup>
					<optgroup label="转出效果">
						<option value="a-rotateout">转出</option>
						<option value="a-rotateoutLT">从左上转出</option>
						<option value="a-rotateoutLB">从左下转出</option>
						<option value="a-rotateoutRT">从右上转出</option>
						<option value="a-rotateoutBR">从右下转出</option>
					</optgroup>
					<optgroup label="翻出效果">
						<option value="a-flipoutX">水平翻出</option>
						<option value="a-flipoutY">垂直翻出</option>
					</optgroup>
				</select>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider disappearDurationTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider disappearDelayTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<!-- 退出动画END -->
		</div>	
		<div class="block minSetting widget_style" style="border-bottom:0px;">
			<p class="title" style="margin-top:3px;">样式效果：</p>
			<div>
				<span class="ltitle">透明度：</span>
				<div class="weikeSlider opacity" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">%</span>
			</div>
		</div>
		<div class="block minSetting widget_style" style="border-bottom:0px;padding-right:13px;">
			<p class="title" style="margin-top:3px;">高级设置：<span class="tips">(初始定位用于设置控件基于哪种对齐方式定位)</span></p>
			<div>
				<span class="ltitle" style="margin-top: 5px;">控件初始定位：</span>
				<select class="initpos" style=" padding-left: 10px!important;">   
				   <option value="top">上</option>   
				   <option value="bottom">下</option>   
				   <option value="left">左</option>   
				   <option value="right">右</option>   
				   <option value="center" selected="selected">居中</option>   
				   <option value="leftTop">左上</option>   
				   <option value="leftBottom">左下</option>   
				   <option value="rightTop">右上</option>   
				   <option value="rightBottom">右下</option>   
				</select>
			</div>
		</div>
	</div>
</div>

<script>

var textColorPicker=null;
function initTextColorPicker(color){
	$('.main .mobile.text .widget_text #colorSelector>div').css('backgroundColor', color);
	if(textColorPicker!=null){
		textColorPicker.ColorPickerSetColor(color);
		return;
	}
	textColorPicker=$('.main .mobile.text .widget_text #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.text .widget_text #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.text .widget_text .textColor').val(color);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('color',color);
			//更新数据
			currEditObj.textColor=color;
		}
	});
}

var textEleditor;
$(function(){
	
	function getContent(str){
		str = str.replace(/&/g, "&amp;");
		str = str.replace(/</g, "&lt;");
		str = str.replace(/>/g, "&gt;");
		str = str.replace(/"/g, "&quot;");
		str = str.replace(/'/g, "&squo;");
		str = str.replace(/\r\n/g, "");
		str = str.replace(/\r/g, "");
		str = str.replace(/\n/g, "");
		return str;
	}
	
	function parseContent(str){
		str = str.replace(/&amp;/g, "&");
		str = str.replace(/&lt;/g, "<");
		str = str.replace(/&gt;/g, ">");
		str = str.replace(/&quot;/g, '"');
		str = str.replace(/&squo;/g, "'");
		return str;
	}
	
	var isEditVal=false;
	var editor=null;
	
	KindEditor.ready(function(K) {
	
		textEleditor=editor = K.create($('.edit.text .textContent').get(0), {
			items:['fontname','bold','italic', 'underline', 'strikethrough','lineheight', 'removeformat','|','justifyleft', 'justifycenter', 'justifyright','justifyfull'],
			width:'320px',
			height:'120px',
			resizeType:0,
			afterChange:function(){
				try{
					//如果选中的不是文本，则return
					if(currEditObj.elType!='text'){
						return;
					}
					if(!isEditVal){
						currEditObj.textContent=getContent(editor.html());
						$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a').html(editor.html());	
					}else{
						isEditVal=false;
					}	
				}catch(e){
					//do nothing
				}
			}
		});
		
		var durationTime,delayTime,opacity;
		
		function initDurationTime(val){
			durationTime=$('.edit.text .widget_animation .durationTime').slider({
				range: "min",
				value: val,
				min: 0,
				max: 10.1,
				step: 0.1,
				slide: function( event, ui ) {
			        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
			      	//更新数据
			        currEditObj.duration=ui.value;
				}
			});
		}
		
		function initDelayTime(val){
			delayTime=$('.edit.text .widget_animation .delayTime').slider({
				range: "min",
				value: val,
				min: 0,
				max: 10.1,
				step: 0.1,
				slide: function( event, ui ) {
			        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
			      	//更新数据
			        currEditObj.delay=ui.value;
				}
			});
		}
		
		function initOpacity(val){
			opacity=$('.edit.text .widget_style .opacity').slider({
				range: "min",
				value: val,
				min: 0,
				max: 100,
				step: 1,
				slide: function( event, ui ) {
			        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
			      	//更新数据
			        currEditObj.opacity=ui.value;
					//更新ui
					var num=1-parseFloat(ui.value)/100;
					$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a').css('opacity',num);
				}
			});
		}
		
		//退出动画
		var disappearDurationTime,disappearDelayTime;
		function initDisappearDurationTime(val){
			disappearDurationTime=$('.edit.text .widget_animation .disappearDurationTime').slider({
				range: "min",
				value: val,
				min: 0,
				max: 10.1,
				step: 0.1,
				slide: function( event, ui ) {
			        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
			      	//更新数据
			        currEditObj.disappearDuration=ui.value;
				}
			});
		}	
		function initDisappearDelayTime(val){
			disappearDelayTime=$('.edit.text .widget_animation .disappearDelayTime').slider({
				range: "min",
				value: val,
				min: 0,
				max: 10.1,
				step: 0.1,
				slide: function( event, ui ) {
			        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
			      	//更新数据
			        currEditObj.disappearDelay=ui.value;
				}
			});
		}
		
		function initOther(){
			$('.edit.text .textFontsize').change(function(){
				currEditObj.textFontsize=$(this).val();
				$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('font-size',$(this).val()+'px');
			});			
			$('.edit.text .widget_animation .anmType').change(function(){
				var val=$(this).val();
				//更新数据
		        currEditObj.type=val;
			});
			$('.edit.text .widget_animation .durationTime').siblings('.val').blur(function(){
				var val=$(this).val();
				if(!isNaN(val)){
					var num=parseFloat(val).toFixed(1);
					if(num==parseInt(num)){
						num=parseInt(num);
					}
					if(num>=0 && num<=10){
						$(this).val(num);
						durationTime.slider('value',num);		
						//更新数据
				        currEditObj.duration=num;
					}else{
						$(this).val(durationTime.slider('value'));
					}
				}else{
					$(this).val(durationTime.slider('value'));
				}
			});
			$('.edit.text .widget_animation .delayTime').siblings('.val').blur(function(){
				var val=$(this).val();
				if(!isNaN(val)){
					var num=parseFloat(val).toFixed(1);
					if(num==parseInt(num)){
						num=parseInt(num);
					}
					if(num>=0 && num<=10){
						$(this).val(num);
						delayTime.slider('value',num);		
						//更新数据
				        currEditObj.delay=num;
					}else{
						$(this).val(delayTime.slider('value'));
					}
				}else{
					$(this).val(delayTime.slider('value'));
				}
			});
			//退出动画
			$('.edit.text .isDisappearAnm').change(function(){
				var val=$(this).prop('checked');
				var disappearAnmEl=$(this).parent().siblings('.disappearAnm');
				currEditObj.isDisappear=val;
				if(val){
					$(this).parent().css('marginBottom','-4px');
					disappearAnmEl.show();
				}else{
					$(this).parent().css('marginBottom','5px');
					disappearAnmEl.hide();				
				}
			});	
			$('.edit.text .widget_animation .disappearAnmType').change(function(){
				var val=$(this).val();
				//更新数据
		        currEditObj.disappearType=val;
			});
			$('.edit.text .widget_animation .disappearDurationTime').siblings('.val').blur(function(){
				var val=$(this).val();
				if(!isNaN(val)){
					var num=parseFloat(val).toFixed(1);
					if(num==parseInt(num)){
						num=parseInt(num);
					}
					if(num>=0 && num<=10){
						$(this).val(num);
						disappearDurationTime.slider('value',num);		
						//更新数据
				        currEditObj.disappearDuration=num;
					}else{
						$(this).val(disappearDurationTime.slider('value'));
					}
				}else{
					$(this).val(disappearDurationTime.slider('value'));
				}
			});
			$('.edit.text .widget_animation .disappearDelayTime').siblings('.val').blur(function(){
				var val=$(this).val();
				if(!isNaN(val)){
					var num=parseFloat(val).toFixed(1);
					if(num==parseInt(num)){
						num=parseInt(num);
					}
					if(num>=0 && num<=10){
						$(this).val(num);
						disappearDelayTime.slider('value',num);		
						//更新数据
				        currEditObj.disappearDelay=num;
					}else{
						$(this).val(disappearDelayTime.slider('value'));
					}
				}else{
					$(this).val(disappearDelayTime.slider('value'));
				}
			});	
			$('.edit.text .widget_style .opacity').siblings('.val').blur(function(){
				var num=$(this).val();
				if(!isNaN(num)){
					num=parseInt(num);
					if(num>=0 && num<=100){
						$(this).val(num);
						opacity.slider('value',num);		
						//更新数据
				        currEditObj.opacity=num;
						//更新ui
						num=1-parseFloat(num)/100;
						$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a').css('opacity',num);
					}else{
						$(this).val(opacity.slider('value'));
					}
				}else{
					$(this).val(opacity.slider('value'));
				}
			});
		}
		
		initDurationTime(0);
		initDelayTime(0);
		initDisappearDurationTime(0);
		initDisappearDelayTime(0);
		initOpacity(0);
		initOther();
		
		window.editText=function(){
			
			isEditVal=true;
			editor.html(parseContent(currEditObj.textContent));
			$('.edit.text .textFontsize').val(currEditObj.textFontsize);
			if(currEditObj.textColor){
				$('.main .mobile.text .widget_text #colorSelector>div').css('backgroundColor', currEditObj.textColor);
				$('.main .mobile.text .widget_text .textColor').val(currEditObj.textColor);
				initTextColorPicker(currEditObj.textColor);
			}else{
				$('.main .mobile.text .widget_text #colorSelector>div').css('backgroundColor', '#888888');
				$('.main .mobile.text .widget_text .textColor').val('#888888');
				initTextColorPicker('#888888');
			}
			
			if(currEditObj.type){
				$('.edit.text .widget_animation .anmType').val(currEditObj.type);
			}
			if(currEditObj.duration!=null && currEditObj.duration!=undefined){
				initDurationTime(currEditObj.duration);		
				$('.edit.text .widget_animation .durationTime').siblings('.val').val(currEditObj.duration);
			}
			if(currEditObj.delay!=null && currEditObj.delay!=undefined){
				initDelayTime(currEditObj.delay);		
				$('.edit.text .widget_animation .delayTime').siblings('.val').val(currEditObj.delay);	
			}
			//退出动画
			if(currEditObj.isDisappear){
				$('.edit.text .widget_animation .isDisappearAnm').prop('checked',true);
				$('.edit.text .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').show();
			}else{
				$('.edit.text .widget_animation .isDisappearAnm').prop('checked',false);	
				$('.edit.text .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').hide();		
			}
			if(currEditObj.disappearType){
				$('.edit.text .widget_animation .disappearAnmType').val(currEditObj.disappearType);
			}else{
				$('.edit.text .widget_animation .disappearAnmType').val('a-fadeout');
			}
			if(currEditObj.disappearDuration!=null && currEditObj.disappearDuration!=undefined){
				initDisappearDurationTime(currEditObj.disappearDuration);		
				$('.edit.text .widget_animation .disappearDurationTime').siblings('.val').val(currEditObj.disappearDuration);
			}else{
				initDisappearDurationTime(0);		
				$('.edit.text .widget_animation .disappearDurationTime').siblings('.val').val(0);
			}
			if(currEditObj.disappearDelay!=null && currEditObj.disappearDelay!=undefined){
				initDisappearDelayTime(currEditObj.disappearDelay);		
				$('.edit.text .widget_animation .disappearDelayTime').siblings('.val').val(currEditObj.disappearDelay);	
			}else{
				initDisappearDelayTime(0);		
				$('.edit.text .widget_animation .disappearDelayTime').siblings('.val').val(0);	
			}
			if(currEditObj.opacity!=null && currEditObj.opacity!=undefined){
				initOpacity(currEditObj.opacity);	
				$('.edit.text .widget_style .opacity').siblings('.val').val(currEditObj.opacity);			
			}
			if(currEditObj.initPos){
				$('.edit.text select.initpos').val(currEditObj.initPos);
			}
		}
		
	});
	
});

</script>
				


<div class="mobile edit image"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		图片控件<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
		<div class="block widget_img">
			<p class="title">图片：<span class="tips">(请点击上传)</span></p>
			<p>
				<div class="wcenter pageimage" title="点击选择图片" id="widgetImage" style="height: 120px;line-height: 120px;font-size: 18px;color: #999;">
					<span class="forbitSelect">选择图片</span>
				</div>	
			</p>
		</div>	
		<div class="block minSetting widget_animation">
			<p class="title" style="margin-top:3px;">动画效果：<span class="tips">(修改后需要重载页面才可以看到效果)</span></p>
			<div>
				<span class="ltitle" style="margin-top:6px;">动画类型：</span>
				<select class="widgetSelect anmType">
					<optgroup label="淡入效果">
						<option value="a-fadein">淡入</option>
						<option value="a-fadeinL">从左淡入</option>
						<option value="a-fadeinR">从右淡入</option>
						<option value="a-fadeinT">从上淡入</option>
						<option value="a-fadeinB">从下淡入</option>
					</optgroup>
					<optgroup label="弹入效果">
						<option value="a-bouncein">弹入</option>
						<option value="a-bounceinL">从左弹入</option>
						<option value="a-bounceinR">从右弹入</option>
						<option value="a-bounceinT">从上弹入</option>
						<option value="a-bounceinB">从下弹入</option>
					</optgroup>
					<optgroup label="转入效果">
						<option value="a-rotatein">转入</option>
						<option value="a-rotateinLT">从左上转入</option>
						<option value="a-rotateinLB">从左下转入</option>
						<option value="a-rotateinRT">从右上转入</option>
						<option value="a-rotateinRB">从右下转入</option>
					</optgroup>
					<optgroup label="翻入效果">
						<option value="a-flipinX">水平翻入</option>
						<option value="a-flipinY">垂直翻入</option>
						<option value="a-flipinZ">3D翻入</option>
					</optgroup>
					<optgroup label="强调效果">
						<option value="a-seal">印章</option>
						<option value="a-flash">闪烁</option>
						<option value="a-shake">震颤</option>
						<option value="a-ring">抖动</option>
						<option value="a-wobble">摇晃</option>
						<option value="a-swing">悬摆</option>
						<option value="a-light">光速</option>
						<option value="a-slide">展开</option>
					</optgroup>
					<optgroup label="持续效果">
						<option value="a-rotateR">顺时针旋转</option>
						<option value="a-rotateL">逆时针旋转</option>
						<option value="a-slowshake">持续摇摆</option>
						<option value="a-slowflag">持续标记</option>
					</optgroup>	
					<!-- <optgroup label="滚动消失效果">
						<option value="a-rollT">向上滚动</option>
						<option value="a-rollR">向右滚动</option>
						<option value="a-rollB">向下滚动</option>
						<option value="a-rollL">向左滚动</option>
					</optgroup> -->
				</select>
			</div>
			<div>
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider durationTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div>
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider delayTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<!-- 退出动画 -->
			<p style="margin: 16px 0px;margin-bottom: -3px;">
				<input type="checkbox" class="isDisappearAnm" style="width: 20px; width: 13px; height: 13px; vertical-align: -2px; margin-left: 1px;">
				开启退出动画
			</p>
  			<div class="disappearAnm">
				<span class="ltitle" style="margin-top:6px;">退出动画类型：</span>
				<select class="widgetSelect disappearAnmType">
					<optgroup label="淡出效果">
						<option value="a-fadeout">淡出</option>
						<option value="a-fadeoutL">从左淡出</option>
						<option value="a-fadeoutR">从右淡出</option>
						<option value="a-fadeoutT">从上淡出</option>
						<option value="a-fadeoutB">从下淡出</option>
					</optgroup>
					<optgroup label="弹出效果">
						<option value="a-bounceout">弹出</option>
						<option value="a-bounceoutL">从左弹出</option>
						<option value="a-bounceoutR">从右弹出</option>
						<option value="a-bounceoutT">从上弹出</option>
						<option value="a-bounceoutB">从下弹出</option>
					</optgroup>
					<optgroup label="转出效果">
						<option value="a-rotateout">转出</option>
						<option value="a-rotateoutLT">从左上转出</option>
						<option value="a-rotateoutLB">从左下转出</option>
						<option value="a-rotateoutRT">从右上转出</option>
						<option value="a-rotateoutBR">从右下转出</option>
					</optgroup>
					<optgroup label="翻出效果">
						<option value="a-flipoutX">水平翻出</option>
						<option value="a-flipoutY">垂直翻出</option>
					</optgroup>
				</select>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider disappearDurationTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider disappearDelayTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<!-- 退出动画END -->
		</div>	
		<div class="block minSetting widget_style" style="border-bottom:0px;">
			<p class="title" style="margin-top:3px;">样式效果：</p>
			<div>
				<span class="ltitle">透明度：</span>
				<div class="weikeSlider opacity" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">%</span>
			</div>
			<div>
				<span class="ltitle">圆角：</span>
				<div class="weikeSlider yuanjiao" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">px</span>
			</div>
		</div>
		<div class="block minSetting widget_style" style="border-bottom:0px;padding-right:13px;">
			<p class="title" style="margin-top:3px;">高级设置：<span class="tips">(初始定位用于设置控件基于哪种对齐方式定位)</span></p>
			<div>
				<span class="ltitle" style="margin-top: 5px;">控件初始定位：</span>
				<select class="initpos" style=" padding-left: 10px!important;">   
				   <option value="top">上</option>   
				   <option value="bottom">下</option>   
				   <option value="left">左</option>   
				   <option value="right">右</option>   
				   <option value="center" selected="selected">居中</option>   
				   <option value="leftTop">左上</option>   
				   <option value="leftBottom">左下</option>   
				   <option value="rightTop">右上</option>   
				   <option value="rightBottom">右下</option>   
				</select>
			</div>
		</div>
	</div>
</div>

<script>

$(function(){
	
	$('#widgetImage').click(function(){
		showSelectImg(function(url){
			//更新ui
			var $widgetImage=$('#widgetImage');
			$widgetImage.find('span').html('');
			$widgetImage.css('backgroundImage','url('+getUrl(url)+')');
			//更新图片
			var currEl=$('#screen')[0].contentWindow.Bar.currEl
			currEl.find('.rotate>a>img').attr('src',getUrl(url));
			currEditObj.width=currEl.width()*2;
			currEditObj.height=currEl.height()*2;
			//更新数据
			currEditObj.src=url;
		});
	});	
	
	var durationTime,delayTime,opacity,yuanjiao;
	
	function initDurationTime(val){
		durationTime=$('.edit.image .widget_animation .durationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.duration=ui.value;
			}
		});
	}
	
	function initDelayTime(val){
		delayTime=$('.edit.image .widget_animation .delayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.delay=ui.value;
			}
		});
	}
	
	function initOpacity(val){
		opacity=$('.edit.image .widget_style .opacity').slider({
			range: "min",
			value: val,
			min: 0,
			max: 100,
			step: 1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.opacity=ui.value;
				//更新ui
				var num=1-parseFloat(ui.value)/100;
				$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a').css('opacity',num);
			}
		});
	}
	
	function initYuanjiao(val){
		yuanjiao=$('.edit.image .widget_style .yuanjiao').slider({
			range: "min",
			value: val,
			min: 0,
			max: 320,
			step: 1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.yuanjiao=ui.value;//更新ui
				var num=ui.value;
				$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
			}
		});
	}	

	//退出动画
	var disappearDurationTime,disappearDelayTime;
	function initDisappearDurationTime(val){
		disappearDurationTime=$('.edit.image .widget_animation .disappearDurationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDuration=ui.value;
			}
		});
	}	
	function initDisappearDelayTime(val){
		disappearDelayTime=$('.edit.image .widget_animation .disappearDelayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDelay=ui.value;
			}
		});
	}
	
	function initOther(){
		$('.edit.image .widget_animation .anmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.type=val;
		});
		$('.edit.image .widget_animation .durationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					durationTime.slider('value',num);		
					//更新数据
			        currEditObj.duration=num;
				}else{
					$(this).val(durationTime.slider('value'));
				}
			}else{
				$(this).val(durationTime.slider('value'));
			}
		});
		$('.edit.image .widget_animation .delayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					delayTime.slider('value',num);		
					//更新数据
			        currEditObj.delay=num;
				}else{
					$(this).val(delayTime.slider('value'));
				}
			}else{
				$(this).val(delayTime.slider('value'));
			}
		});
		//退出动画
		$('.edit.image .isDisappearAnm').change(function(){
			var val=$(this).prop('checked');
			var disappearAnmEl=$(this).parent().siblings('.disappearAnm');
			currEditObj.isDisappear=val;
			if(val){
				$(this).parent().css('marginBottom','-4px');
				disappearAnmEl.show();
			}else{
				$(this).parent().css('marginBottom','5px');
				disappearAnmEl.hide();				
			}
		});	
		$('.edit.image .widget_animation .disappearAnmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.disappearType=val;
		});
		$('.edit.image .widget_animation .disappearDurationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDurationTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDuration=num;
				}else{
					$(this).val(disappearDurationTime.slider('value'));
				}
			}else{
				$(this).val(disappearDurationTime.slider('value'));
			}
		});
		$('.edit.image .widget_animation .disappearDelayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDelayTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDelay=num;
				}else{
					$(this).val(disappearDelayTime.slider('value'));
				}
			}else{
				$(this).val(disappearDelayTime.slider('value'));
			}
		});		
		$('.edit.image .widget_style .opacity').siblings('.val').blur(function(){
			var num=$(this).val();
			if(!isNaN(num)){
				num=parseInt(num);
				if(num>=0 && num<=100){
					$(this).val(num);
					opacity.slider('value',num);		
					//更新数据
			        currEditObj.opacity=num;
					//更新ui
					num=1-parseFloat(num)/100;
					$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a').css('opacity',num);
				}else{
					$(this).val(opacity.slider('value'));
				}
			}else{
				$(this).val(opacity.slider('value'));
			}
		});
		$('.edit.image .widget_style .yuanjiao').siblings('.val').blur(function(){
			var num=$(this).val();
			if(!isNaN(num)){
				num=parseInt(num);
				if(num>=0 && num<=320){
					$(this).val(num);
					yuanjiao.slider('value',num);		
					//更新数据
			        currEditObj.yuanjiao=num;
					//更新ui
					$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
				}else{
					$(this).val(yuanjiao.slider('value'));
				}
			}else{
				$(this).val(yuanjiao.slider('value'));
			}
		});
	}
	
	initDurationTime(0);
	initDelayTime(0);
	initDisappearDurationTime(0);
	initDisappearDelayTime(0);
	initOpacity(0);
	initYuanjiao(0);
	initOther();
	
	window.editImage=function(){
		if(currEditObj.src && currEditObj.src.indexOf('weikechangjing/image/edit/web-add-image.png')==-1){
			var $widgetImage=$('#widgetImage');
			$widgetImage.find('span').html('');
			$widgetImage.css('backgroundImage','url('+getUrl(currEditObj.src)+')');			
		}else{
			var $widgetImage=$('#widgetImage');
			$widgetImage.find('span').html('选择图片');
			$widgetImage.css('backgroundImage','none');			
		}
		if(currEditObj.type){
			$('.edit.image .widget_animation .anmType').val(currEditObj.type);
		}
		if(currEditObj.duration!=null && currEditObj.duration!=undefined){
			initDurationTime(currEditObj.duration);		
			$('.edit.image .widget_animation .durationTime').siblings('.val').val(currEditObj.duration);
		}
		if(currEditObj.delay!=null && currEditObj.delay!=undefined){
			initDelayTime(currEditObj.delay);		
			$('.edit.image .widget_animation .delayTime').siblings('.val').val(currEditObj.delay);	
		}
		//退出动画
		if(currEditObj.isDisappear){
			$('.edit.image .widget_animation .isDisappearAnm').prop('checked',true);
			$('.edit.image .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').show();
		}else{
			$('.edit.image .widget_animation .isDisappearAnm').prop('checked',false);	
			$('.edit.image .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').hide();		
		}
		if(currEditObj.disappearType){
			$('.edit.image .widget_animation .disappearAnmType').val(currEditObj.disappearType);
		}else{
			$('.edit.image .widget_animation .disappearAnmType').val('a-fadeout');
		}
		if(currEditObj.disappearDuration!=null && currEditObj.disappearDuration!=undefined){
			initDisappearDurationTime(currEditObj.disappearDuration);		
			$('.edit.image .widget_animation .disappearDurationTime').siblings('.val').val(currEditObj.disappearDuration);
		}else{
			initDisappearDurationTime(0);		
			$('.edit.image .widget_animation .disappearDurationTime').siblings('.val').val(0);
		}
		if(currEditObj.disappearDelay!=null && currEditObj.disappearDelay!=undefined){
			initDisappearDelayTime(currEditObj.disappearDelay);		
			$('.edit.image .widget_animation .disappearDelayTime').siblings('.val').val(currEditObj.disappearDelay);	
		}else{
			initDisappearDelayTime(0);		
			$('.edit.image .widget_animation .disappearDelayTime').siblings('.val').val(0);	
		}
		if(currEditObj.opacity!=null && currEditObj.opacity!=undefined){
			initOpacity(currEditObj.opacity);	
			$('.edit.image .widget_style .opacity').siblings('.val').val(currEditObj.opacity);			
		}
		if(currEditObj.yuanjiao!=null && currEditObj.yuanjiao!=undefined){
			initYuanjiao(currEditObj.yuanjiao);	
			$('.edit.image .widget_style .yuanjiao').siblings('.val').val(currEditObj.yuanjiao);			
		}
		if(currEditObj.initPos){
			$('.edit.image select.initpos').val(currEditObj.initPos);
		}
	}
	
});

</script>
				


<style>
.main .mobile.button input[type="radio"]{
	vertical-align: -2px;
}
</style>

<div class="mobile edit button"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		按钮控件<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
	
		<div class="block minSetting btn_text">
			<p class="title" style="margin-top:3px;">按钮文本：<span class="tips">(如不需要文本，可置空)</span></p>
			<div>
				<span class="ltitle">文本内容：</span>
				<input type="text" class="val btnTextContent" value="0" style="width:136px" maxlength="30"> 
			</div>
			<div>
				<span class="ltitle">字体大小：</span>
				<select class="text-fontSize-menu btnFontsize" style="width: 150px;padding-left:10px!important;margin-left:10px;background:white;">
					<option value="12">12px</option>
					<option value="13">13px</option>
					<option value="14">14px</option>
					<option value="16">16px</option>
					<option value="18">18px</option>
					<option value="24">24px</option>
					<option value="32">32px</option>
					<option value="48">48px</option>
				</select>
			</div>
			<div>
				<span class="ltitle">字体颜色：</span>
				<input type="text" id="btnColor" class="val" style="width: 30%;background: white;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 1px;top: -3px;"><div style="background-color: #ffffff;"></div></div>
			</div>
		</div>
	
		<div class="block btn_bg">
			<p class="title">按钮背景：<span class="tips">(可选择图片或颜色背景)</span></p>
			<p style="padding-top:5px;height: 18px;">
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_color" checked="checked"> 颜色背景</label>
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_img" style="margin-left:12px;"> 图片背景</label>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_color">
			<p class="title">按钮背景颜色：</p>
			<p>
				<input type="text" id="btnBgColor" style="width: 30%;height: 16px;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 113px;top: -35px;"><div style="background-color: #ffffff;"></div></div>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_image" style="display:none;">
			<p class="title">按钮背景图片：<span class="tips">(请点击上传)</span></p>
			<p>
				<div class="wcenter pageimage" title="点击选择图片" id="btnBgImage" style="height: 100px;line-height: 100px;font-size: 18px;color: #999;">
					<span class="forbitSelect">选择图片</span>
				</div>	
			</p>
		</div>	
		
		<div class="block minSetting click_effect">
			<p class="title" style="margin-top:3px;">点击效果：<span class="tips">(<a href="http://www.weikecj.cn/help.jsp#6_2" target="_blank" style="color:#999;text-decoration: underline;">如何获取百度地图链接？</a>)</span></p>
			<div>
				<label style="float:left;margin-top: 5px;" effect=''><input type="radio" name="btnclicktype" class="click_type_no" checked="checked"> 无</label>
			</div>
			<div>
				<label style="float:left;margin-top: 5px;" effect='share'><input type="radio" name="btnclicktype" class="click_type_share"> 微信分享</label>
			</div>
			<div>
				<label style="float:left;margin-top: 5px;" effect='link'><input type="radio" name="btnclicktype" class="click_type_link"> 网址链接</label>
				<input type="text" class="val clicklink" style="width:180px" placeholder="以http://或https://开头" maxlength="300">				
			</div>
			<div>
				<label style="float:left;margin-top: 5px;" effect='tel'><input type="radio" name="btnclicktype" class="click_type_tel"> 联系电话</label>
				<input type="text" class="val clicktel" style="width:180px" placeholder="请输入联系电话" maxlength="20"> 
			</div>
		</div>
		
		<div class="block minSetting widget_animation">
			<p class="title" style="margin-top:3px;">动画效果：<span class="tips">(修改后需要重载页面才可以看到效果)</span></p>
			<div>
				<span class="ltitle" style="margin-top:6px;">动画类型：</span>
				<select class="widgetSelect anmType">
					<optgroup label="淡入效果">
						<option value="a-fadein">淡入</option>
						<option value="a-fadeinL">从左淡入</option>
						<option value="a-fadeinR">从右淡入</option>
						<option value="a-fadeinT">从上淡入</option>
						<option value="a-fadeinB">从下淡入</option>
					</optgroup>
					<optgroup label="弹入效果">
						<option value="a-bouncein">弹入</option>
						<option value="a-bounceinL">从左弹入</option>
						<option value="a-bounceinR">从右弹入</option>
						<option value="a-bounceinT">从上弹入</option>
						<option value="a-bounceinB">从下弹入</option>
					</optgroup>
					<optgroup label="转入效果">
						<option value="a-rotatein">转入</option>
						<option value="a-rotateinLT">从左上转入</option>
						<option value="a-rotateinLB">从左下转入</option>
						<option value="a-rotateinRT">从右上转入</option>
						<option value="a-rotateinRB">从右下转入</option>
					</optgroup>
					<optgroup label="翻入效果">
						<option value="a-flipinX">水平翻入</option>
						<option value="a-flipinY">垂直翻入</option>
						<option value="a-flipinZ">3D翻入</option>
					</optgroup>
					<optgroup label="强调效果">
						<option value="a-seal">印章</option>
						<option value="a-flash">闪烁</option>
						<option value="a-shake">震颤</option>
						<option value="a-ring">抖动</option>
						<option value="a-wobble">摇晃</option>
						<option value="a-swing">悬摆</option>
						<option value="a-light">光速</option>
						<option value="a-slide">展开</option>
					</optgroup>
					<optgroup label="持续效果">
						<option value="a-rotateR">顺时针旋转</option>
						<option value="a-rotateL">逆时针旋转</option>
						<option value="a-slowshake">持续摇摆</option>
						<option value="a-slowflag">持续标记</option>
					</optgroup>	
					<!-- <optgroup label="滚动消失效果">
						<option value="a-rollT">向上滚动</option>
						<option value="a-rollR">向右滚动</option>
						<option value="a-rollB">向下滚动</option>
						<option value="a-rollL">向左滚动</option>
					</optgroup> -->
				</select>
			</div>
			<div>
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider durationTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div>
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider delayTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<!-- 退出动画 -->
			<p style="margin: 16px 0px;margin-bottom: -3px;">
				<input type="checkbox" class="isDisappearAnm" style="width: 20px; width: 13px; height: 13px; vertical-align: -2px; margin-left: 1px;">
				开启退出动画
			</p>
  			<div class="disappearAnm">
				<span class="ltitle" style="margin-top:6px;">退出动画类型：</span>
				<select class="widgetSelect disappearAnmType">
					<optgroup label="淡出效果">
						<option value="a-fadeout">淡出</option>
						<option value="a-fadeoutL">从左淡出</option>
						<option value="a-fadeoutR">从右淡出</option>
						<option value="a-fadeoutT">从上淡出</option>
						<option value="a-fadeoutB">从下淡出</option>
					</optgroup>
					<optgroup label="弹出效果">
						<option value="a-bounceout">弹出</option>
						<option value="a-bounceoutL">从左弹出</option>
						<option value="a-bounceoutR">从右弹出</option>
						<option value="a-bounceoutT">从上弹出</option>
						<option value="a-bounceoutB">从下弹出</option>
					</optgroup>
					<optgroup label="转出效果">
						<option value="a-rotateout">转出</option>
						<option value="a-rotateoutLT">从左上转出</option>
						<option value="a-rotateoutLB">从左下转出</option>
						<option value="a-rotateoutRT">从右上转出</option>
						<option value="a-rotateoutBR">从右下转出</option>
					</optgroup>
					<optgroup label="翻出效果">
						<option value="a-flipoutX">水平翻出</option>
						<option value="a-flipoutY">垂直翻出</option>
					</optgroup>
				</select>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider disappearDurationTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider disappearDelayTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<!-- 退出动画END -->
		</div>	
		<div class="block minSetting widget_style" style="border-bottom:0px;">
			<p class="title" style="margin-top:3px;">样式效果：</p>
			<div>
				<span class="ltitle">圆角：</span>
				<div class="weikeSlider yuanjiao" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">px</span>
			</div>
		</div>
		<div class="block minSetting widget_style" style="border-bottom:0px;padding-right:13px;">
			<p class="title" style="margin-top:3px;">高级设置：<span class="tips">(初始定位用于设置控件基于哪种对齐方式定位)</span></p>
			<div>
				<span class="ltitle" style="margin-top: 5px;">控件初始定位：</span>
				<select class="initpos" style=" padding-left: 10px!important;">   
				   <option value="top">上</option>   
				   <option value="bottom">下</option>   
				   <option value="left">左</option>   
				   <option value="right">右</option>   
				   <option value="center" selected="selected">居中</option>   
				   <option value="leftTop">左上</option>   
				   <option value="leftBottom">左下</option>   
				   <option value="rightTop">右上</option>   
				   <option value="rightBottom">右下</option>   
				</select>
			</div>
		</div>
	</div>
</div>

<script>

var btnColorPicker=null;
function initBtnColorPicker(color){
	$('.main .mobile.button .btn_text #colorSelector>div').css('backgroundColor', color);
	if(btnColorPicker!=null){
		btnColorPicker.ColorPickerSetColor(color);
		return;
	}
	btnColorPicker=$('.main .mobile.button .btn_text #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.button .btn_text #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.button .btn_text #btnColor').val(color);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('color',color);
			//更新数据
			currEditObj.btnColor=color;
		}
	});
}

var btnBgColorPicker=null;
function initBtnBgColorPicker(color){
	$('.main .mobile.button .btn_bg_color #colorSelector>div').css('backgroundColor', color);
	if(btnBgColorPicker!=null){
		btnBgColorPicker.ColorPickerSetColor(color);
		return;
	}
	btnBgColorPicker=$('.main .mobile.button .btn_bg_color #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.button .btn_bg_color #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.button .btn_bg_color #btnBgColor').val(color);
			$('#btnBgImage').css('backgroundImage','none');
			$('#btnBgImage>span').html('选择图片');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','#' + hex);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src','img/a203937a-669d-44f3-aa48-3dccb51196e2.png');
			//更新数据
			currEditObj.btnBgColor='#' + hex;
			currEditObj.src='';
		}
	});
}

$(function(){
	
	$('#btnBgImage').click(function(){
		showSelectImg(function(url){
			//更新ui
			var $btnBgImage=$('#btnBgImage');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(url)+')');
			$('.main .mobile.button .btn_bg_color #btnBgColor').val('');
			initBtnBgColorPicker('#ffffff');
			//更新图片
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','transparent');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src',getUrl(url));
			//更新数据
			currEditObj.src=url;
			currEditObj.btnBgColor='';
		});
	});
	
	$('.mobile.button .btnTextContent').blur(function(){
		currEditObj.btnText=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>span').html($(this).val());
	});
	
	$('.mobile.button .btnFontsize').change(function(){
		currEditObj.btnFontsize=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('font-size',$(this).val()+'px');
	});
	
	$('.mobile.button .bgtype_img').parent().click(function(){
		$('.main .mobile.button .btn_bg_color').hide();
		$('.main .mobile.button .btn_bg_image').show();
	});
	$('.mobile.button .bgtype_color').parent().click(function(){
		$('.main .mobile.button .btn_bg_color').show();
		$('.main .mobile.button .btn_bg_image').hide();	
	});
	
	$('.main .mobile.button .clicklink').focus(function(){
		$('.main .mobile.button .click_type_link').prop('checked',true);
		$('.main .mobile.button .clicktel').val('');	
		currEditObj.func='link';
		currEditObj.funcContent=$(this).val();	
	}).blur(function(){
		if($(this).val().length==0) return;
		currEditObj.funcContent=$(this).val();	
	});
	$('.main .mobile.button .clicktel').focus(function(){
		$('.main .mobile.button .click_type_tel').prop('checked',true);
		$('.main .mobile.button .clicklink').val('');		
		currEditObj.func='tel';
		currEditObj.funcContent=$(this).val();
	}).blur(function(){
		if($(this).val().length==0) return;
		currEditObj.funcContent=$(this).val();	
	});
	
	$('.mobile.button .click_effect label').click(function(){
		
		var effect=$(this).attr('effect');
		currEditObj.func=effect;
		if(!effect || effect=='share'){
			$('.main .mobile.button .clicklink').val('');
			$('.main .mobile.button .clicktel').val('');	
			currEditObj.funcContent='';
		}else if(effect=='link'){
			$('.main .mobile.button .clicktel').val('');
			currEditObj.funcContent=$('.main .mobile.button .clicklink').val();			
		}else if(effect=='tel'){
			$('.main .mobile.button .clicklink').val('');	
			currEditObj.funcContent=$('.main .mobile.button .clicktel').val();
		}
		
	});
	
	var durationTime,delayTime,yuanjiao;
	
	function initDurationTime(val){
		durationTime=$('.edit.button .widget_animation .durationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.duration=ui.value;
			}
		});
	}
	
	function initDelayTime(val){
		delayTime=$('.edit.button .widget_animation .delayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.delay=ui.value;
			}
		});
	}
	
	function initYuanjiao(val){
		yuanjiao=$('.edit.button .widget_style .yuanjiao').slider({
			range: "min",
			value: val,
			min: 0,
			max: 320,
			step: 1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.yuanjiao=ui.value;//更新ui
				var num=ui.value;
				$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
			}
		});
	}
	
	//退出动画
	var disappearDurationTime,disappearDelayTime;
	function initDisappearDurationTime(val){
		disappearDurationTime=$('.edit.button .widget_animation .disappearDurationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDuration=ui.value;
			}
		});
	}	
	function initDisappearDelayTime(val){
		disappearDelayTime=$('.edit.button .widget_animation .disappearDelayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDelay=ui.value;
			}
		});
	}
	
	function initOther(){
		$('.edit.button .widget_animation .anmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.type=val;
		});
		$('.edit.button .widget_animation .durationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					durationTime.slider('value',num);		
					//更新数据
			        currEditObj.duration=num;
				}else{
					$(this).val(durationTime.slider('value'));
				}
			}else{
				$(this).val(durationTime.slider('value'));
			}
		});
		$('.edit.button .widget_animation .delayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					delayTime.slider('value',num);		
					//更新数据
			        currEditObj.delay=num;
				}else{
					$(this).val(delayTime.slider('value'));
				}
			}else{
				$(this).val(delayTime.slider('value'));
			}
		});
		//退出动画
		$('.edit.button .isDisappearAnm').change(function(){
			var val=$(this).prop('checked');
			var disappearAnmEl=$(this).parent().siblings('.disappearAnm');
			currEditObj.isDisappear=val;
			if(val){
				$(this).parent().css('marginBottom','-4px');
				disappearAnmEl.show();
			}else{
				$(this).parent().css('marginBottom','5px');
				disappearAnmEl.hide();				
			}
		});	
		$('.edit.button .widget_animation .disappearAnmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.disappearType=val;
		});
		$('.edit.button .widget_animation .disappearDurationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDurationTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDuration=num;
				}else{
					$(this).val(disappearDurationTime.slider('value'));
				}
			}else{
				$(this).val(disappearDurationTime.slider('value'));
			}
		});
		$('.edit.button .widget_animation .disappearDelayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDelayTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDelay=num;
				}else{
					$(this).val(disappearDelayTime.slider('value'));
				}
			}else{
				$(this).val(disappearDelayTime.slider('value'));
			}
		});
		$('.edit.button .widget_style .yuanjiao').siblings('.val').blur(function(){
			var num=$(this).val();
			if(!isNaN(num)){
				num=parseInt(num);
				if(num>=0 && num<=320){
					$(this).val(num);
					yuanjiao.slider('value',num);		
					//更新数据
			        currEditObj.yuanjiao=num;
					//更新ui
					$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
				}else{
					$(this).val(yuanjiao.slider('value'));
				}
			}else{
				$(this).val(yuanjiao.slider('value'));
			}
		});
		initBtnColorPicker('#ffffff');
		initBtnBgColorPicker('#6FB341');
	}
	
	initDurationTime(0);
	initDelayTime(0);
	initDisappearDurationTime(0);
	initDisappearDelayTime(0);
	initYuanjiao(0);
	initOther();
	
	window.editButton=function(){
		//初始化按钮选项	
		$('.mobile.button .btnTextContent').val(currEditObj.btnText);
		$('.mobile.button .btnFontsize').val(currEditObj.btnFontsize);
		if(currEditObj.btnColor){
			initBtnColorPicker(currEditObj.btnColor);
			$('.main .mobile.button .btn_text #btnColor').val(currEditObj.btnColor);			
		}
		var $btnBgImage=$('#btnBgImage');
		if(!currEditObj.btnBgColor){
			$('.mobile.button .bgtype_img').prop('checked',true);
			$('.main .mobile.button .btn_bg_color').hide();
			$('.main .mobile.button .btn_bg_image').show();
			$('.main .mobile.button .btn_bg_color #btnBgColor').val('');
			initBtnBgColorPicker('#ffffff');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(currEditObj.src)+')');
		}else{
			$('.mobile.button .bgtype_color').prop('checked',true);
			$('.main .mobile.button .btn_bg_color').show();
			$('.main .mobile.button .btn_bg_image').hide();
			$('.main .mobile.button .btn_bg_color #btnBgColor').val(currEditObj.btnBgColor);
			initBtnBgColorPicker(currEditObj.btnBgColor);
			$btnBgImage.find('span').html('选择图片');
			$btnBgImage.css('backgroundImage','none');
		}
		$('.mobile.button .click_effect label[effect="'+currEditObj.func+'"]>input').prop('checked',true);
		$('.main .mobile.button .clicktel').val('');
		$('.main .mobile.button .clicklink').val('');	
		if(currEditObj.func=='link'){
			$('.main .mobile.button .clicklink').val(currEditObj.funcContent);
		}else if(currEditObj.func=='tel'){
			$('.main .mobile.button .clicktel').val(currEditObj.funcContent);		
		}
		if(currEditObj.type){
			$('.edit.button .widget_animation .anmType').val(currEditObj.type);
		}
		if(currEditObj.duration!=null && currEditObj.duration!=undefined){
			initDurationTime(currEditObj.duration);		
			$('.edit.button .widget_animation .durationTime').siblings('.val').val(currEditObj.duration);
		}
		if(currEditObj.delay!=null && currEditObj.delay!=undefined){
			initDelayTime(currEditObj.delay);		
			$('.edit.button .widget_animation .delayTime').siblings('.val').val(currEditObj.delay);	
		}
		//退出动画
		if(currEditObj.isDisappear){
			$('.edit.button .widget_animation .isDisappearAnm').prop('checked',true);
			$('.edit.button .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').show();
		}else{
			$('.edit.button .widget_animation .isDisappearAnm').prop('checked',false);	
			$('.edit.button .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').hide();		
		}
		if(currEditObj.disappearType){
			$('.edit.button .widget_animation .disappearAnmType').val(currEditObj.disappearType);
		}else{
			$('.edit.button .widget_animation .disappearAnmType').val('a-fadeout');
		}
		if(currEditObj.disappearDuration!=null && currEditObj.disappearDuration!=undefined){
			initDisappearDurationTime(currEditObj.disappearDuration);		
			$('.edit.button .widget_animation .disappearDurationTime').siblings('.val').val(currEditObj.disappearDuration);
		}else{
			initDisappearDurationTime(0);		
			$('.edit.button .widget_animation .disappearDurationTime').siblings('.val').val(0);
		}
		if(currEditObj.disappearDelay!=null && currEditObj.disappearDelay!=undefined){
			initDisappearDelayTime(currEditObj.disappearDelay);		
			$('.edit.button .widget_animation .disappearDelayTime').siblings('.val').val(currEditObj.disappearDelay);	
		}else{
			initDisappearDelayTime(0);		
			$('.edit.button .widget_animation .disappearDelayTime').siblings('.val').val(0);	
		}
		if(currEditObj.yuanjiao!=null && currEditObj.yuanjiao!=undefined){
			initYuanjiao(currEditObj.yuanjiao);	
			$('.edit.button .widget_style .yuanjiao').siblings('.val').val(currEditObj.yuanjiao);			
		}
		if(currEditObj.initPos){
			$('.edit.button select.initpos').val(currEditObj.initPos);
		}
	}
	
});

</script>
				


<style>
.main .mobile.vedio input[type="radio"]{
	vertical-align: -2px;
}
</style>

<div class="mobile edit vedio"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		视频控件<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
	
		<div class="block widget_img vedio_url">
			<p class="title">视频URL：</p>
			<p>
				<textarea class="vedio_url_val" maxlength="500" style="height: 80px;padding: 8px;" placeholder="请填入网络视频的通用代码（建议使用腾讯视频），格式如：&lt;iframe width=&quot;100%&quot; height=&quot;100%&quot; src=&quot;http://...&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;"></textarea>
			</p>
			<p style="font-size: 12px;color: gray;padding: 0px 5px;padding-top: 8px;">
			操作方法：打开网络视频页面，点击视频下方的“分享”，点击下拉小箭头，然后复制该视频的通用代码到上面，最后加上“width=100% height=100%”即可，<a href="/help.jsp#6_1" target="_blank" style="color:#013d5c;text-decoration: underline;">查看操作步骤</a>
			</p>
		</div>
		
		<div class="block widget_img vedio_close">
			<p class="title">视频弹窗关闭按钮颜色：</p>
			<div>
				<input type="text" class="val vedioCloseColor" style="width: 30%;background: white;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 116px;top: -33px;"><div style="background-color: #ffffff;"></div></div>
			</div>
		</div>
	
		<div class="block minSetting btn_text">
			<p class="title" style="margin-top:3px;">视频按钮文本：<span class="tips">(如不需要文本，可置空)</span></p>
			<div>
				<span class="ltitle">文本内容：</span>
				<input type="text" class="val btnTextContent" value="0" style="width:136px" maxlength="30"> 
			</div>
			<div>
				<span class="ltitle">字体大小：</span>
				<select class="text-fontSize-menu btnFontsize" style="width: 150px;padding-left:10px!important;margin-left:10px;background:white;">
					<option value="12">12px</option>
					<option value="13">13px</option>
					<option value="14">14px</option>
					<option value="16">16px</option>
					<option value="18">18px</option>
					<option value="24">24px</option>
					<option value="32">32px</option>
					<option value="48">48px</option>
				</select>
			</div>
			<div>
				<span class="ltitle">字体颜色：</span>
				<input type="text" class="val btnColor" style="width: 30%;background: white;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 1px;top: -3px;"><div style="background-color: #ffffff;"></div></div>
			</div>
		</div>
	
		<div class="block btn_bg">
			<p class="title">视频按钮背景：<span class="tips">(可选择图片或颜色背景)</span></p>
			<p style="padding-top:5px;height: 18px;">
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_color" checked="checked"> 颜色背景</label>
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_img" style="margin-left:12px;"> 图片背景</label>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_color">
			<p class="title">视频按钮背景颜色：</p>
			<p>
				<input type="text" class="btnBgColor" style="width: 30%;height: 16px;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 113px;top: -35px;"><div style="background-color: #ffffff;"></div></div>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_image" style="display:none;">
			<p class="title">视频按钮背景图片：<span class="tips">(请点击上传)</span></p>
			<p>
				<div class="wcenter pageimage btnBgImage" title="点击选择图片" style="height: 100px;line-height: 100px;font-size: 18px;color: #999;">
					<span class="forbitSelect">选择图片</span>
				</div>	
			</p>
		</div>	
		
		<div class="block minSetting widget_animation">
			<p class="title" style="margin-top:3px;">动画效果：<span class="tips">(修改后需要重载页面才可以看到效果)</span></p>
			<div>
				<span class="ltitle" style="margin-top:6px;">动画类型：</span>
				<select class="widgetSelect anmType">
					<optgroup label="淡入效果">
						<option value="a-fadein">淡入</option>
						<option value="a-fadeinL">从左淡入</option>
						<option value="a-fadeinR">从右淡入</option>
						<option value="a-fadeinT">从上淡入</option>
						<option value="a-fadeinB">从下淡入</option>
					</optgroup>
					<optgroup label="弹入效果">
						<option value="a-bouncein">弹入</option>
						<option value="a-bounceinL">从左弹入</option>
						<option value="a-bounceinR">从右弹入</option>
						<option value="a-bounceinT">从上弹入</option>
						<option value="a-bounceinB">从下弹入</option>
					</optgroup>
					<optgroup label="转入效果">
						<option value="a-rotatein">转入</option>
						<option value="a-rotateinLT">从左上转入</option>
						<option value="a-rotateinLB">从左下转入</option>
						<option value="a-rotateinRT">从右上转入</option>
						<option value="a-rotateinRB">从右下转入</option>
					</optgroup>
					<optgroup label="翻入效果">
						<option value="a-flipinX">水平翻入</option>
						<option value="a-flipinY">垂直翻入</option>
						<option value="a-flipinZ">3D翻入</option>
					</optgroup>
					<optgroup label="强调效果">
						<option value="a-seal">印章</option>
						<option value="a-flash">闪烁</option>
						<option value="a-shake">震颤</option>
						<option value="a-ring">抖动</option>
						<option value="a-wobble">摇晃</option>
						<option value="a-swing">悬摆</option>
						<option value="a-light">光速</option>
						<option value="a-slide">展开</option>
					</optgroup>
					<optgroup label="持续效果">
						<option value="a-rotateR">顺时针旋转</option>
						<option value="a-rotateL">逆时针旋转</option>
						<option value="a-slowshake">持续摇摆</option>
						<option value="a-slowflag">持续标记</option>
					</optgroup>	
					<!-- <optgroup label="滚动消失效果">
						<option value="a-rollT">向上滚动</option>
						<option value="a-rollR">向右滚动</option>
						<option value="a-rollB">向下滚动</option>
						<option value="a-rollL">向左滚动</option>
					</optgroup> -->
				</select>
			</div>
			<div>
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider durationTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div>
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider delayTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
						<!-- 退出动画 -->
			<p style="margin: 16px 0px;margin-bottom: -3px;">
				<input type="checkbox" class="isDisappearAnm" style="width: 20px; width: 13px; height: 13px; vertical-align: -2px; margin-left: 1px;">
				开启退出动画
			</p>
  			<div class="disappearAnm">
				<span class="ltitle" style="margin-top:6px;">退出动画类型：</span>
				<select class="widgetSelect disappearAnmType">
					<optgroup label="淡出效果">
						<option value="a-fadeout">淡出</option>
						<option value="a-fadeoutL">从左淡出</option>
						<option value="a-fadeoutR">从右淡出</option>
						<option value="a-fadeoutT">从上淡出</option>
						<option value="a-fadeoutB">从下淡出</option>
					</optgroup>
					<optgroup label="弹出效果">
						<option value="a-bounceout">弹出</option>
						<option value="a-bounceoutL">从左弹出</option>
						<option value="a-bounceoutR">从右弹出</option>
						<option value="a-bounceoutT">从上弹出</option>
						<option value="a-bounceoutB">从下弹出</option>
					</optgroup>
					<optgroup label="转出效果">
						<option value="a-rotateout">转出</option>
						<option value="a-rotateoutLT">从左上转出</option>
						<option value="a-rotateoutLB">从左下转出</option>
						<option value="a-rotateoutRT">从右上转出</option>
						<option value="a-rotateoutBR">从右下转出</option>
					</optgroup>
					<optgroup label="翻出效果">
						<option value="a-flipoutX">水平翻出</option>
						<option value="a-flipoutY">垂直翻出</option>
					</optgroup>
				</select>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider disappearDurationTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider disappearDelayTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<!-- 退出动画END -->
		</div>	
		<div class="block minSetting widget_style" style="border-bottom:0px;">
			<p class="title" style="margin-top:3px;">样式效果：</p>
			<div>
				<span class="ltitle">圆角：</span>
				<div class="weikeSlider yuanjiao" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">px</span>
			</div>
		</div>
		<div class="block minSetting widget_style" style="border-bottom:0px;padding-right:13px;">
			<p class="title" style="margin-top:3px;">高级设置：<span class="tips">(初始定位用于设置控件基于哪种对齐方式定位)</span></p>
			<div>
				<span class="ltitle" style="margin-top: 5px;">控件初始定位：</span>
				<select class="initpos" style=" padding-left: 10px!important;">   
				   <option value="top">上</option>   
				   <option value="bottom">下</option>   
				   <option value="left">左</option>   
				   <option value="right">右</option>   
				   <option value="center" selected="selected">居中</option>   
				   <option value="leftTop">左上</option>   
				   <option value="leftBottom">左下</option>   
				   <option value="rightTop">右上</option>   
				   <option value="rightBottom">右下</option>   
				</select>
			</div>
		</div>
	</div>
</div>

<script>

var vedioCloseColorPicker=null;
function initVedioCloseColorPicker(color){
	$('.main .mobile.vedio .vedio_close #colorSelector>div').css('backgroundColor', color);
	if(vedioCloseColorPicker!=null){
		vedioCloseColorPicker.ColorPickerSetColor(color);
		return;
	}
	vedioCloseColorPicker=$('.main .mobile.vedio .vedio_close #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.vedio .vedio_close #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.vedio .vedio_close .vedioCloseColor').val(color);
			//更新数据
			currEditObj.vCloseColor=color;
		}
	});
}

var vedioBtnColorPicker=null;
function initVedioBtnColorPicker(color){
	$('.main .mobile.vedio .btn_text #colorSelector>div').css('backgroundColor', color);
	if(vedioBtnColorPicker!=null){
		vedioBtnColorPicker.ColorPickerSetColor(color);
		return;
	}
	vedioBtnColorPicker=$('.main .mobile.vedio .btn_text #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.vedio .btn_text #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.vedio .btn_text .btnColor').val(color);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('color',color);
			//更新数据
			currEditObj.btnColor=color;
		}
	});
}

var vedioBtnBgColorPicker=null;
function initVedioBtnBgColorPicker(color){
	$('.main .mobile.vedio .btn_bg_color #colorSelector>div').css('backgroundColor', color);
	if(vedioBtnBgColorPicker!=null){
		vedioBtnBgColorPicker.ColorPickerSetColor(color);
		return;
	}
	vedioBtnBgColorPicker=$('.main .mobile.vedio .btn_bg_color #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.vedio .btn_bg_color #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.vedio .btn_bg_color .btnBgColor').val(color);
			$('.main .mobile.vedio .btn_bg_image .btnBgImage').css('backgroundImage','none');
			$('.main .mobile.vedio .btn_bg_image .btnBgImage>span').html('选择图片');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','#' + hex);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src','img/a203937a-669d-44f3-aa48-3dccb51196e2.png');
			//更新数据
			currEditObj.btnBgColor='#' + hex;
			currEditObj.src='';
		}
	});
}

$(function(){
	
	$('.main .mobile.vedio .btn_bg_image .btnBgImage').click(function(){
		showSelectImg(function(url){
			//更新ui
			var $btnBgImage=$('.main .mobile.vedio .btn_bg_image .btnBgImage');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(url)+')');
			$('.main .mobile.vedio .btn_bg_color .btnBgColor').val('');
			initVedioBtnBgColorPicker('#ffffff');
			//更新图片
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','transparent');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src',getUrl(url));
			//更新数据
			currEditObj.src=url;
			currEditObj.btnBgColor='';
		});
	});
	
	$('.mobile.vedio .btnTextContent').blur(function(){
		currEditObj.btnText=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>span').html($(this).val());
	});
	
	$('.mobile.vedio .btnFontsize').change(function(){
		currEditObj.btnFontsize=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('font-size',$(this).val()+'px');
	});
	
	$('.mobile.vedio .bgtype_img').parent().click(function(){
		$('.main .mobile.vedio .btn_bg_color').hide();
		$('.main .mobile.vedio .btn_bg_image').show();
	});
	$('.mobile.vedio .bgtype_color').parent().click(function(){
		$('.main .mobile.vedio .btn_bg_color').show();
		$('.main .mobile.vedio .btn_bg_image').hide();	
	});
		
	var durationTime,delayTime,yuanjiao;
	
	function initDurationTime(val){
		durationTime=$('.edit.vedio .widget_animation .durationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.duration=ui.value;
			}
		});
	}
	
	function initDelayTime(val){
		delayTime=$('.edit.vedio .widget_animation .delayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.delay=ui.value;
			}
		});
	}
	
	function initYuanjiao(val){
		yuanjiao=$('.edit.vedio .widget_style .yuanjiao').slider({
			range: "min",
			value: val,
			min: 0,
			max: 320,
			step: 1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.yuanjiao=ui.value;//更新ui
				var num=ui.value;
				$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
			}
		});
	}
	
	//退出动画
	var disappearDurationTime,disappearDelayTime;
	function initDisappearDurationTime(val){
		disappearDurationTime=$('.edit.vedio .widget_animation .disappearDurationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDuration=ui.value;
			}
		});
	}	
	function initDisappearDelayTime(val){
		disappearDelayTime=$('.edit.vedio .widget_animation .disappearDelayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDelay=ui.value;
			}
		});
	}
	
	function initOther(){
		$('.edit.vedio .vedio_url .vedio_url_val').blur(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.vLink=val.replace(/"/g,'&quot;').replace(/\r\n/g,'').replace(/\r/g,'').replace(/\n/g,'');
		});		
		$('.edit.vedio .widget_animation .anmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.type=val;
		});
		$('.edit.vedio .widget_animation .durationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					durationTime.slider('value',num);		
					//更新数据
			        currEditObj.duration=num;
				}else{
					$(this).val(durationTime.slider('value'));
				}
			}else{
				$(this).val(durationTime.slider('value'));
			}
		});
		$('.edit.vedio .widget_animation .delayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					delayTime.slider('value',num);		
					//更新数据
			        currEditObj.delay=num;
				}else{
					$(this).val(delayTime.slider('value'));
				}
			}else{
				$(this).val(delayTime.slider('value'));
			}
		});
		//退出动画
		$('.edit.vedio .isDisappearAnm').change(function(){
			var val=$(this).prop('checked');
			var disappearAnmEl=$(this).parent().siblings('.disappearAnm');
			currEditObj.isDisappear=val;
			if(val){
				$(this).parent().css('marginBottom','-4px');
				disappearAnmEl.show();
			}else{
				$(this).parent().css('marginBottom','5px');
				disappearAnmEl.hide();				
			}
		});	
		$('.edit.vedio .widget_animation .disappearAnmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.disappearType=val;
		});
		$('.edit.vedio .widget_animation .disappearDurationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDurationTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDuration=num;
				}else{
					$(this).val(disappearDurationTime.slider('value'));
				}
			}else{
				$(this).val(disappearDurationTime.slider('value'));
			}
		});
		$('.edit.vedio .widget_animation .disappearDelayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDelayTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDelay=num;
				}else{
					$(this).val(disappearDelayTime.slider('value'));
				}
			}else{
				$(this).val(disappearDelayTime.slider('value'));
			}
		});		
		$('.edit.vedio .widget_style .yuanjiao').siblings('.val').blur(function(){
			var num=$(this).val();
			if(!isNaN(num)){
				num=parseInt(num);
				if(num>=0 && num<=320){
					$(this).val(num);
					yuanjiao.slider('value',num);		
					//更新数据
			        currEditObj.yuanjiao=num;
					//更新ui
					$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
				}else{
					$(this).val(yuanjiao.slider('value'));
				}
			}else{
				$(this).val(yuanjiao.slider('value'));
			}
		});
		initVedioBtnColorPicker('#ffffff');
		initVedioBtnBgColorPicker('#6FB341');
		initVedioCloseColorPicker('#6FB341');
	}
	
	initDurationTime(0);
	initDelayTime(0);
	initDisappearDurationTime(0);
	initDisappearDelayTime(0);
	initYuanjiao(0);
	initOther();
	
	window.editVedio=function(){
		//初始化按钮选项	
		$('.edit.vedio .vedio_url .vedio_url_val').val(currEditObj.vLink.replace(/&quot;/g,'"'));
		if(currEditObj.vCloseColor){
			initVedioCloseColorPicker(currEditObj.vCloseColor);
			$('.main .mobile.vedio .vedio_close .vedioCloseColor').val(currEditObj.vCloseColor);		
		}else{
			initVedioCloseColorPicker('#000000');	
			initVedioCloseColorPicker('');		
		}
		$('.mobile.vedio .btnTextContent').val(currEditObj.btnText);
		$('.mobile.vedio .btnFontsize').val(currEditObj.btnFontsize);
		if(currEditObj.btnColor){
			initVedioBtnColorPicker(currEditObj.btnColor);	
			$('.main .mobile.vedio .btn_text .btnColor').val(currEditObj.btnColor);		
		}
		var $btnBgImage=$('.main .mobile.vedio .btn_bg_image .btnBgImage');
		if(!currEditObj.btnBgColor){
			$('.mobile.vedio .bgtype_img').prop('checked',true);
			$('.main .mobile.vedio .btn_bg_color').hide();
			$('.main .mobile.vedio .btn_bg_image').show();
			$('.main .mobile.vedio .btn_bg_color .btnBgColor').val('');
			initVedioBtnBgColorPicker('#6FB341');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(currEditObj.src)+')');
			$('.main .mobile.vedio .btn_bg_color').hide();
			$('.main .mobile.vedio .btn_bg_image').show();
		}else{
			$('.mobile.vedio .bgtype_color').prop('checked',true);
			$('.main .mobile.vedio .btn_bg_color').show();
			$('.main .mobile.vedio .btn_bg_image').hide();
			$('.main .mobile.vedio .btn_bg_color .btnBgColor').val(currEditObj.btnBgColor);
			initVedioBtnBgColorPicker(currEditObj.btnBgColor);
			$btnBgImage.find('span').html('选择图片');
			$btnBgImage.css('backgroundImage','none');
		}
		if(currEditObj.type){
			$('.edit.vedio .widget_animation .anmType').val(currEditObj.type);
		}
		if(currEditObj.duration!=null && currEditObj.duration!=undefined){
			initDurationTime(currEditObj.duration);		
			$('.edit.vedio .widget_animation .durationTime').siblings('.val').val(currEditObj.duration);
		}
		if(currEditObj.delay!=null && currEditObj.delay!=undefined){
			initDelayTime(currEditObj.delay);		
			$('.edit.vedio .widget_animation .delayTime').siblings('.val').val(currEditObj.delay);	
		}
		//退出动画
		if(currEditObj.isDisappear){
			$('.edit.vedio .widget_animation .isDisappearAnm').prop('checked',true);
			$('.edit.vedio .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').show();
		}else{
			$('.edit.vedio .widget_animation .isDisappearAnm').prop('checked',false);	
			$('.edit.vedio .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').hide();		
		}
		if(currEditObj.disappearType){
			$('.edit.vedio .widget_animation .disappearAnmType').val(currEditObj.disappearType);
		}else{
			$('.edit.vedio .widget_animation .disappearAnmType').val('a-fadeout');
		}
		if(currEditObj.disappearDuration!=null && currEditObj.disappearDuration!=undefined){
			initDisappearDurationTime(currEditObj.disappearDuration);		
			$('.edit.vedio .widget_animation .disappearDurationTime').siblings('.val').val(currEditObj.disappearDuration);
		}else{
			initDisappearDurationTime(0);		
			$('.edit.vedio .widget_animation .disappearDurationTime').siblings('.val').val(0);
		}
		if(currEditObj.disappearDelay!=null && currEditObj.disappearDelay!=undefined){
			initDisappearDelayTime(currEditObj.disappearDelay);		
			$('.edit.vedio .widget_animation .disappearDelayTime').siblings('.val').val(currEditObj.disappearDelay);	
		}else{
			initDisappearDelayTime(0);		
			$('.edit.vedio .widget_animation .disappearDelayTime').siblings('.val').val(0);	
		}
		if(currEditObj.yuanjiao!=null && currEditObj.yuanjiao!=undefined){
			initYuanjiao(currEditObj.yuanjiao);	
			$('.edit.vedio .widget_style .yuanjiao').siblings('.val').val(currEditObj.yuanjiao);			
		}
		if(currEditObj.initPos){
			$('.edit.vedio select.initpos').val(currEditObj.initPos);
		}
	}
	
});

</script>
				


<style>
.main .mobile.book input[type="radio"]{
	vertical-align: -2px;
}
.main .mobile.book .book_content input[type="text"]{
	width:65px;
	font-size: 12px;
}
.main .mobile.book .book_content table{
	font-size:0.5em;
	border:1px solid rgb(214, 214, 214);
}
.main .mobile.book .book_content table th{
	height: 32px;
	vertical-align: middle;
	background-color: rgb(237, 237, 237);
	padding-left:5px;
	border-bottom:1px solid rgb(214, 214, 214);
}
.main .mobile.book .book_content table td{
	padding-left:5px;
	border-bottom:1px solid rgb(214, 214, 214);
	vertical-align:middle;
	height: 47px;
}
.main .mobile.book .book_content table .up{
	margin-left:3px;
}
.main .mobile.book .book_content table .down{
	margin-left:4px;
}
.mobile.book #formSetting td.dir>span{
	cursor:pointer;
}
</style>

<div class="mobile edit book"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		预约控件<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
		
		<div class="block minSetting book_content" style="padding-left: 15px;padding-right: 15px;">
			<p class="title" style="margin-top:3px;">预约内容设置：<span class="tips">(预约记录可在场景列表-信息管理查看)</span></p>
			<div>
				
				<table class="book_info_edit" width="100%">
					<tbody>
						<tr>
							<th style="width:76px">类型</th>
							<th style="width:95px">名称</th>
							<th style="width:95px">初始内容</th>
							<th style="width:120px">选项</th>
							<th style="width:65px">顺序</th>
						</tr>
						</tbody>
						<tbody id="formSetting">
							<tr>
								<td>文本</td>
								<td><input type="text" value="姓名" style="" maxlength="10" disabled="disabled"></td>
								<td><input type="text" value="请输入姓名" style="" maxlength="200" disabled="disabled"></td>
								<td><div class="select"><input type="checkbox" checked="" style="vertical-align: -2px;" disabled="disabled">显示<br><input type="checkbox" checked="" style="vertical-align: -2px;" disabled="disabled">必填项</div></td>
								<td class="dir">-</td>
							</tr>
							<tr>
								<td>文本</td>
								<td><input type="text" value="手机" style="" maxlength="10" disabled="disabled"></td>
								<td><input type="text" value="请输入手机" style="" maxlength="200" disabled="disabled"></td>
								<td><div class="select"><input type="checkbox" checked="" style="vertical-align: -2px;" disabled="disabled">显示<br><input type="checkbox" checked="" style="vertical-align: -2px;" disabled="disabled">必填项</div></td>
								<td class="dir">-</td>
							</tr>
						</tbody>	
				</table>
				
			</div>
		</div>
		
		<div class="block minSetting book_other">
			<p class="title" style="margin-top:3px;">预约弹窗设置：</p>
			<div>
				<span class="ltitle">预约标题：</span>
				<input type="text" class="val bookTitle" value="" style="width:136px" maxlength="30"> 
			</div>
			<div>
				<span class="ltitle">提交按钮文本：</span>
				<input type="text" class="val bookSubmitText" value="" style="width:136px" maxlength="30"> 
			</div>
			<div>
				<span class="ltitle">弹窗主色调：</span>
				<input type="text" class="val bookColor" style="width: 30%;background: white;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 1px;top: -3px;"><div style="background-color: #ffffff;"></div></div>
			</div>
		</div>
		
		<div class="block minSetting btn_text">
			<p class="title" style="margin-top:3px;">预约按钮文本：<span class="tips">(如不需要文本，可置空)</span></p>
			<div>
				<span class="ltitle">文本内容：</span>
				<input type="text" class="val btnTextContent" value="0" style="width:136px" maxlength="30"> 
			</div>
			<div>
				<span class="ltitle">字体大小：</span>
				<select class="text-fontSize-menu btnFontsize" style="width: 150px;padding-left:10px!important;margin-left:10px;background:white;">
					<option value="12">12px</option>
					<option value="13">13px</option>
					<option value="14">14px</option>
					<option value="16">16px</option>
					<option value="18">18px</option>
					<option value="24">24px</option>
					<option value="32">32px</option>
					<option value="48">48px</option>
				</select>
			</div>
			<div>
				<span class="ltitle">字体颜色：</span>
				<input type="text" class="val btnColor" style="width: 30%;background: white;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 1px;top: -3px;"><div style="background-color: #ffffff;"></div></div>
			</div>
		</div>
	
		<div class="block btn_bg">
			<p class="title">预约按钮背景：<span class="tips">(可选择图片或颜色背景)</span></p>
			<p style="padding-top:5px;height: 18px;">
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_color" checked="checked"> 颜色背景</label>
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_img" style="margin-left:12px;"> 图片背景</label>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_color">
			<p class="title">预约按钮背景颜色：</p>
			<p>
				<input type="text" class="btnBgColor" style="width: 30%;height: 16px;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 113px;top: -35px;"><div style="background-color: #ffffff;"></div></div>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_image" style="display:none;">
			<p class="title">预约按钮背景图片：<span class="tips">(请点击上传)</span></p>
			<p>
				<div class="wcenter pageimage btnBgImage" title="点击选择图片" style="height: 100px;line-height: 100px;font-size: 18px;color: #999;">
					<span class="forbitSelect">选择图片</span>
				</div>	
			</p>
		</div>	
		
		<div class="block minSetting widget_animation">
			<p class="title" style="margin-top:3px;">动画效果：<span class="tips">(修改后需要重载页面才可以看到效果)</span></p>
			<div>
				<span class="ltitle" style="margin-top:6px;">动画类型：</span>
				<select class="widgetSelect anmType">
					<optgroup label="淡入效果">
						<option value="a-fadein">淡入</option>
						<option value="a-fadeinL">从左淡入</option>
						<option value="a-fadeinR">从右淡入</option>
						<option value="a-fadeinT">从上淡入</option>
						<option value="a-fadeinB">从下淡入</option>
					</optgroup>
					<optgroup label="弹入效果">
						<option value="a-bouncein">弹入</option>
						<option value="a-bounceinL">从左弹入</option>
						<option value="a-bounceinR">从右弹入</option>
						<option value="a-bounceinT">从上弹入</option>
						<option value="a-bounceinB">从下弹入</option>
					</optgroup>
					<optgroup label="转入效果">
						<option value="a-rotatein">转入</option>
						<option value="a-rotateinLT">从左上转入</option>
						<option value="a-rotateinLB">从左下转入</option>
						<option value="a-rotateinRT">从右上转入</option>
						<option value="a-rotateinRB">从右下转入</option>
					</optgroup>
					<optgroup label="翻入效果">
						<option value="a-flipinX">水平翻入</option>
						<option value="a-flipinY">垂直翻入</option>
						<option value="a-flipinZ">3D翻入</option>
					</optgroup>
					<optgroup label="强调效果">
						<option value="a-seal">印章</option>
						<option value="a-flash">闪烁</option>
						<option value="a-shake">震颤</option>
						<option value="a-ring">抖动</option>
						<option value="a-wobble">摇晃</option>
						<option value="a-swing">悬摆</option>
						<option value="a-light">光速</option>
						<option value="a-slide">展开</option>
					</optgroup>
					<optgroup label="持续效果">
						<option value="a-rotateR">顺时针旋转</option>
						<option value="a-rotateL">逆时针旋转</option>
						<option value="a-slowshake">持续摇摆</option>
						<option value="a-slowflag">持续标记</option>
					</optgroup>	
					<!-- <optgroup label="滚动消失效果">
						<option value="a-rollT">向上滚动</option>
						<option value="a-rollR">向右滚动</option>
						<option value="a-rollB">向下滚动</option>
						<option value="a-rollL">向左滚动</option>
					</optgroup> -->
				</select>
			</div>
			<div>
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider durationTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div>
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider delayTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
						<!-- 退出动画 -->
			<p style="margin: 16px 0px;margin-bottom: -3px;">
				<input type="checkbox" class="isDisappearAnm" style="width: 20px; width: 13px; height: 13px; vertical-align: -2px; margin-left: 1px;">
				开启退出动画
			</p>
  			<div class="disappearAnm">
				<span class="ltitle" style="margin-top:6px;">退出动画类型：</span>
				<select class="widgetSelect disappearAnmType">
					<optgroup label="淡出效果">
						<option value="a-fadeout">淡出</option>
						<option value="a-fadeoutL">从左淡出</option>
						<option value="a-fadeoutR">从右淡出</option>
						<option value="a-fadeoutT">从上淡出</option>
						<option value="a-fadeoutB">从下淡出</option>
					</optgroup>
					<optgroup label="弹出效果">
						<option value="a-bounceout">弹出</option>
						<option value="a-bounceoutL">从左弹出</option>
						<option value="a-bounceoutR">从右弹出</option>
						<option value="a-bounceoutT">从上弹出</option>
						<option value="a-bounceoutB">从下弹出</option>
					</optgroup>
					<optgroup label="转出效果">
						<option value="a-rotateout">转出</option>
						<option value="a-rotateoutLT">从左上转出</option>
						<option value="a-rotateoutLB">从左下转出</option>
						<option value="a-rotateoutRT">从右上转出</option>
						<option value="a-rotateoutBR">从右下转出</option>
					</optgroup>
					<optgroup label="翻出效果">
						<option value="a-flipoutX">水平翻出</option>
						<option value="a-flipoutY">垂直翻出</option>
					</optgroup>
				</select>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider disappearDurationTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider disappearDelayTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<!-- 退出动画END -->
		</div>	
		<div class="block minSetting widget_style" style="border-bottom:0px;">
			<p class="title" style="margin-top:3px;">样式效果：</p>
			<div>
				<span class="ltitle">圆角：</span>
				<div class="weikeSlider yuanjiao" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">px</span>
			</div>
		</div>
		<div class="block minSetting widget_style" style="border-bottom:0px;padding-right:13px;">
			<p class="title" style="margin-top:3px;">高级设置：<span class="tips">(初始定位用于设置控件基于哪种对齐方式定位)</span></p>
			<div>
				<span class="ltitle" style="margin-top: 5px;">控件初始定位：</span>
				<select class="initpos" style=" padding-left: 10px!important;">   
				   <option value="top">上</option>   
				   <option value="bottom">下</option>   
				   <option value="left">左</option>   
				   <option value="right">右</option>   
				   <option value="center" selected="selected">居中</option>   
				   <option value="leftTop">左上</option>   
				   <option value="leftBottom">左下</option>   
				   <option value="rightTop">右上</option>   
				   <option value="rightBottom">右下</option>   
				</select>
			</div>
		</div>
	</div>
</div>

<script>

var bookBtnBookColorPicker=null;
function initBookBtnBookColorPicker(color){
	$('.main .mobile.book .book_other #colorSelector>div').css('backgroundColor', color);
	if(bookBtnBookColorPicker!=null){
		bookBtnBookColorPicker.ColorPickerSetColor(color);
		return;
	}
	bookBtnBookColorPicker=$('.main .mobile.book .book_other #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.book .book_other #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.book .book_other .bookColor').val(color);
			//更新数据
			currEditObj.bookColor=color;
		}
	});
}

var bookBtnColorPicker=null;
function initBookBtnColorPicker(color){
	$('.main .mobile.book .btn_text #colorSelector>div').css('backgroundColor', color);
	if(bookBtnColorPicker!=null){
		bookBtnColorPicker.ColorPickerSetColor(color);
		return;
	}
	bookBtnColorPicker=$('.main .mobile.book .btn_text #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.book .btn_text #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.book .btn_text .btnColor').val(color);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('color',color);
			//更新数据
			currEditObj.btnColor=color;
		}
	});
}

var bookBtnBgColorPicker=null;
function initBookBtnBgColorPicker(color){
	$('.main .mobile.book .btn_bg_color #colorSelector>div').css('backgroundColor', color);
	if(bookBtnBgColorPicker!=null){
		bookBtnBgColorPicker.ColorPickerSetColor(color);
		return;
	}
	bookBtnBgColorPicker=$('.main .mobile.book .btn_bg_color #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.book .btn_bg_color #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.book .btn_bg_color .btnBgColor').val(color);
			$('.main .mobile.book .btn_bg_image .btnBgImage').css('backgroundImage','none');
			$('.main .mobile.book .btn_bg_image .btnBgImage>span').html('选择图片');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','#' + hex);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src','img/a203937a-669d-44f3-aa48-3dccb51196e2.png');
			//更新数据
			currEditObj.btnBgColor='#' + hex;
			currEditObj.src='';
		}
	});
}

//设置表单数据
function setBookData(){
	var $trs=$('.mobile.book #formSetting>tr');
	for(var i=2;i<$trs.length;i++){
		var $tr=$trs.eq(i);
		var o={
			type:$tr.attr('dtype'),
			name:$tr.attr('name'),
			text:$tr.find('td').eq(1).find('input').val(),
			placeholder:$tr.find('td').eq(2).find('input').val(),
			isShow:$tr.find('td').eq(3).find('input').eq(0).prop('checked'),
			isMust:$tr.find('td').eq(3).find('input').eq(1).prop('checked')
		};
		currEditObj.bookData[i]=o;
	}
}

$(function(){
	
	// 表单
	$('.mobile.book #formSetting td.dir>span.up').live('click',function(){
		var $tr=$(this).parents('tr').eq(0);
		if($tr.index()==2){
			alert('不能再上移了');
			return;
		}else{
			$tr.insertBefore($tr.prev());		
			setBookData();
		}
	});
	$('.mobile.book #formSetting td.dir>span.down').live('click',function(){
		var $tr=$(this).parents('tr').eq(0);
		if($tr.index()==(currEditObj.bookData.length-1)){
			alert('不能再下移了');
			return;
		}else{
			$tr.insertAfter($tr.next());		
			setBookData();	
		}
	});	
	$('.mobile.book #formSetting td.b_text>input,.mobile.book #formSetting td.b_placeholder>input').live('blur',setBookData);
	$('.mobile.book #formSetting td .select>input').live('change',setBookData);
	
	$('.mobile.book .bookTitle').blur(function(){
		currEditObj.bookTitle=$(this).val();
	});
	
	$('.mobile.book .bookSubmitText').blur(function(){
		currEditObj.bookBtnText=$(this).val();
	});
	
	$('.main .mobile.book .btn_bg_image .btnBgImage').click(function(){
		showSelectImg(function(url){
			//更新ui
			var $btnBgImage=$('.main .mobile.book .btn_bg_image .btnBgImage');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(url)+')');
			$('.main .mobile.book .btn_bg_color .btnBgColor').val('');
			initBookBtnBgColorPicker('#ffffff');
			//更新图片
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','transparent');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src',getUrl(url));
			//更新数据
			currEditObj.src=url;
			currEditObj.btnBgColor='';
		});
	});
	
	$('.mobile.book .btnTextContent').blur(function(){
		currEditObj.btnText=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>span').html($(this).val());
	});
	
	$('.mobile.book .btnFontsize').change(function(){
		currEditObj.btnFontsize=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('font-size',$(this).val()+'px');
	});
	
	$('.mobile.book .bgtype_img').parent().click(function(){
		$('.main .mobile.book .btn_bg_color').hide();
		$('.main .mobile.book .btn_bg_image').show();
	});
	$('.mobile.book .bgtype_color').parent().click(function(){
		$('.main .mobile.book .btn_bg_color').show();
		$('.main .mobile.book .btn_bg_image').hide();	
	});
		
	var durationTime,delayTime,yuanjiao;
	
	function initDurationTime(val){
		durationTime=$('.edit.book .widget_animation .durationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.duration=ui.value;
			}
		});
	}
	
	function initDelayTime(val){
		delayTime=$('.edit.book .widget_animation .delayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.delay=ui.value;
			}
		});
	}
	
	function initYuanjiao(val){
		yuanjiao=$('.edit.book .widget_style .yuanjiao').slider({
			range: "min",
			value: val,
			min: 0,
			max: 320,
			step: 1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.yuanjiao=ui.value;//更新ui
				var num=ui.value;
				$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
			}
		});
	}
	
	//退出动画
	var disappearDurationTime,disappearDelayTime;
	function initDisappearDurationTime(val){
		disappearDurationTime=$('.edit.book .widget_animation .disappearDurationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDuration=ui.value;
			}
		});
	}	
	function initDisappearDelayTime(val){
		disappearDelayTime=$('.edit.book .widget_animation .disappearDelayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDelay=ui.value;
			}
		});
	}
	
	function initOther(){	
		$('.edit.book .widget_animation .anmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.type=val;
		});
		$('.edit.book .widget_animation .durationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					durationTime.slider('value',num);		
					//更新数据
			        currEditObj.duration=num;
				}else{
					$(this).val(durationTime.slider('value'));
				}
			}else{
				$(this).val(durationTime.slider('value'));
			}
		});
		$('.edit.book .widget_animation .delayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					delayTime.slider('value',num);		
					//更新数据
			        currEditObj.delay=num;
				}else{
					$(this).val(delayTime.slider('value'));
				}
			}else{
				$(this).val(delayTime.slider('value'));
			}
		});
		//退出动画
		$('.edit.book .isDisappearAnm').change(function(){
			var val=$(this).prop('checked');
			var disappearAnmEl=$(this).parent().siblings('.disappearAnm');
			currEditObj.isDisappear=val;
			if(val){
				$(this).parent().css('marginBottom','-4px');
				disappearAnmEl.show();
			}else{
				$(this).parent().css('marginBottom','5px');
				disappearAnmEl.hide();				
			}
		});	
		$('.edit.book .widget_animation .disappearAnmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.disappearType=val;
		});
		$('.edit.book .widget_animation .disappearDurationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDurationTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDuration=num;
				}else{
					$(this).val(disappearDurationTime.slider('value'));
				}
			}else{
				$(this).val(disappearDurationTime.slider('value'));
			}
		});
		$('.edit.book .widget_animation .disappearDelayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDelayTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDelay=num;
				}else{
					$(this).val(disappearDelayTime.slider('value'));
				}
			}else{
				$(this).val(disappearDelayTime.slider('value'));
			}
		});		
		$('.edit.book .widget_style .yuanjiao').siblings('.val').blur(function(){
			var num=$(this).val();
			if(!isNaN(num)){
				num=parseInt(num);
				if(num>=0 && num<=320){
					$(this).val(num);
					yuanjiao.slider('value',num);		
					//更新数据
			        currEditObj.yuanjiao=num;
					//更新ui
					$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
				}else{
					$(this).val(yuanjiao.slider('value'));
				}
			}else{
				$(this).val(yuanjiao.slider('value'));
			}
		});
		initBookBtnColorPicker('#ffffff');
		initBookBtnBgColorPicker('#6FB341');
		initBookBtnBookColorPicker('#6FB341');
	}
	
	initDurationTime(0);
	initDelayTime(0);
	initDisappearDurationTime(0);
	initDisappearDelayTime(0);
	initYuanjiao(0);
	initOther();
	
	window.editBook=function(){
		
		//初始化表格
		var $formSetting=$('.mobile.book #formSetting');
		$formSetting.find('>tr:gt(1)').remove();
		for(var i=2;i<currEditObj.bookData.length;i++){
			var html='<tr name="'+currEditObj.bookData[i].name+'" dtype="'+currEditObj.bookData[i].type+'"> '+
									'	<td>'+(currEditObj.bookData[i].type=='select'?'下拉框':currEditObj.bookData[i].type=='text'?'文本':'日期')+'</td> '+
									'	<td class="b_text"><input type="text" value="'+currEditObj.bookData[i].text+'" maxlength="20"></td> '+
									'	<td class="b_placeholder"><input type="text" value="'+currEditObj.bookData[i].placeholder+'" '+(currEditObj.bookData[i].type=='select'?' placeholder="选择1|选择2|选择3" title="输入格式：选择1|选择2|选择3"':'')+' maxlength="200"></td> '+
									'	<td><div class="select"><input type="checkbox" '+(currEditObj.bookData[i].isShow?'checked':'')+' style="vertical-align: -2px;">显示<br><input type="checkbox" '+(currEditObj.bookData[i].isMust?'checked':'')+' style="vertical-align: -2px;">必填项</div></td> '+
									'	<td class="dir"><span title="向上移动" class="up">↑</span> <span title="向下移动" class="down">↓</span></td> '+
									'</tr>';
			$formSetting.append($(html));
		}
		$('.mobile.book .bookTitle').val(currEditObj.bookTitle);
		$('.mobile.book .bookSubmitText').val(currEditObj.bookBtnText);
		initBookBtnBookColorPicker(currEditObj.bookColor);
		$('.main .mobile.book .book_other .bookColor').val(currEditObj.bookColor);
		
		//初始化按钮选项	
		$('.mobile.book .btnTextContent').val(currEditObj.btnText);
		$('.mobile.book .btnFontsize').val(currEditObj.btnFontsize);
		if(currEditObj.btnColor){
			initBookBtnColorPicker(currEditObj.btnColor);	
			$('.main .mobile.book .btn_text .btnColor').val(currEditObj.btnColor);		
		}		
		var $btnBgImage=$('.main .mobile.book .btn_bg_image .btnBgImage');
		if(!currEditObj.btnBgColor){
			$('.mobile.book .bgtype_img').prop('checked',true);
			$('.main .mobile.book .btn_bg_color').hide();
			$('.main .mobile.book .btn_bg_image').show();
			$('.main .mobile.book .btn_bg_color .btnBgColor').val('');
			initBookBtnBgColorPicker('#6FB341');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(currEditObj.src)+')');
			$('.main .mobile.book .btn_bg_color').hide();
			$('.main .mobile.book .btn_bg_image').show();
		}else{
			$('.mobile.book .bgtype_color').prop('checked',true);
			$('.main .mobile.book .btn_bg_color').show();
			$('.main .mobile.book .btn_bg_image').hide();
			$('.main .mobile.book .btn_bg_color .btnBgColor').val(currEditObj.btnBgColor);
			initBookBtnBgColorPicker(currEditObj.btnBgColor);
			$btnBgImage.find('span').html('选择图片');
			$btnBgImage.css('backgroundImage','none');
		}
		if(currEditObj.type){
			$('.edit.book .widget_animation .anmType').val(currEditObj.type);
		}
		if(currEditObj.duration!=null && currEditObj.duration!=undefined){
			initDurationTime(currEditObj.duration);		
			$('.edit.book .widget_animation .durationTime').siblings('.val').val(currEditObj.duration);
		}
		if(currEditObj.delay!=null && currEditObj.delay!=undefined){
			initDelayTime(currEditObj.delay);		
			$('.edit.book .widget_animation .delayTime').siblings('.val').val(currEditObj.delay);	
		}
		//退出动画
		if(currEditObj.isDisappear){
			$('.edit.book .widget_animation .isDisappearAnm').prop('checked',true);
			$('.edit.book .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').show();
		}else{
			$('.edit.book .widget_animation .isDisappearAnm').prop('checked',false);	
			$('.edit.book .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').hide();		
		}
		if(currEditObj.disappearType){
			$('.edit.book .widget_animation .disappearAnmType').val(currEditObj.disappearType);
		}else{
			$('.edit.book .widget_animation .disappearAnmType').val('a-fadeout');
		}
		if(currEditObj.disappearDuration!=null && currEditObj.disappearDuration!=undefined){
			initDisappearDurationTime(currEditObj.disappearDuration);		
			$('.edit.book .widget_animation .disappearDurationTime').siblings('.val').val(currEditObj.disappearDuration);
		}else{
			initDisappearDurationTime(0);		
			$('.edit.book .widget_animation .disappearDurationTime').siblings('.val').val(0);
		}
		if(currEditObj.disappearDelay!=null && currEditObj.disappearDelay!=undefined){
			initDisappearDelayTime(currEditObj.disappearDelay);		
			$('.edit.book .widget_animation .disappearDelayTime').siblings('.val').val(currEditObj.disappearDelay);	
		}else{
			initDisappearDelayTime(0);		
			$('.edit.book .widget_animation .disappearDelayTime').siblings('.val').val(0);	
		}
		if(currEditObj.yuanjiao!=null && currEditObj.yuanjiao!=undefined){
			initYuanjiao(currEditObj.yuanjiao);	
			$('.edit.book .widget_style .yuanjiao').siblings('.val').val(currEditObj.yuanjiao);			
		}
		if(currEditObj.initPos){
			$('.edit.book select.initpos').val(currEditObj.initPos);
		}
	}
	
});

</script>
				


<style>
.main .mobile.message input[type="radio"]{
	vertical-align: -2px;
}
.main .mobile.message .message_content input[type="text"]{
	width:65px;
	font-size: 12px;
}
.main .mobile.message .message_content table{
	font-size:0.5em;
	border:1px solid rgb(214, 214, 214);
}
.main .mobile.message .message_content table th{
	height: 32px;
	vertical-align: middle;
	background-color: rgb(237, 237, 237);
	padding-left:5px;
	border-bottom:1px solid rgb(214, 214, 214);
}
.main .mobile.message .message_content table td{
	padding-left:5px;
	border-bottom:1px solid rgb(214, 214, 214);
	vertical-align:middle;
	height: 47px;
}
.main .mobile.message .message_content table .up{
	margin-left:3px;
}
.main .mobile.message .message_content table .down{
	margin-left:4px;
}
</style>

<div class="mobile edit message"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		留言控件<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
				
		<div class="block minSetting message_other">
			<p class="title" style="margin-top:3px;">留言弹窗设置：<span class="tips">(留言记录可在场景列表-信息管理查看)</span></p>
			<div>
				<span class="ltitle">弹窗标题：</span>
				<input type="text" class="val messageTitle" value="" style="width:136px" maxlength="10"> 
			</div>
			<div>
				<span class="ltitle">弹窗主色调：</span>
				<input type="text" class="val messageColor" style="width: 30%;background: white;" readonly="readonly">
				<div id="colorSelector" style="left: 1px;top: -3px;"><div style="background-color: #ffffff;"></div></div>
			</div>
			<div>
				<span class="ltitle">留言内容提示：</span>
				<input type="text" class="val messageContentTip" value="" style="width:136px" maxlength="30"> 
			</div>
			<div>
				<span class="ltitle">留言姓名提示：</span>
				<input type="text" class="val messageNameTip" value="" style="width:136px" maxlength="30"> 
			</div>
		</div>
		
		<div class="block minSetting btn_text">
			<p class="title" style="margin-top:3px;">留言按钮文本：<span class="tips">(如不需要文本，可置空)</span></p>
			<div>
				<span class="ltitle">文本内容：</span>
				<input type="text" class="val btnTextContent" value="0" style="width:136px" maxlength="30"> 
			</div>
			<div>
				<span class="ltitle">字体大小：</span>
				<select class="text-fontSize-menu btnFontsize" style="width: 150px;padding-left:10px!important;margin-left:10px;background:white;">
					<option value="12">12px</option>
					<option value="13">13px</option>
					<option value="14">14px</option>
					<option value="16">16px</option>
					<option value="18">18px</option>
					<option value="24">24px</option>
					<option value="32">32px</option>
					<option value="48">48px</option>
				</select>
			</div>
			<div>
				<span class="ltitle">字体颜色：</span>
				<input type="text" class="val btnColor" style="width: 30%;background: white;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 1px;top: -3px;"><div style="background-color: #ffffff;"></div></div>
			</div>
		</div>
	
		<div class="block btn_bg">
			<p class="title">留言按钮背景：<span class="tips">(可选择图片或颜色背景)</span></p>
			<p style="padding-top:5px;height: 18px;">
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_color" checked="checked"> 颜色背景</label>
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_img" style="margin-left:12px;"> 图片背景</label>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_color">
			<p class="title">留言按钮背景颜色：</p>
			<p>
				<input type="text" class="btnBgColor" style="width: 30%;height: 16px;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 113px;top: -35px;"><div style="background-color: #ffffff;"></div></div>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_image" style="display:none;">
			<p class="title">留言按钮背景图片：<span class="tips">(请点击上传)</span></p>
			<p>
				<div class="wcenter pageimage btnBgImage" title="点击选择图片" style="height: 100px;line-height: 100px;font-size: 18px;color: #999;">
					<span class="forbitSelect">选择图片</span>
				</div>	
			</p>
		</div>	
		
		<div class="block minSetting widget_animation">
			<p class="title" style="margin-top:3px;">动画效果：<span class="tips">(修改后需要重载页面才可以看到效果)</span></p>
			<div>
				<span class="ltitle" style="margin-top:6px;">动画类型：</span>
				<select class="widgetSelect anmType">
					<optgroup label="淡入效果">
						<option value="a-fadein">淡入</option>
						<option value="a-fadeinL">从左淡入</option>
						<option value="a-fadeinR">从右淡入</option>
						<option value="a-fadeinT">从上淡入</option>
						<option value="a-fadeinB">从下淡入</option>
					</optgroup>
					<optgroup label="弹入效果">
						<option value="a-bouncein">弹入</option>
						<option value="a-bounceinL">从左弹入</option>
						<option value="a-bounceinR">从右弹入</option>
						<option value="a-bounceinT">从上弹入</option>
						<option value="a-bounceinB">从下弹入</option>
					</optgroup>
					<optgroup label="转入效果">
						<option value="a-rotatein">转入</option>
						<option value="a-rotateinLT">从左上转入</option>
						<option value="a-rotateinLB">从左下转入</option>
						<option value="a-rotateinRT">从右上转入</option>
						<option value="a-rotateinRB">从右下转入</option>
					</optgroup>
					<optgroup label="翻入效果">
						<option value="a-flipinX">水平翻入</option>
						<option value="a-flipinY">垂直翻入</option>
						<option value="a-flipinZ">3D翻入</option>
					</optgroup>
					<optgroup label="强调效果">
						<option value="a-seal">印章</option>
						<option value="a-flash">闪烁</option>
						<option value="a-shake">震颤</option>
						<option value="a-ring">抖动</option>
						<option value="a-wobble">摇晃</option>
						<option value="a-swing">悬摆</option>
						<option value="a-light">光速</option>
						<option value="a-slide">展开</option>
					</optgroup>
					<optgroup label="持续效果">
						<option value="a-rotateR">顺时针旋转</option>
						<option value="a-rotateL">逆时针旋转</option>
						<option value="a-slowshake">持续摇摆</option>
						<option value="a-slowflag">持续标记</option>
					</optgroup>	
					<!-- <optgroup label="滚动消失效果">
						<option value="a-rollT">向上滚动</option>
						<option value="a-rollR">向右滚动</option>
						<option value="a-rollB">向下滚动</option>
						<option value="a-rollL">向左滚动</option>
					</optgroup> -->
				</select>
			</div>
			<div>
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider durationTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div>
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider delayTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
						<!-- 退出动画 -->
			<p style="margin: 16px 0px;margin-bottom: -3px;">
				<input type="checkbox" class="isDisappearAnm" style="width: 20px; width: 13px; height: 13px; vertical-align: -2px; margin-left: 1px;">
				开启退出动画
			</p>
  			<div class="disappearAnm">
				<span class="ltitle" style="margin-top:6px;">退出动画类型：</span>
				<select class="widgetSelect disappearAnmType">
					<optgroup label="淡出效果">
						<option value="a-fadeout">淡出</option>
						<option value="a-fadeoutL">从左淡出</option>
						<option value="a-fadeoutR">从右淡出</option>
						<option value="a-fadeoutT">从上淡出</option>
						<option value="a-fadeoutB">从下淡出</option>
					</optgroup>
					<optgroup label="弹出效果">
						<option value="a-bounceout">弹出</option>
						<option value="a-bounceoutL">从左弹出</option>
						<option value="a-bounceoutR">从右弹出</option>
						<option value="a-bounceoutT">从上弹出</option>
						<option value="a-bounceoutB">从下弹出</option>
					</optgroup>
					<optgroup label="转出效果">
						<option value="a-rotateout">转出</option>
						<option value="a-rotateoutLT">从左上转出</option>
						<option value="a-rotateoutLB">从左下转出</option>
						<option value="a-rotateoutRT">从右上转出</option>
						<option value="a-rotateoutBR">从右下转出</option>
					</optgroup>
					<optgroup label="翻出效果">
						<option value="a-flipoutX">水平翻出</option>
						<option value="a-flipoutY">垂直翻出</option>
					</optgroup>
				</select>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider disappearDurationTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div class="disappearAnm">
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider disappearDelayTime ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" style="width:169px;"><div class="ui-slider-range ui-widget-header ui-corner-all  ui-slider-range-min" style="width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 0%;"></span><div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min" style="width: 0%;"></div></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<!-- 退出动画END -->			
		</div>	
		<div class="block minSetting widget_style" style="border-bottom:0px;">
			<p class="title" style="margin-top:3px;">样式效果：</p>
			<div>
				<span class="ltitle">圆角：</span>
				<div class="weikeSlider yuanjiao" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">px</span>
			</div>
		</div>
		<div class="block minSetting widget_style" style="border-bottom:0px;padding-right:13px;">
			<p class="title" style="margin-top:3px;">高级设置：<span class="tips">(初始定位用于设置控件基于哪种对齐方式定位)</span></p>
			<div>
				<span class="ltitle" style="margin-top: 5px;">控件初始定位：</span>
				<select class="initpos" style=" padding-left: 10px!important;">   
				   <option value="top">上</option>   
				   <option value="bottom">下</option>   
				   <option value="left">左</option>   
				   <option value="right">右</option>   
				   <option value="center" selected="selected">居中</option>   
				   <option value="leftTop">左上</option>   
				   <option value="leftBottom">左下</option>   
				   <option value="rightTop">右上</option>   
				   <option value="rightBottom">右下</option>   
				</select>
			</div>
		</div>
	</div>
</div>

<script>

var messageBtnMessageColorPicker=null;
function initMessageBtnMessageColorPicker(color){
	$('.main .mobile.message .message_other #colorSelector>div').css('backgroundColor', color);
	if(messageBtnMessageColorPicker!=null){
		messageBtnMessageColorPicker.ColorPickerSetColor(color);
		return;
	}
	messageBtnMessageColorPicker=$('.main .mobile.message .message_other #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.message .message_other #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.message .message_other .messageColor').val(color);
			//更新数据
			currEditObj.messageColor=color;
		}
	});
}

var messageBtnColorPicker=null;
function initMessageBtnColorPicker(color){
	$('.main .mobile.message .btn_text #colorSelector>div').css('backgroundColor', color);
	if(messageBtnColorPicker!=null){
		messageBtnColorPicker.ColorPickerSetColor(color);
		return;
	}
	messageBtnColorPicker=$('.main .mobile.message .btn_text #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.message .btn_text #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.message .btn_text .btnColor').val(color);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('color',color);
			//更新数据
			currEditObj.btnColor=color;
		}
	});
}

var messageBtnBgColorPicker=null;
function initMessageBtnBgColorPicker(color){
	$('.main .mobile.message .btn_bg_color #colorSelector>div').css('backgroundColor', color);
	if(messageBtnBgColorPicker!=null){
		messageBtnBgColorPicker.ColorPickerSetColor(color);
		return;
	}
	messageBtnBgColorPicker=$('.main .mobile.message .btn_bg_color #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.message .btn_bg_color #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.message .btn_bg_color .btnBgColor').val(color);
			$('.main .mobile.message .btn_bg_image .btnBgImage').css('backgroundImage','none');
			$('.main .mobile.message .btn_bg_image .btnBgImage>span').html('选择图片');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','#' + hex);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src','img/a203937a-669d-44f3-aa48-3dccb51196e2.png');
			//更新数据
			currEditObj.btnBgColor='#' + hex;
			currEditObj.src='';
		}
	});
}

$(function(){
		
	$('.mobile.message .messageTitle').blur(function(){
		currEditObj.messageTitle=$(this).val();
	});
	
	$('.mobile.message .messageContentTip').blur(function(){
		currEditObj.messageContentTip=$(this).val();
	});
	
	$('.mobile.message .messageNameTip').blur(function(){
		currEditObj.messageNameTip=$(this).val();
	});
	
	$('.main .mobile.message .btn_bg_image .btnBgImage').click(function(){
		showSelectImg(function(url){
			//更新ui
			var $btnBgImage=$('.main .mobile.message .btn_bg_image .btnBgImage');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(url)+')');
			$('.main .mobile.message .btn_bg_color .btnBgColor').val('');
			initMessageBtnBgColorPicker('#ffffff');
			//更新图片
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','transparent');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src',getUrl(url));
			//更新数据
			currEditObj.src=url;
			currEditObj.btnBgColor='';
		});
	});
	
	$('.mobile.message .btnTextContent').blur(function(){
		currEditObj.btnText=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>span').html($(this).val());
	});
	
	$('.mobile.message .btnFontsize').change(function(){
		currEditObj.btnFontsize=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('font-size',$(this).val()+'px');
	});
	
	$('.mobile.message .bgtype_img').parent().click(function(){
		$('.main .mobile.message .btn_bg_color').hide();
		$('.main .mobile.message .btn_bg_image').show();
	});
	$('.mobile.message .bgtype_color').parent().click(function(){
		$('.main .mobile.message .btn_bg_color').show();
		$('.main .mobile.message .btn_bg_image').hide();	
	});
		
	var durationTime,delayTime,yuanjiao;
	
	function initDurationTime(val){
		durationTime=$('.edit.message .widget_animation .durationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.duration=ui.value;
			}
		});
	}
	
	function initDelayTime(val){
		delayTime=$('.edit.message .widget_animation .delayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.delay=ui.value;
			}
		});
	}
	
	function initYuanjiao(val){
		yuanjiao=$('.edit.message .widget_style .yuanjiao').slider({
			range: "min",
			value: val,
			min: 0,
			max: 320,
			step: 1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.yuanjiao=ui.value;//更新ui
				var num=ui.value;
				$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
			}
		});
	}
	
	//退出动画
	var disappearDurationTime,disappearDelayTime;
	function initDisappearDurationTime(val){
		disappearDurationTime=$('.edit.message .widget_animation .disappearDurationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDuration=ui.value;
			}
		});
	}	
	function initDisappearDelayTime(val){
		disappearDelayTime=$('.edit.message .widget_animation .disappearDelayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.disappearDelay=ui.value;
			}
		});
	}
	
	function initOther(){	
		$('.edit.message .widget_animation .anmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.type=val;
		});
		$('.edit.message .widget_animation .durationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					durationTime.slider('value',num);		
					//更新数据
			        currEditObj.duration=num;
				}else{
					$(this).val(durationTime.slider('value'));
				}
			}else{
				$(this).val(durationTime.slider('value'));
			}
		});
		$('.edit.message .widget_animation .delayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					delayTime.slider('value',num);		
					//更新数据
			        currEditObj.delay=num;
				}else{
					$(this).val(delayTime.slider('value'));
				}
			}else{
				$(this).val(delayTime.slider('value'));
			}
		});
		//退出动画
		$('.edit.message .isDisappearAnm').change(function(){
			var val=$(this).prop('checked');
			var disappearAnmEl=$(this).parent().siblings('.disappearAnm');
			currEditObj.isDisappear=val;
			if(val){
				$(this).parent().css('marginBottom','-4px');
				disappearAnmEl.show();
			}else{
				$(this).parent().css('marginBottom','5px');
				disappearAnmEl.hide();				
			}
		});	
		$('.edit.message .widget_animation .disappearAnmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.disappearType=val;
		});
		$('.edit.message .widget_animation .disappearDurationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDurationTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDuration=num;
				}else{
					$(this).val(disappearDurationTime.slider('value'));
				}
			}else{
				$(this).val(disappearDurationTime.slider('value'));
			}
		});
		$('.edit.message .widget_animation .disappearDelayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					disappearDelayTime.slider('value',num);		
					//更新数据
			        currEditObj.disappearDelay=num;
				}else{
					$(this).val(disappearDelayTime.slider('value'));
				}
			}else{
				$(this).val(disappearDelayTime.slider('value'));
			}
		});		
		$('.edit.message .widget_style .yuanjiao').siblings('.val').blur(function(){
			var num=$(this).val();
			if(!isNaN(num)){
				num=parseInt(num);
				if(num>=0 && num<=320){
					$(this).val(num);
					yuanjiao.slider('value',num);		
					//更新数据
			        currEditObj.yuanjiao=num;
					//更新ui
					$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
				}else{
					$(this).val(yuanjiao.slider('value'));
				}
			}else{
				$(this).val(yuanjiao.slider('value'));
			}
		});
		initMessageBtnColorPicker('#ffffff');
		initMessageBtnBgColorPicker('#6FB341');
		initMessageBtnMessageColorPicker('#6FB341');
	}
	
	initDurationTime(0);
	initDelayTime(0);
	initDisappearDurationTime(0);
	initDisappearDelayTime(0);
	initYuanjiao(0);
	initOther();
	
	window.editMessage=function(){
		
		$('.mobile.message .messageContentTip').val(currEditObj.messageContentTip);
		$('.mobile.message .messageNameTip').val(currEditObj.messageNameTip);
		$('.mobile.message .messageTitle').val(currEditObj.messageTitle);
		initMessageBtnMessageColorPicker(currEditObj.messageColor);
		$('.main .mobile.message .message_other .messageColor').val(currEditObj.messageColor);
		
		//初始化按钮选项	
		$('.mobile.message .btnTextContent').val(currEditObj.btnText);
		$('.mobile.message .btnFontsize').val(currEditObj.btnFontsize);
		if(currEditObj.btnColor){
			initMessageBtnColorPicker(currEditObj.btnColor);	
			$('.main .mobile.message .btn_text .btnColor').val(currEditObj.btnColor);		
		}		
		var $btnBgImage=$('.main .mobile.message .btn_bg_image .btnBgImage');
		if(!currEditObj.btnBgColor){
			$('.mobile.message .bgtype_img').prop('checked',true);
			$('.main .mobile.message .btn_bg_color').hide();
			$('.main .mobile.message .btn_bg_image').show();
			$('.main .mobile.message .btn_bg_color .btnBgColor').val('');
			initMessageBtnBgColorPicker('#6FB341');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(currEditObj.src)+')');
			$('.main .mobile.message .btn_bg_color').hide();
			$('.main .mobile.message .btn_bg_image').show();
		}else{
			$('.mobile.message .bgtype_color').prop('checked',true);
			$('.main .mobile.message .btn_bg_color').show();
			$('.main .mobile.message .btn_bg_image').hide();
			$('.main .mobile.message .btn_bg_color .btnBgColor').val(currEditObj.btnBgColor);
			initMessageBtnBgColorPicker(currEditObj.btnBgColor);
			$btnBgImage.find('span').html('选择图片');
			$btnBgImage.css('backgroundImage','none');
		}
		if(currEditObj.type){
			$('.edit.message .widget_animation .anmType').val(currEditObj.type);
		}
		if(currEditObj.duration!=null && currEditObj.duration!=undefined){
			initDurationTime(currEditObj.duration);		
			$('.edit.message .widget_animation .durationTime').siblings('.val').val(currEditObj.duration);
		}
		if(currEditObj.delay!=null && currEditObj.delay!=undefined){
			initDelayTime(currEditObj.delay);		
			$('.edit.message .widget_animation .delayTime').siblings('.val').val(currEditObj.delay);	
		}
		//退出动画
		if(currEditObj.isDisappear){
			$('.edit.message .widget_animation .isDisappearAnm').prop('checked',true);
			$('.edit.message .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').show();
		}else{
			$('.edit.message .widget_animation .isDisappearAnm').prop('checked',false);	
			$('.edit.message .widget_animation .isDisappearAnm').parent().siblings('.disappearAnm').hide();		
		}
		if(currEditObj.disappearType){
			$('.edit.message .widget_animation .disappearAnmType').val(currEditObj.disappearType);
		}else{
			$('.edit.message .widget_animation .disappearAnmType').val('a-fadeout');
		}
		if(currEditObj.disappearDuration!=null && currEditObj.disappearDuration!=undefined){
			initDisappearDurationTime(currEditObj.disappearDuration);		
			$('.edit.message .widget_animation .disappearDurationTime').siblings('.val').val(currEditObj.disappearDuration);
		}else{
			initDisappearDurationTime(0);		
			$('.edit.message .widget_animation .disappearDurationTime').siblings('.val').val(0);
		}
		if(currEditObj.disappearDelay!=null && currEditObj.disappearDelay!=undefined){
			initDisappearDelayTime(currEditObj.disappearDelay);		
			$('.edit.message .widget_animation .disappearDelayTime').siblings('.val').val(currEditObj.disappearDelay);	
		}else{
			initDisappearDelayTime(0);		
			$('.edit.message .widget_animation .disappearDelayTime').siblings('.val').val(0);	
		}
		if(currEditObj.yuanjiao!=null && currEditObj.yuanjiao!=undefined){
			initYuanjiao(currEditObj.yuanjiao);	
			$('.edit.message .widget_style .yuanjiao').siblings('.val').val(currEditObj.yuanjiao);			
		}
		if(currEditObj.initPos){
			$('.edit.message select.initpos').val(currEditObj.initPos);
		}
	}
	
});

</script>
				


<div class="mobile edit mask"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		涂抹控件<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
		<div class="block widget_mask" style="border-bottom:0px;">
			<p class="title">涂抹图片：<span class="tips">(建议尺寸：640像素x960像素)</span></p>
			<div style="margin-top:0px;">
				<div class="wcenter pageimage widgetmask" title="点击选择图片" style="height: 300px;line-height: 295px;font-size: 18px;color: #999;">
					<span class="forbitSelect">选择图片</span>
				</div>	
			</div>
			<div>
				<span class="ltitle">涂抹比例：</span>
				<select class="maskPercent">
					<option value="15">15%</option>
					<option value="30">30%</option>
					<option value="60">60%</option>
				</select>
			</div>
		</div>
	</div>
</div>

<script>

$(function(){
	
	$('.edit.mask .widgetmask').click(function(){
		showSelectImg(function(url){
			//更新ui
			var $widgetmask=$('.edit.mask .widgetmask');
			$widgetmask.find('span').html('');
			$widgetmask.css('backgroundImage','url('+getUrl(url)+')');
			//更新数据
			currEditObj.bg=url;
		});
	});	
	
	$('.mobile.mask .maskPercent').change(function(){
		currEditObj.percent=$(this).val();
	});
	
	window.editMask=function(){
		var $widgetmask=$('.edit.mask .widgetmask');
		if(currEditObj.bg){
			$widgetmask.find('span').html('');
			$widgetmask.css('backgroundImage','url('+getUrl(currEditObj.bg)+')');		
		}
		if(currEditObj.percent){
			$('.edit.mask .maskPercent').val(currEditObj.percent);
		}
	}
	
});

</script>		
				


<style>
.main .mobile.iframe input[type="radio"]{
	vertical-align: -2px;
}
</style>

<div class="mobile edit iframe"
	style="background-color: #F7F7F7; width: 377px; height: 585px; display: none;">
	<div class="top"
		style="font-size: 18px; color: #333; width: 317px; line-height: 53px; background: #EDEDED; border-top-left-radius: 10px; border-top-right-radius: 10px;">
		页面层控件<span style="font-size: 16px; color: #999; margin-left: 8px;">(↓向下滚动页面)</span>
	</div>
	<div class="content">
	
		<div class="block widget_img iframe_url">
			<p class="title">页面层URL：</p>
			<p>
				<textarea class="iframe_url_val" maxlength="500" style="height: 80px;padding: 8px;" placeholder="请填入页面层URL，以http://或https://开头"></textarea>
			</p>
			<p style="font-size: 12px;color: gray;padding: 0px 5px;padding-top: 8px;">
			此处填入的URL将在点击按钮后加载到页面层中，可以放置商品、游戏、广告或其他页面的URL
			</p>
		</div>
		
		<div class="block iframe_title">
			<p class="title">页面层标题：</p>
			<p>
				<input type="text" placeholder="请输入页面层的标题" maxlength="20" class="iframe_title_val">
			</p>
		</div>
		
		<div class="block widget_img iframe_close">
			<p class="title">页面层主色调：</p>
			<div>
				<input type="text" class="val iframeCloseColor" style="width: 30%;background: white;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 116px;top: -33px;"><div style="background-color: #ffffff;"></div></div>
			</div>
		</div>
	
		<div class="block minSetting btn_text">
			<p class="title" style="margin-top:3px;">页面层按钮文本：<span class="tips">(如不需要文本，可置空)</span></p>
			<div>
				<span class="ltitle">文本内容：</span>
				<input type="text" class="val btnTextContent" value="0" style="width:136px" maxlength="30"> 
			</div>
			<div>
				<span class="ltitle">字体大小：</span>
				<select class="text-fontSize-menu btnFontsize" style="width: 150px;padding-left:10px!important;margin-left:10px;background:white;">
					<option value="12">12px</option>
					<option value="13">13px</option>
					<option value="14">14px</option>
					<option value="16">16px</option>
					<option value="18">18px</option>
					<option value="24">24px</option>
					<option value="32">32px</option>
					<option value="48">48px</option>
				</select>
			</div>
			<div>
				<span class="ltitle">字体颜色：</span>
				<input type="text" class="val btnColor" style="width: 30%;background: white;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 1px;top: -3px;"><div style="background-color: #ffffff;"></div></div>
			</div>
		</div>
	
		<div class="block btn_bg">
			<p class="title">页面层按钮背景：<span class="tips">(可选择图片或颜色背景)</span></p>
			<p style="padding-top:5px;height: 18px;">
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_color" checked="checked"> 颜色背景</label>
				<label style="float:left;"><input type="radio" name="btnbgtype" class="bgtype_img" style="margin-left:12px;"> 图片背景</label>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_color">
			<p class="title">页面层按钮背景颜色：</p>
			<p>
				<input type="text" class="btnBgColor" style="width: 30%;height: 16px;" readonly="readonly" value="#ffffff">
				<div id="colorSelector" style="left: 113px;top: -35px;"><div style="background-color: #ffffff;"></div></div>
			</p>
		</div>
	
		<div class="block widget_img btn_bg_image" style="display:none;">
			<p class="title">页面层按钮背景图片：<span class="tips">(请点击上传)</span></p>
			<p>
				<div class="wcenter pageimage btnBgImage" title="点击选择图片" style="height: 100px;line-height: 100px;font-size: 18px;color: #999;">
					<span class="forbitSelect">选择图片</span>
				</div>	
			</p>
		</div>	
		
		<div class="block minSetting widget_animation">
			<p class="title" style="margin-top:3px;">动画效果：<span class="tips">(修改后需要重载页面才可以看到效果)</span></p>
			<div>
				<span class="ltitle" style="margin-top:6px;">动画类型：</span>
				<select class="widgetSelect anmType">
					<optgroup label="淡入效果">
						<option value="a-fadein">淡入</option>
						<option value="a-fadeinL">从左淡入</option>
						<option value="a-fadeinR">从右淡入</option>
						<option value="a-fadeinT">从上淡入</option>
						<option value="a-fadeinB">从下淡入</option>
					</optgroup>
					<optgroup label="弹入效果">
						<option value="a-bouncein">弹入</option>
						<option value="a-bounceinL">从左弹入</option>
						<option value="a-bounceinR">从右弹入</option>
						<option value="a-bounceinT">从上弹入</option>
						<option value="a-bounceinB">从下弹入</option>
					</optgroup>
					<optgroup label="转入效果">
						<option value="a-rotatein">转入</option>
						<option value="a-rotateinLT">从左上转入</option>
						<option value="a-rotateinLB">从左下转入</option>
						<option value="a-rotateinRT">从右上转入</option>
						<option value="a-rotateinRB">从右下转入</option>
					</optgroup>
					<optgroup label="翻入效果">
						<option value="a-flipinX">水平翻入</option>
						<option value="a-flipinY">垂直翻入</option>
						<option value="a-flipinZ">3D翻入</option>
					</optgroup>
					<optgroup label="强调效果">
						<option value="a-seal">印章</option>
						<option value="a-flash">闪烁</option>
						<option value="a-shake">震颤</option>
						<option value="a-ring">抖动</option>
						<option value="a-wobble">摇晃</option>
						<option value="a-swing">悬摆</option>
						<option value="a-light">光速</option>
						<option value="a-slide">展开</option>
					</optgroup>
					<optgroup label="持续效果">
						<option value="a-rotateR">顺时针旋转</option>
						<option value="a-rotateL">逆时针旋转</option>
						<option value="a-slowshake">持续摇摆</option>
						<option value="a-slowflag">持续标记</option>
					</optgroup>	
					<!-- <optgroup label="滚动消失效果">
						<option value="a-rollT">向上滚动</option>
						<option value="a-rollR">向右滚动</option>
						<option value="a-rollB">向下滚动</option>
						<option value="a-rollL">向左滚动</option>
					</optgroup> -->
				</select>
			</div>
			<div>
				<span class="ltitle">持续时间：</span>
				<div class="weikeSlider durationTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
			<div>
				<span class="ltitle">延时时间：</span>
				<div class="weikeSlider delayTime" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">秒</span>
			</div>
		</div>	
		<div class="block minSetting widget_style" style="border-bottom:0px;">
			<p class="title" style="margin-top:3px;">样式效果：</p>
			<div>
				<span class="ltitle">圆角：</span>
				<div class="weikeSlider yuanjiao" style="width:169px;"></div>
				<input type="text" class="val" value="0" maxlength="10"> 
				<span class="ceil">px</span>
			</div>
		</div>
		<div class="block minSetting widget_style" style="border-bottom:0px;padding-right:13px;">
			<p class="title" style="margin-top:3px;">高级设置：<span class="tips">(初始定位用于设置控件基于哪种对齐方式定位)</span></p>
			<div>
				<span class="ltitle" style="margin-top: 5px;">控件初始定位：</span>
				<select class="initpos" style=" padding-left: 10px!important;">   
				   <option value="top">上</option>   
				   <option value="bottom">下</option>   
				   <option value="left">左</option>   
				   <option value="right">右</option>   
				   <option value="center" selected="selected">居中</option>   
				   <option value="leftTop">左上</option>   
				   <option value="leftBottom">左下</option>   
				   <option value="rightTop">右上</option>   
				   <option value="rightBottom">右下</option>   
				</select>
			</div>
		</div>
	</div>
</div>

<script>

var iframeCloseColorPicker=null;
function initIframeCloseColorPicker(color){
	$('.main .mobile.iframe .iframe_close #colorSelector>div').css('backgroundColor', color);
	if(iframeCloseColorPicker!=null){
		iframeCloseColorPicker.ColorPickerSetColor(color);
		return;
	}
	iframeCloseColorPicker=$('.main .mobile.iframe .iframe_close #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.iframe .iframe_close #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.iframe .iframe_close .iframeCloseColor').val(color);
			//更新数据
			currEditObj.pColor=color;
		}
	});
}

var iframeBtnColorPicker=null;
function initIframeBtnColorPicker(color){
	$('.main .mobile.iframe .btn_text #colorSelector>div').css('backgroundColor', color);
	if(iframeBtnColorPicker!=null){
		iframeBtnColorPicker.ColorPickerSetColor(color);
		return;
	}
	iframeBtnColorPicker=$('.main .mobile.iframe .btn_text #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.iframe .btn_text #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.iframe .btn_text .btnColor').val(color);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('color',color);
			//更新数据
			currEditObj.btnColor=color;
		}
	});
}

var iframeBtnBgColorPicker=null;
function initIframeBtnBgColorPicker(color){
	$('.main .mobile.iframe .btn_bg_color #colorSelector>div').css('backgroundColor', color);
	if(iframeBtnBgColorPicker!=null){
		iframeBtnBgColorPicker.ColorPickerSetColor(color);
		return;
	}
	iframeBtnBgColorPicker=$('.main .mobile.iframe .btn_bg_color #colorSelector').ColorPicker({
		color:color,
		onShow: function (colpkr) {
			$(colpkr).fadeIn(500);
			return false;
		},
		onHide: function (colpkr) {
			$(colpkr).fadeOut(500);
			return false;
		},
		onChange: function (hsb, hex, rgb) {
			//更新ui
			var color='#' + hex;
			$('.main .mobile.iframe .btn_bg_color #colorSelector>div').css('backgroundColor', color);
			$('.main .mobile.iframe .btn_bg_color .btnBgColor').val(color);
			$('.main .mobile.iframe .btn_bg_image .btnBgImage').css('backgroundImage','none');
			$('.main .mobile.iframe .btn_bg_image .btnBgImage>span').html('选择图片');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','#' + hex);
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src','img/a203937a-669d-44f3-aa48-3dccb51196e2.png');
			//更新数据
			currEditObj.btnBgColor='#' + hex;
			currEditObj.src='';
		}
	});
}

$(function(){
	
	$('.main .mobile.iframe .btn_bg_image .btnBgImage').click(function(){
		showSelectImg(function(url){
			//更新ui
			var $btnBgImage=$('.main .mobile.iframe .btn_bg_image .btnBgImage');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(url)+')');
			$('.main .mobile.iframe .btn_bg_color .btnBgColor').val('');
			initIframeBtnBgColorPicker('#ffffff');
			//更新图片
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('background-color','transparent');
			$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>img').attr('src',getUrl(url));
			//更新数据
			currEditObj.src=url;
			currEditObj.btnBgColor='';
		});
	});
	
	$('.mobile.iframe .btnTextContent').blur(function(){
		currEditObj.btnText=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate>a>span').html($(this).val());
	});
	
	$('.mobile.iframe .btnFontsize').change(function(){
		currEditObj.btnFontsize=$(this).val();
		$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('font-size',$(this).val()+'px');
	});
	
	$('.mobile.iframe .bgtype_img').parent().click(function(){
		$('.main .mobile.iframe .btn_bg_color').hide();
		$('.main .mobile.iframe .btn_bg_image').show();
	});
	$('.mobile.iframe .bgtype_color').parent().click(function(){
		$('.main .mobile.iframe .btn_bg_color').show();
		$('.main .mobile.iframe .btn_bg_image').hide();	
	});
		
	var durationTime,delayTime,yuanjiao;
	
	function initDurationTime(val){
		durationTime=$('.edit.iframe .widget_animation .durationTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.duration=ui.value;
			}
		});
	}
	
	function initDelayTime(val){
		delayTime=$('.edit.iframe .widget_animation .delayTime').slider({
			range: "min",
			value: val,
			min: 0,
			max: 10.1,
			step: 0.1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.delay=ui.value;
			}
		});
	}
	
	function initYuanjiao(val){
		yuanjiao=$('.edit.iframe .widget_style .yuanjiao').slider({
			range: "min",
			value: val,
			min: 0,
			max: 320,
			step: 1,
			slide: function( event, ui ) {
		        $(ui.handle).closest('.weikeSlider').siblings('.val').val(ui.value);
		      	//更新数据
		        currEditObj.yuanjiao=ui.value;//更新ui
				var num=ui.value;
				$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
			}
		});
	}
	
	function initOther(){
		$('.edit.iframe .iframe_url .iframe_url_val').blur(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.pLink=val.replace(/"/g,'&quot;').replace(/\r\n/g,'').replace(/\r/g,'').replace(/\n/g,'');
		});		
		$('.edit.iframe .widget_animation .anmType').change(function(){
			var val=$(this).val();
			//更新数据
	        currEditObj.type=val;
		});
		$('.edit.iframe .widget_animation .durationTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					durationTime.slider('value',num);		
					//更新数据
			        currEditObj.duration=num;
				}else{
					$(this).val(durationTime.slider('value'));
				}
			}else{
				$(this).val(durationTime.slider('value'));
			}
		});
		$('.edit.iframe .widget_animation .delayTime').siblings('.val').blur(function(){
			var val=$(this).val();
			if(!isNaN(val)){
				var num=parseFloat(val).toFixed(1);
				if(num==parseInt(num)){
					num=parseInt(num);
				}
				if(num>=0 && num<=10){
					$(this).val(num);
					delayTime.slider('value',num);		
					//更新数据
			        currEditObj.delay=num;
				}else{
					$(this).val(delayTime.slider('value'));
				}
			}else{
				$(this).val(delayTime.slider('value'));
			}
		});
		$('.edit.iframe .widget_style .yuanjiao').siblings('.val').blur(function(){
			var num=$(this).val();
			if(!isNaN(num)){
				num=parseInt(num);
				if(num>=0 && num<=320){
					$(this).val(num);
					yuanjiao.slider('value',num);		
					//更新数据
			        currEditObj.yuanjiao=num;
					//更新ui
					$('#screen')[0].contentWindow.Bar.currEl.find('.rotate').css('border-radius',num+'px').css('-webkit-border-radius',num+'px');
				}else{
					$(this).val(yuanjiao.slider('value'));
				}
			}else{
				$(this).val(yuanjiao.slider('value'));
			}
		});
		initIframeBtnColorPicker('#ffffff');
		initIframeBtnBgColorPicker('#6FB341');
		initIframeCloseColorPicker('#6FB341');
	}
	
	initDurationTime(0);
	initDelayTime(0);
	initYuanjiao(0);
	initOther();
	
	window.editIframe=function(){
		//初始化按钮选项	
		$('.edit.iframe .iframe_url .iframe_url_val').val(currEditObj.pLink.replace(/&quot;/g,'"'));
		if(currEditObj.pColor){
			initIframeCloseColorPicker(currEditObj.pColor);
			$('.main .mobile.iframe .iframe_close .iframeCloseColor').val(currEditObj.pColor);		
		}else{
			initIframeCloseColorPicker('#000000');	
			initIframeCloseColorPicker('');		
		}
		$('.mobile.iframe .iframe_title_val').val(currEditObj.pTitle);
		$('.mobile.iframe .btnTextContent').val(currEditObj.btnText);
		$('.mobile.iframe .btnFontsize').val(currEditObj.btnFontsize);
		if(currEditObj.btnColor){
			initIframeBtnColorPicker(currEditObj.btnColor);	
			$('.main .mobile.iframe .btn_text .btnColor').val(currEditObj.btnColor);		
		}
		var $btnBgImage=$('.main .mobile.iframe .btn_bg_image .btnBgImage');
		if(!currEditObj.btnBgColor){
			$('.mobile.iframe .bgtype_img').prop('checked',true);
			$('.main .mobile.iframe .btn_bg_color').hide();
			$('.main .mobile.iframe .btn_bg_image').show();
			$('.main .mobile.iframe .btn_bg_color .btnBgColor').val('');
			initIframeBtnBgColorPicker('#6FB341');
			$btnBgImage.find('span').html('');
			$btnBgImage.css('backgroundImage','url('+getUrl(currEditObj.src)+')');
			$('.main .mobile.iframe .btn_bg_color').hide();
			$('.main .mobile.iframe .btn_bg_image').show();
		}else{
			$('.mobile.iframe .bgtype_color').prop('checked',true);
			$('.main .mobile.iframe .btn_bg_color').show();
			$('.main .mobile.iframe .btn_bg_image').hide();
			$('.main .mobile.iframe .btn_bg_color .btnBgColor').val(currEditObj.btnBgColor);
			initIframeBtnBgColorPicker(currEditObj.btnBgColor);
			$btnBgImage.find('span').html('选择图片');
			$btnBgImage.css('backgroundImage','none');
		}
		if(currEditObj.type){
			$('.edit.iframe .widget_animation .anmType').val(currEditObj.type);
		}
		if(currEditObj.duration!=null && currEditObj.duration!=undefined){
			initDurationTime(currEditObj.duration);		
			$('.edit.iframe .widget_animation .durationTime').siblings('.val').val(currEditObj.duration);
		}
		if(currEditObj.delay!=null && currEditObj.delay!=undefined){
			initDelayTime(currEditObj.delay);		
			$('.edit.iframe .widget_animation .delayTime').siblings('.val').val(currEditObj.delay);	
		}
		if(currEditObj.yuanjiao!=null && currEditObj.yuanjiao!=undefined){
			initYuanjiao(currEditObj.yuanjiao);	
			$('.edit.iframe .widget_style .yuanjiao').siblings('.val').val(currEditObj.yuanjiao);			
		}
		if(currEditObj.initPos){
			$('.edit.iframe select.initpos').val(currEditObj.initPos);
		}
	}
	
});

</script>		
			</div>
			
		<div class="span8" id="templateEdit"></div>
	</div>

	<div class="m-popup new-popup" id="new_media_div_">
	   <div class="newpop-box">
	      <h3>选择图片<a href="#" class="icon-m btn-ed-close" title="关闭窗口" onclick="hideSelectImg()"></a></h3>
	      <iframe id="app_pic_select" name="app_pic_select" src="action-selectimg.html" width="800px" height="531px" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
	   </div>
	</div>
	
	<div class="m-popup new-popup" id="new_template_div_">
	   <div class="newpop-box">
	      <h3>选择页面模版<a href="#" class="icon-m btn-ed-close" title="关闭窗口" onclick="hideSelectTemplate()"></a></h3>
	      <iframe id="app_template_select" name="app_template_select" src="action-template.html" width="800px" height="531px" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
	   </div>
	</div>

	<div class="create-menu">
		<ul style="display: none; left: 50px; top: 50px;">
			<li id="bring-top">置于顶层</li>
			<li id="bring-up">上移一层</li>
			<li id="bring-down">下移一层</li>
			<li id="bring-bottom">置于底层</li>
			<li class="menu-line"></li>
			<li id="copy-item">复制</li>
			<li class="menu-line"></li>
			<li id="delete-item" class="caution">删除 (←)</li>
		</ul>
	</div>
 
	<div class="m-popup new-popup" id="masklogin">
	   <div class="newpop-box login-box">
	   		<div class="form s-bg-fff">
					<div class="formWrap">
						<h3>登录</h3>
						<form class="form-signin">
							<table>
								<colgroup>
									<col width="20%" />
									<col width="80%" />
								</colgroup>
								<tbody>
									<tr>
										<td class='input'>
											<p class='input' id="loginUserName">
												<input type="text" name="username" value="" placeHolder="请输入邮箱账号" />
											</p>
										</td>
									</tr>
									<tr>
										<td class='input'>
											<p class='input' id="loginPassWord">
												<input type="password" name="password" value="" maxlength="36"
													placeHolder="请输入密码" />
											</p>
										</td>
									</tr>
									<tr>
										<td class='submit'><p class="u-btn04">
												<a href="javascript:void(0)">登录</a>
											</p></td>
									</tr>
								</tbody>
							</table>
						</form>
					</div>
				</div>
	   </div>
	</div>

	<div class="ed-btn"> 
	    <a class="f-mg-l-13 icon-m i-eclose icon-001 i001" onclick="window.open('pc-preview.html')" title="预览场景"></a>
	    <p class="f-pad-t-5 f-pad-b-20 f-tc i001" onclick="window.open('pc-preview.html')" title="预览场景">预览场景</p>
	    <a class="f-mg-l-13 icon-m i-review icon-002 i002" onclick="window.open('/help.jsp')" title="需要帮助"></a>
	    <p class="f-pad-t-5 f-pad-b-20 f-tc i002" onclick="window.open('/help.jsp')" title="需要帮助">需要帮助</p>
	    <a class="f-mg-l-13 icon-m i-review icon-004 i004" onclick="window.open('/help.jsp#6_4')" title="操作提示"></a>
	    <p class="f-pad-t-5 f-pad-b-20 f-tc i004" onclick="window.open('/help.jsp#6_4')" title="操作提示">操作提示</p>
	    <p class="m-ehelp-200 i004-tip f-hide" style="right: 75px;top: 12px;height: 296px;width: 182px;">
	       <label class="f-pad-t-5"><strong style="  font-weight: bold;">选择控件：</strong></label>
	        <label class="f-pad-t-5">按下ctrl或shift可选择多个控件</label>
	       <label class="f-pad-t-5">按住鼠标并拖动，可选择当前区域的控件</label>
	       <label class="f-pad-t-5"><strong style="  font-weight: bold;">快捷键：</strong></label>
	       <label class="f-pad-t-5">方向键可以用于移动当前控件</label>
	       <label class="f-pad-t-5">delete键可用于删除当前控件</label>
	       <label class="f-pad-t-5">ctrl+c可以用于复制控件</label>
	       <label class="f-pad-t-5">ctrl+v可以用于粘贴控件</label>
	       <label class="f-pad-t-5">ctrl+a可以用于全选控件</label>
	       <label class="f-pad-t-5">ctrl+z可以用于还原上一步操作</label>
	       <label class="f-pad-t-5">ctrl+s可以用于保存场景</label>
    	</p>
	    <a class="f-mg-l-13 icon-m i-ehel icon-001p icon-003 i003" onclick="window.open('/account.jsp')" title="高级用户"></a>
	    <p class="f-pad-t-5 f-tc i003" onclick="window.open('/account.jsp')" title="高级用户">高级用户</p>
		<p class="m-ehelp-200 i003-tip f-hide" style="right: 75px;top: 178px;height: 176px;width: 140px;">
	       <label class="f-pad-t-5"><strong style="  font-weight: bold;">高级用户：</strong></label>
	        <label class="f-pad-t-5">不限访问流量</label>
	       <label class="f-pad-t-5">可去除尾部版权广告</label>
	       <label class="f-pad-t-5">可自定义加载图标</label>
	       <label class="f-pad-t-5">可不限编辑页数</label>
	       <label class="f-pad-t-5">可导出预约/留言数据</label>
	       <label class="f-pad-t-5">可使用杂志翻页模版</label>
    	</p>
    </div>
    <div class="selectArea"></div>
    <!--<img id="img" src='http://cdn.weikecj.cn/2015/3/weikecj/1/ff32fe4a-90f8-48e5-9f98-143fdb5a78ff.png?1461636894802' />
	<script>
		window.onload = function() {
			parent.document.getElementById('frameimg_1461636894802').height = document.getElementById('img').height + 'px';
		}
	</script>-->
</body>
</html>
